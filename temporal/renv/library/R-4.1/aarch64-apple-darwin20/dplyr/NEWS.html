
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>dplyr 1.0.9 &#8212; Temporal and sequential analysis - LASI 2022</title>
    
  <link href="../../../../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../../../../_static/solar_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Temporal and sequential analysis - LASI 2022</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lecture1.html">
   Lecture 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lecture2.html">
   Lecture 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lecture3.html">
   Lecture 3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lab1.html">
   Lab 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lab2.html">
   Lab 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lab3.html">
   Lab 3
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Quan Nguyen<br>Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/temporal/renv/library/R-4.1/aarch64-apple-darwin20/dplyr/NEWS.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/quan3010/temporal_analysis"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/quan3010/temporal_analysis/issues/new?title=Issue%20on%20page%20%2Ftemporal/renv/library/R-4.1/aarch64-apple-darwin20/dplyr/NEWS.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   dplyr 1.0.9
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-8">
   dplyr 1.0.8
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-7">
   dplyr 1.0.7
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-6">
   dplyr 1.0.6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-5">
   dplyr 1.0.5
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-4">
   dplyr 1.0.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-3">
   dplyr 1.0.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-2">
   dplyr 1.0.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-1">
   dplyr 1.0.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-1-0-0">
   dplyr 1.0.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#breaking-changes">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-features">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#experimental-features">
     Experimental features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#across">
     across()
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#rowwise">
     rowwise()
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vctrs">
     vctrs
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#grouping">
     Grouping
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lifecycle-changes">
     Lifecycle changes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#removed">
       Removed
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#deprecated">
       Deprecated
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#superseded">
       Superseded
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#questioning">
       Questioning
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#stable">
       Stable
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#documentation-improvements">
     Documentation improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-improvements-and-bug-fixes">
     Minor improvements and bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-8-5-2020-03-07">
   dplyr 0.8.5 (2020-03-07)
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-8-4-2020-01-30">
   dplyr 0.8.4 (2020-01-30)
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-8-3-2019-07-04">
   dplyr 0.8.3 (2019-07-04)
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-8-2-2019-06-28">
   dplyr 0.8.2 (2019-06-28)
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-functions">
     New functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#colwise-changes">
     colwise changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hybrid-evaluation-changes">
     Hybrid evaluation changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-changes">
     Minor changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-8-1-2019-05-14">
   dplyr 0.8.1 (2019-05-14)
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     New functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Minor changes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-8-0-1-2019-02-15">
   dplyr 0.8.0.1 (2019-02-15)
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-8-0-2019-02-14">
   dplyr 0.8.0 (2019-02-14)
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     New functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#major-changes">
     Major changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     Minor changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lifecycle">
     Lifecycle
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#changes-to-column-wise-functions">
     Changes to column wise functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#performance">
     Performance
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#internal">
     Internal
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#documentation">
     Documentation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#deprecated-and-defunct-functions">
       Deprecated and defunct functions
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-7-6">
   dplyr 0.7.6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-7-5-2018-04-14">
   dplyr 0.7.5 (2018-04-14)
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#breaking-changes-for-package-developers">
     Breaking changes for package developers
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bug-fixes">
     Bug fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id7">
     Major changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     Minor changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id9">
     Documentation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#error-messages">
     Error messages
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id10">
     Performance
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id11">
     Internal
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-7-4">
   dplyr 0.7.4
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-7-3">
   dplyr 0.7.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-7-2">
   dplyr 0.7.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-7-1">
   dplyr 0.7.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-7-0">
   dplyr 0.7.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-data-functions-and-features">
     New data, functions, and features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#deprecated-and-defunct">
     Deprecated and defunct
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#databases">
     Databases
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#utf-8">
     UTF-8
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#colwise-functions">
     Colwise functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidyeval">
     Tidyeval
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#verbs">
     Verbs
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#joins">
       Joins
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#select">
       Select
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#other">
       Other
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#combining-and-comparing">
     Combining and comparing
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#vector-functions">
     Vector functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-minor-changes-and-bug-fixes">
     Other minor changes and bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-5-0">
   dplyr 0.5.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id12">
     Breaking changes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#existing-functions">
       Existing functions
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id13">
       Deprecated and defunct functions
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id14">
     New functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#local-backends">
     Local backends
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dtplyr">
       dtplyr
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tibble">
       Tibble
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#tbl-cube">
       tbl_cube
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remote-backends">
     Remote backends
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sqlite">
       SQLite
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sql-translation">
       SQL translation
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#internals">
       Internals
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id15">
     Minor improvements and bug fixes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#single-table-verbs">
       Single table verbs
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#dual-table-verbs">
       Dual table verbs
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id16">
       Vector functions
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-4-3">
   dplyr 0.4.3
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#improved-encoding-support">
     Improved encoding support
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#other-minor-improvements-and-bug-fixes">
     Other minor improvements and bug fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id17">
     Databases
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#hybrid-evaluation">
     Hybrid evaluation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-4-2">
   dplyr 0.4.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-4-1">
   dplyr 0.4.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-4-0">
   dplyr 0.4.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id18">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-vignettes">
     New vignettes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-improvements">
     Minor improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id19">
     Bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-3-0-1">
   dplyr 0.3.0.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-3">
   dplyr 0.3
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id20">
     New functions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#programming-with-dplyr-non-standard-evaluation">
     Programming with dplyr (non-standard evaluation)
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#removed-and-deprecated-features">
     Removed and deprecated features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id21">
     Minor improvements and bug fixes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-improvements-and-bug-fixes-by-backend">
     Minor improvements and bug fixes by backend
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id22">
       Databases
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-frames-tbl-df">
       Data frames/
       <code class="docutils literal notranslate">
        <span class="pre">
         tbl_df
        </span>
       </code>
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#data-tables">
       Data tables
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#cubes">
       Cubes
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-2">
   dplyr 0.2
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#piping">
     Piping
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#do">
     Do
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-verbs">
     New verbs
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id23">
     Minor improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id24">
     Bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-1-3">
   dplyr 0.1.3
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id25">
     Bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-1-2">
   dplyr 0.1.2
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id26">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id27">
     Bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#dplyr-0-1-1">
   dplyr 0.1.1
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#improvements">
     Improvements
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id28">
     Bug fixes
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-9">
<h1>dplyr 1.0.9<a class="headerlink" href="#dplyr-1-0-9" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">rows_append()</span></code> which works like <code class="docutils literal notranslate"><span class="pre">rows_insert()</span></code> but ignores keys and
allows you to insert arbitrary rows with a guarantee that the type of <code class="docutils literal notranslate"><span class="pre">x</span></code>
won’t change (#6249, thanks to &#64;krlmlr for the implementation and &#64;mgirlich
for the idea).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rows_*()</span></code> functions no longer require that the key values in <code class="docutils literal notranslate"><span class="pre">x</span></code> uniquely
identify each row. Additionally, <code class="docutils literal notranslate"><span class="pre">rows_insert()</span></code> and <code class="docutils literal notranslate"><span class="pre">rows_delete()</span></code> no
longer require that the key values in <code class="docutils literal notranslate"><span class="pre">y</span></code> uniquely identify each row. Relaxing
this restriction should make these functions more practically useful for
data frames, and alternative backends can enforce this in other ways as needed
(i.e. through primary keys) (#5553).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rows_insert()</span></code> gained a new <code class="docutils literal notranslate"><span class="pre">conflict</span></code> argument allowing you greater control
over rows in <code class="docutils literal notranslate"><span class="pre">y</span></code> with keys that conflict with keys in <code class="docutils literal notranslate"><span class="pre">x</span></code>. A conflict arises
if a key in <code class="docutils literal notranslate"><span class="pre">y</span></code> already exists in <code class="docutils literal notranslate"><span class="pre">x</span></code>. By default, a conflict results in an
error, but you can now also <code class="docutils literal notranslate"><span class="pre">&quot;ignore&quot;</span></code> these <code class="docutils literal notranslate"><span class="pre">y</span></code> rows. This is very similar to
the <code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">CONFLICT</span> <span class="pre">DO</span> <span class="pre">NOTHING</span></code> command from SQL (#5588, with helpful additions
from &#64;mgirlich and &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rows_update()</span></code>, <code class="docutils literal notranslate"><span class="pre">rows_patch()</span></code>, and <code class="docutils literal notranslate"><span class="pre">rows_delete()</span></code> gained a new <code class="docutils literal notranslate"><span class="pre">unmatched</span></code>
argument allowing you greater control over rows in <code class="docutils literal notranslate"><span class="pre">y</span></code> with keys that are
unmatched by the keys in <code class="docutils literal notranslate"><span class="pre">x</span></code>. By default, an unmatched key results in an
error, but you can now also <code class="docutils literal notranslate"><span class="pre">&quot;ignore&quot;</span></code> these <code class="docutils literal notranslate"><span class="pre">y</span></code> rows (#5984, #5699).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rows_delete()</span></code> no longer requires that the columns of <code class="docutils literal notranslate"><span class="pre">y</span></code> be a strict subset
of <code class="docutils literal notranslate"><span class="pre">x</span></code>. Only the columns specified through <code class="docutils literal notranslate"><span class="pre">by</span></code> will be utilized from <code class="docutils literal notranslate"><span class="pre">y</span></code>,
all others will be dropped with a message.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rows_*()</span></code> functions now always retain the column types of <code class="docutils literal notranslate"><span class="pre">x</span></code>. This
behavior was documented, but previously wasn’t being applied correctly
(#6240).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rows_*()</span></code> functions now fail elegantly if <code class="docutils literal notranslate"><span class="pre">y</span></code> is a zero column data frame
and <code class="docutils literal notranslate"><span class="pre">by</span></code> isn’t specified (#6179).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-8">
<h1>dplyr 1.0.8<a class="headerlink" href="#dplyr-1-0-8" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Better display of error messages thanks to rlang 1.0.0.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate(.keep</span> <span class="pre">=</span> <span class="pre">&quot;none&quot;)</span></code> is no longer identical to <code class="docutils literal notranslate"><span class="pre">transmute()</span></code>.
<code class="docutils literal notranslate"><span class="pre">transmute()</span></code> has not been changed, and completely ignores the column ordering
of the existing data, instead relying on the ordering of expressions
supplied through <code class="docutils literal notranslate"><span class="pre">...</span></code>. <code class="docutils literal notranslate"><span class="pre">mutate(.keep</span> <span class="pre">=</span> <span class="pre">&quot;none&quot;)</span></code> has been changed to ensure
that pre-existing columns are never moved, which aligns more closely with the
other <code class="docutils literal notranslate"><span class="pre">.keep</span></code> options (#6086).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> forbids matrix results (#5973) and warns about data frame
results, especially data frames created from <code class="docutils literal notranslate"><span class="pre">across()</span></code> with a hint
to use <code class="docutils literal notranslate"><span class="pre">if_any()</span></code> or <code class="docutils literal notranslate"><span class="pre">if_all()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> helpers (<code class="docutils literal notranslate"><span class="pre">slice_head()</span></code>, <code class="docutils literal notranslate"><span class="pre">slice_tail()</span></code>, <code class="docutils literal notranslate"><span class="pre">slice_min()</span></code>, <code class="docutils literal notranslate"><span class="pre">slice_max()</span></code>)
now accept negative values for <code class="docutils literal notranslate"><span class="pre">n</span></code> and <code class="docutils literal notranslate"><span class="pre">prop</span></code> (#5961).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> now indicates which group produces an error (#5931).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cur_data()</span></code> and <code class="docutils literal notranslate"><span class="pre">cur_data_all()</span></code> don’t simplify list columns in rowwise data frames (#5901).</p></li>
<li><p>dplyr now uses <code class="docutils literal notranslate"><span class="pre">rlang::check_installed()</span></code> to prompt you whether to install
required packages that are missing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">storms</span></code> data updated to 2020 (&#64;steveharoz, #5899).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce()</span></code> accepts 1-D arrays (#5557).</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">trunc_mat()</span></code> is no longer reexported from dplyr (#6141).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-7">
<h1>dplyr 1.0.7<a class="headerlink" href="#dplyr-1-0-7" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">across()</span></code> uses the formula environment when inlining them (#5886).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise.rowwise_df()</span></code> is quiet when the result is ungrouped (#5875).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">c_across()</span></code> and <code class="docutils literal notranslate"><span class="pre">across()</span></code> key deparsing not confused by long calls (#5883).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">across()</span></code> handles named selections (#5207).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-6">
<h1>dplyr 1.0.6<a class="headerlink" href="#dplyr-1-0-6" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_count()</span></code> is now generic (#5837).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if_any()</span></code> and <code class="docutils literal notranslate"><span class="pre">if_all()</span></code> abort when a predicate is mistakingly used as <code class="docutils literal notranslate"><span class="pre">.cols=</span></code> (#5732).</p></li>
<li><p>Multiple calls to <code class="docutils literal notranslate"><span class="pre">if_any()</span></code> and/or <code class="docutils literal notranslate"><span class="pre">if_all()</span></code> in the same expression are now
properly disambiguated (#5782).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> now inlines <code class="docutils literal notranslate"><span class="pre">if_any()</span></code> and <code class="docutils literal notranslate"><span class="pre">if_all()</span></code> expressions. This greatly
improves performance with grouped data frames.</p></li>
<li><p>Fixed behaviour of <code class="docutils literal notranslate"><span class="pre">...</span></code> in top-level <code class="docutils literal notranslate"><span class="pre">across()</span></code> calls (#5813, #5832).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">across()</span></code> now inlines lambda-formulas. This is slightly more performant and
will allow more optimisations in the future.</p></li>
<li><p>Fixed issue in <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> causing lists to be incorrectly transformed as
data frames (#5417, #5749).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> no longer creates duplicate variables when renaming a variable
to the same name as a grouping variable (#5841).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dplyr_col_select()</span></code> keeps attributes for bare data frames (#5294, #5831).</p></li>
<li><p>Fixed quosure handling in <code class="docutils literal notranslate"><span class="pre">dplyr::group_by()</span></code> that caused issues with extra
arguments (tidyverse/lubridate#959).</p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">name</span></code> argument from the <code class="docutils literal notranslate"><span class="pre">compute()</span></code> generic (&#64;ianmcook, #5783).</p></li>
<li><p>row-wise data frames of 0 rows and list columns are supported again (#5804).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-5">
<h1>dplyr 1.0.5<a class="headerlink" href="#dplyr-1-0-5" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed edge case of <code class="docutils literal notranslate"><span class="pre">slice_sample()</span></code> when <code class="docutils literal notranslate"><span class="pre">weight_by=</span></code> is used and there
0 rows (#5729).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">across()</span></code> can again use columns in functions defined inline (#5734).</p></li>
<li><p>Using testthat 3rd edition.</p></li>
<li><p>Fixed bugs introduced in <code class="docutils literal notranslate"><span class="pre">across()</span></code> in previous version (#5765).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> keeps attributes unrelated to the grouping (#5760).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.cols=</span></code> argument of <code class="docutils literal notranslate"><span class="pre">if_any()</span></code> and <code class="docutils literal notranslate"><span class="pre">if_all()</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">everything()</span></code>.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-4">
<h1>dplyr 1.0.4<a class="headerlink" href="#dplyr-1-0-4" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Improved performance for <code class="docutils literal notranslate"><span class="pre">across()</span></code>. This makes <code class="docutils literal notranslate"><span class="pre">summarise(across())</span></code> and
<code class="docutils literal notranslate"><span class="pre">mutate(across())</span></code> perform as well as the superseded colwise equivalents (#5697).</p></li>
<li><p>New functions <code class="docutils literal notranslate"><span class="pre">if_any()</span></code> and <code class="docutils literal notranslate"><span class="pre">if_all()</span></code> (#4770, #5713).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> silently ignores NULL results (#5708).</p></li>
<li><p>Fixed a performance regression in <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> when warnings occur once per
group (#5675). We no longer instrument warnings with debugging information
when <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> is called within <code class="docutils literal notranslate"><span class="pre">suppressWarnings()</span></code>.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-3">
<h1>dplyr 1.0.3<a class="headerlink" href="#dplyr-1-0-3" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> no longer informs when the result is ungrouped (#5633).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by(.drop</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> preserves ordered factors (&#64;brianrice2, #5545).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count()</span></code> and <code class="docutils literal notranslate"><span class="pre">tally()</span></code> are now generic.</p></li>
<li><p>Removed default fallbacks to lazyeval methods; this will yield better error messages when
you call a dplyr function with the wrong input, and is part of our long term
plan to remove the deprecated lazyeval interface.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inner_join()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">keep</span></code> parameter for consistency with the other
mutating joins (&#64;patrickbarks, #5581).</p></li>
<li><p>Improved performance with many columns, with a dynamic data mask using active
bindings and lazy chops (#5017).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> and friends preserves row names in data frames once more (#5418).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> uses the ungrouped data for the implicit mutate step (#5598).
You might have to define an <code class="docutils literal notranslate"><span class="pre">ungroup()</span></code> method for custom classes.
For example, see <a class="reference external" href="https://github.com/hadley/cubelyr/pull/3">https://github.com/hadley/cubelyr/pull/3</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">relocate()</span></code> can rename columns it relocates (#5569).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> and <code class="docutils literal notranslate"><span class="pre">group_by()</span></code> have better error messages when the mutate step fails (#5060).</p></li>
<li><p>Clarify that <code class="docutils literal notranslate"><span class="pre">between()</span></code> is not vectorised (#5493).</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">across()</span></code> issue where data frame columns would could not be referred to
with <code class="docutils literal notranslate"><span class="pre">all_of()</span></code> in the nested case (<code class="docutils literal notranslate"><span class="pre">mutate()</span></code> within <code class="docutils literal notranslate"><span class="pre">mutate()</span></code>) (#5498).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">across()</span></code> handles data frames with 0 columns (#5523).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> always keeps grouping variables, unconditional to <code class="docutils literal notranslate"><span class="pre">.keep=</span></code> (#5582).</p></li>
<li><p>dplyr now depends on R 3.3.0</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-2">
<h1>dplyr 1.0.2<a class="headerlink" href="#dplyr-1-0-2" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">across()</span></code> issue where data frame columns would mask objects referred to
from <code class="docutils literal notranslate"><span class="pre">all_of()</span></code> (#5460).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">.name_repair</span></code> argument, passed to <code class="docutils literal notranslate"><span class="pre">vctrs::vec_cbind()</span></code> (#5451)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise(.groups</span> <span class="pre">=</span> <span class="pre">&quot;rowwise&quot;)</span></code> makes a rowwise data frame even if the input data
is not grouped (#5422).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-1">
<h1>dplyr 1.0.1<a class="headerlink" href="#dplyr-1-0-1" title="Permalink to this headline">¶</a></h1>
<ul>
<li><p>New function <code class="docutils literal notranslate"><span class="pre">cur_data_all()</span></code> similar to <code class="docutils literal notranslate"><span class="pre">cur_data()</span></code> but includes the grouping variables (#5342).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count()</span></code> and <code class="docutils literal notranslate"><span class="pre">tally()</span></code> no longer automatically weights by column <code class="docutils literal notranslate"><span class="pre">n</span></code> if
present (#5298). dplyr 1.0.0 introduced this behaviour because of Hadley’s
faulty memory. Historically <code class="docutils literal notranslate"><span class="pre">tally()</span></code> automatically weighted and <code class="docutils literal notranslate"><span class="pre">count()</span></code>
did not, but this behaviour was accidentally changed in 0.8.2 (#4408) so that
neither automatically weighted by <code class="docutils literal notranslate"><span class="pre">n</span></code>. Since 0.8.2 is almost a year old,
and the automatically weighting behaviour was a little confusing anyway,
we’ve removed it from both <code class="docutils literal notranslate"><span class="pre">count()</span></code> and <code class="docutils literal notranslate"><span class="pre">tally()</span></code>.</p>
<p>Use of <code class="docutils literal notranslate"><span class="pre">wt</span> <span class="pre">=</span> <span class="pre">n()</span></code> is now deprecated; now just omit the <code class="docutils literal notranslate"><span class="pre">wt</span></code> argument.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce()</span></code> now supports data frames correctly (#5326).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cummean()</span></code> no longer has off-by-one indexing problem (&#64;cropgen, #5287).</p></li>
<li><p>The call stack is preserved on error. This makes it possible to <code class="docutils literal notranslate"><span class="pre">recover()</span></code>
into problematic code called from dplyr verbs (#5308).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-1-0-0">
<h1>dplyr 1.0.0<a class="headerlink" href="#dplyr-1-0-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="breaking-changes">
<h2>Breaking changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> no longer converts to a tibble, returns a data frame if the input is a data frame.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code>, <code class="docutils literal notranslate"><span class="pre">*_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> use vctrs coercion
rules. There are two main user facing changes:</p>
<ul class="simple">
<li><p>Combining factor and character vectors silently creates a character
vector; previously it created a character vector with a warning.</p></li>
<li><p>Combining multiple factors creates a factor with combined levels;
previously it created a character vector with a warning.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and other functions use vctrs name repair, see <code class="docutils literal notranslate"><span class="pre">?vctrs::vec_as_names</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all.equal.tbl_df()</span></code> removed.</p>
<ul class="simple">
<li><p>Data frames, tibbles and grouped data frames are no longer considered equal, even if the data is the same.</p></li>
<li><p>Equality checks for data frames no longer ignore row order or groupings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expect_equal()</span></code> uses <code class="docutils literal notranslate"><span class="pre">all.equal()</span></code> internally. When comparing data frames, tests that used to pass may now fail.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> keeps the original column order.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> on missing columns now raises an error, it has been a compatibility warning for a long time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_modify()</span></code> puts the grouping variable to the front.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n()</span></code> and <code class="docutils literal notranslate"><span class="pre">row_number()</span></code> can no longer be called directly when dplyr is not loaded,
and this now generates an error: <code class="docutils literal notranslate"><span class="pre">dplyr::mutate(mtcars,</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">n())</span></code>.</p>
<p>Fix by prefixing with <code class="docutils literal notranslate"><span class="pre">dplyr::</span></code> as in <code class="docutils literal notranslate"><span class="pre">dplyr::mutate(mtcars,</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">dplyr::n())</span></code></p>
</li>
<li><p>The old data format for <code class="docutils literal notranslate"><span class="pre">grouped_df</span></code> is no longer supported. This may affect you if you have serialized grouped data frames to disk, e.g. with <code class="docutils literal notranslate"><span class="pre">saveRDS()</span></code> or when using knitr caching.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lead()</span></code> and <code class="docutils literal notranslate"><span class="pre">lag()</span></code> are stricter about their inputs.</p></li>
<li><p>Extending data frames requires that the extra class or classes are added first, not last.
Having the extra class at the end causes some vctrs operations to fail with a message like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Input must be a vector, not a `&lt;data.frame/...&gt;` object
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">right_join()</span></code> no longer sorts the rows of the resulting tibble according to the order of the RHS <code class="docutils literal notranslate"><span class="pre">by</span></code> argument in tibble <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">cur_</span></code> functions (<code class="docutils literal notranslate"><span class="pre">cur_data()</span></code>, <code class="docutils literal notranslate"><span class="pre">cur_group()</span></code>, <code class="docutils literal notranslate"><span class="pre">cur_group_id()</span></code>,
<code class="docutils literal notranslate"><span class="pre">cur_group_rows()</span></code>) provide a full set of options to you access information
about the “current” group in dplyr verbs. They are inspired by
data.table’s <code class="docutils literal notranslate"><span class="pre">.SD</span></code>, <code class="docutils literal notranslate"><span class="pre">.GRP</span></code>, <code class="docutils literal notranslate"><span class="pre">.BY</span></code>, and <code class="docutils literal notranslate"><span class="pre">.I</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">rows_</span></code> functions (<code class="docutils literal notranslate"><span class="pre">rows_insert()</span></code>, <code class="docutils literal notranslate"><span class="pre">rows_update()</span></code>, <code class="docutils literal notranslate"><span class="pre">rows_upsert()</span></code>, <code class="docutils literal notranslate"><span class="pre">rows_patch()</span></code>, <code class="docutils literal notranslate"><span class="pre">rows_delete()</span></code>) provide a new API to insert and delete rows from a second data frame or table. Support for updating mutable backends is planned (#4654).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> create multiple columns from a single expression
if you return a data frame (#2326).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> and <code class="docutils literal notranslate"><span class="pre">rename()</span></code> use the latest version of the tidyselect interface.
Practically, this means that you can now combine selections using Boolean
logic (i.e. <code class="docutils literal notranslate"><span class="pre">!</span></code>, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> and <code class="docutils literal notranslate"><span class="pre">|</span></code>), and use predicate functions with <code class="docutils literal notranslate"><span class="pre">where()</span></code>
(e.g. <code class="docutils literal notranslate"><span class="pre">where(is.character)</span></code>) to select variables by type (#4680). It also makes
it possible to use <code class="docutils literal notranslate"><span class="pre">select()</span></code> and <code class="docutils literal notranslate"><span class="pre">rename()</span></code> to repair data frames with
duplicated names (#4615) and prevents you from accidentally introducing
duplicate names (#4643). This also means that dplyr now re-exports <code class="docutils literal notranslate"><span class="pre">any_of()</span></code>
and <code class="docutils literal notranslate"><span class="pre">all_of()</span></code> (#5036).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> gains a new set of helpers:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">slice_head()</span></code> and <code class="docutils literal notranslate"><span class="pre">slice_tail()</span></code> select the first and last rows, like
<code class="docutils literal notranslate"><span class="pre">head()</span></code> and <code class="docutils literal notranslate"><span class="pre">tail()</span></code>, but return <code class="docutils literal notranslate"><span class="pre">n</span></code> rows <em>per group</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice_sample()</span></code> randomly selects rows, taking over from <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code>
and <code class="docutils literal notranslate"><span class="pre">sample_n()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice_min()</span></code> and <code class="docutils literal notranslate"><span class="pre">slice_max()</span></code> select the rows with the minimum or
maximum values of a variable, taking over from the confusing <code class="docutils literal notranslate"><span class="pre">top_n()</span></code>.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> can create summaries of greater than length 1 if you use a
summary function that returns multiple values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">.groups=</span></code> argument to control the grouping structure.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">relocate()</span></code> verb makes it easy to move columns around within a data
frame (#4598).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">rename_with()</span></code> is designed specifically for the purpose of renaming
selected columns with a function (#4771).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ungroup()</span></code> can now selectively remove grouping variables (#3760).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pull()</span></code> can now return named vectors by specifying an additional column name
(&#64;ilarischeinin, #4102).</p></li>
</ul>
</div>
<div class="section" id="experimental-features">
<h2>Experimental features<a class="headerlink" href="#experimental-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> (for data frames only), gains experimental new arguments
<code class="docutils literal notranslate"><span class="pre">.before</span></code> and <code class="docutils literal notranslate"><span class="pre">.after</span></code> that allow you to control where the new columns are
placed (#2047).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> (for data frames only), gains an experimental new argument
called <code class="docutils literal notranslate"><span class="pre">.keep</span></code> that allows you to control which variables are kept from
the input <code class="docutils literal notranslate"><span class="pre">.data</span></code>. <code class="docutils literal notranslate"><span class="pre">.keep</span> <span class="pre">=</span> <span class="pre">&quot;all&quot;</span></code> is the default; it keeps all variables.
<code class="docutils literal notranslate"><span class="pre">.keep</span> <span class="pre">=</span> <span class="pre">&quot;none&quot;</span></code> retains no input variables (except for grouping keys),
so behaves like <code class="docutils literal notranslate"><span class="pre">transmute()</span></code>. <code class="docutils literal notranslate"><span class="pre">.keep</span> <span class="pre">=</span> <span class="pre">&quot;unused&quot;</span></code> keeps only variables
not used to make new columns. <code class="docutils literal notranslate"><span class="pre">.keep</span> <span class="pre">=</span> <span class="pre">&quot;used&quot;</span></code> keeps only the input variables
used to create new columns; it’s useful for double checking your work (#3721).</p></li>
<li><p>New, experimental, <code class="docutils literal notranslate"><span class="pre">with_groups()</span></code> makes it easy to temporarily group or
ungroup (#4711).</p></li>
</ul>
</div>
<div class="section" id="across">
<h2>across()<a class="headerlink" href="#across" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>New function <code class="docutils literal notranslate"><span class="pre">across()</span></code> that can be used inside <code class="docutils literal notranslate"><span class="pre">summarise()</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate()</span></code>,
and other verbs to apply a function (or a set of functions) to a selection of
columns. See <code class="docutils literal notranslate"><span class="pre">vignette(&quot;colwise&quot;)</span></code> for more details.</p></li>
<li><p>New function <code class="docutils literal notranslate"><span class="pre">c_across()</span></code> that can be used inside <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate()</span></code>
in row-wise data frames to easily (e.g.) compute a row-wise mean of all
numeric variables. See <code class="docutils literal notranslate"><span class="pre">vignette(&quot;rowwise&quot;)</span></code> for more details.</p></li>
</ul>
</div>
<div class="section" id="rowwise">
<h2>rowwise()<a class="headerlink" href="#rowwise" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rowwise()</span></code> is no longer questioning; we now understand that it’s an
important tool when you don’t have vectorised code. It now also allows you to
specify additional variables that should be preserved in the output when
summarising (#4723). The rowwise-ness is preserved by all operations;
you need to explicit drop it with <code class="docutils literal notranslate"><span class="pre">as_tibble()</span></code> or <code class="docutils literal notranslate"><span class="pre">group_by()</span></code>.</p></li>
<li><p>New, experimental, <code class="docutils literal notranslate"><span class="pre">nest_by()</span></code>. It has the same interface as <code class="docutils literal notranslate"><span class="pre">group_by()</span></code>,
but returns a rowwise data frame of grouping keys, supplemental with a
list-column of data frames containing the rest of the data.</p></li>
</ul>
</div>
<div class="section" id="vctrs">
<h2>vctrs<a class="headerlink" href="#vctrs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The implementation of all dplyr verbs have been changed to use primitives
provided by the vctrs package. This makes it easier to add support for
new types of vector, radically simplifies the implementation, and makes
all dplyr verbs more consistent.</p></li>
<li><p>The place where you are mostly likely to be impacted by the coercion
changes is when working with factors in joins or grouped mutates:
now when combining factors with different levels, dplyr creates a new
factor with the union of the levels. This matches base R more closely,
and while perhaps strictly less correct, is much more convenient.</p></li>
<li><p>dplyr dropped its two heaviest dependencies: Rcpp and BH. This should make
it considerably easier and faster to build from source.</p></li>
<li><p>The implementation of all verbs has been carefully thought through. This
mostly makes implementation simpler but should hopefully increase consistency,
and also makes it easier to adapt to dplyr to new data structures in the
new future. Pragmatically, the biggest difference for most people will be
that each verb documents its return value in terms of rows, columns, groups,
and data frame attributes.</p></li>
<li><p>Row names are now preserved when working with data frames.</p></li>
</ul>
</div>
<div class="section" id="grouping">
<h2>Grouping<a class="headerlink" href="#grouping" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> uses hashing from the <code class="docutils literal notranslate"><span class="pre">vctrs</span></code> package.</p></li>
<li><p>Grouped data frames now have <code class="docutils literal notranslate"><span class="pre">names&lt;-</span></code>, <code class="docutils literal notranslate"><span class="pre">[[&lt;-</span></code>, <code class="docutils literal notranslate"><span class="pre">[&lt;-</span></code> and <code class="docutils literal notranslate"><span class="pre">$&lt;-</span></code> methods that
re-generate the underlying grouping. Note that modifying grouping variables
in multiple steps (i.e. <code class="docutils literal notranslate"><span class="pre">df$grp1</span> <span class="pre">&lt;-</span> <span class="pre">1;</span> <span class="pre">df$grp2</span> <span class="pre">&lt;-</span> <span class="pre">1</span></code>) will be inefficient
since the data frame will be regrouped after each modification.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[.grouped_df</span></code> now regroups to respect any grouping columns that have
been removed (#4708).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> can now modify grouping variables (#4709).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_modify()</span></code> works with additional arguments (&#64;billdenney and &#64;cderv, #4509)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> does not create an arbitrary NA group when grouping by factors
with <code class="docutils literal notranslate"><span class="pre">drop</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> (#4460).</p></li>
</ul>
</div>
<div class="section" id="lifecycle-changes">
<h2>Lifecycle changes<a class="headerlink" href="#lifecycle-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>All deprecations now use the <a class="reference external" href="https://lifecycle.r-lib.org">lifecycle</a>,
that means by default you’ll only see a deprecation warning once per session,
and you can control with <code class="docutils literal notranslate"><span class="pre">options(lifecycle_verbosity</span> <span class="pre">=</span> <span class="pre">x)</span></code> where
<code class="docutils literal notranslate"><span class="pre">x</span></code> is one of NULL, “quiet”, “warning”, and “error”.</p></li>
</ul>
<div class="section" id="removed">
<h3>Removed<a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id()</span></code>, deprecated in dplyr 0.5.0, is now defunct.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">failwith()</span></code>, deprecated in dplyr 0.7.0, is now defunct.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbl_cube()</span></code> and <code class="docutils literal notranslate"><span class="pre">nasa</span></code> have been pulled out into a separate cubelyr package
(#4429).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_all()</span></code> and <code class="docutils literal notranslate"><span class="pre">rbind_list()</span></code> have been removed (&#64;bjungbogati, #4430).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dr_dplyr()</span></code> has been removed as it is no longer needed (#4433, &#64;smwindecker).</p></li>
</ul>
</div>
<div class="section" id="deprecated">
<h3>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Use of pkgconfig for setting <code class="docutils literal notranslate"><span class="pre">na_matches</span></code> argument to join functions is now
deprecated (#4914). This was rarely used, and I’m now confident that the
default is correct for R.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">add_count()</span></code>, the <code class="docutils literal notranslate"><span class="pre">drop</span></code> argument has been deprecated because it didn’t
actually affect the output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_rownames()</span></code>: please use <code class="docutils literal notranslate"><span class="pre">tibble::rownames_to_column()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as.tbl()</span></code> and <code class="docutils literal notranslate"><span class="pre">tbl_df()</span></code>: please use <code class="docutils literal notranslate"><span class="pre">as_tibble()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bench_tbls()</span></code>, <code class="docutils literal notranslate"><span class="pre">compare_tbls()</span></code>, <code class="docutils literal notranslate"><span class="pre">compare_tbls2()</span></code>, <code class="docutils literal notranslate"><span class="pre">eval_tbls()</span></code> and
<code class="docutils literal notranslate"><span class="pre">eval_tbls2()</span></code> are now deprecated. That were only used in a handful of
packages, and we now believe that you’re better off performing comparisons
more directly (#4675).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine()</span></code>: please use <code class="docutils literal notranslate"><span class="pre">vctrs::vec_c()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">funs()</span></code>: please use <code class="docutils literal notranslate"><span class="pre">list()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by(add</span> <span class="pre">=</span> <span class="pre">)</span></code>: please use <code class="docutils literal notranslate"><span class="pre">.add</span></code>
instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by(.dots</span> <span class="pre">=</span> <span class="pre">)</span></code>/<code class="docutils literal notranslate"><span class="pre">group_by_prepare(.dots</span> <span class="pre">=</span> <span class="pre">)</span></code>: please use <code class="docutils literal notranslate"><span class="pre">!!!</span></code>
instead (#4734).</p></li>
<li><p>The use of zero-arg <code class="docutils literal notranslate"><span class="pre">group_indices()</span></code> to retrieve the group id for the
“current” group is deprecated; instead use <code class="docutils literal notranslate"><span class="pre">cur_group_id()</span></code>.</p></li>
<li><p>Passing arguments to <code class="docutils literal notranslate"><span class="pre">group_keys()</span></code> or <code class="docutils literal notranslate"><span class="pre">group_indices()</span></code> to change the
grouping has been deprecated, instead do grouping first yourself.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">location()</span></code> and <code class="docutils literal notranslate"><span class="pre">changes()</span></code>: please use <code class="docutils literal notranslate"><span class="pre">lobstr::ref()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">progress_estimated()</span></code> is soft deprecated; it’s not the responsibility of
dplyr to provide progress bars (#4935).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_local()</span></code> has been deprecated; it was part of an approach to testing
dplyr backends that didn’t pan out.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_mysql()</span></code>, <code class="docutils literal notranslate"><span class="pre">src_postgres()</span></code>, and <code class="docutils literal notranslate"><span class="pre">src_sqlite()</span></code> has been deprecated.
We’ve recommended against them for some time. Instead please use the approach
described at <a class="reference external" href="https://dbplyr.tidyverse.org/">https://dbplyr.tidyverse.org/</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select_vars()</span></code>, <code class="docutils literal notranslate"><span class="pre">rename_vars()</span></code>, <code class="docutils literal notranslate"><span class="pre">select_var()</span></code>, <code class="docutils literal notranslate"><span class="pre">current_vars()</span></code> are now
deprecated (&#64;perezp44, #4432)</p></li>
</ul>
</div>
<div class="section" id="superseded">
<h3>Superseded<a class="headerlink" href="#superseded" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The scoped helpers (all functions ending in <code class="docutils literal notranslate"><span class="pre">_if</span></code>, <code class="docutils literal notranslate"><span class="pre">_at</span></code>, or <code class="docutils literal notranslate"><span class="pre">_all</span></code>) have
been superseded by <code class="docutils literal notranslate"><span class="pre">across()</span></code>. This dramatically reduces the API surface for
dplyr, while at the same providing providing a more flexible and less
error-prone interface (#4769).</p>
<p><code class="docutils literal notranslate"><span class="pre">rename_*()</span></code> and <code class="docutils literal notranslate"><span class="pre">select_*()</span></code> have been superseded by <code class="docutils literal notranslate"><span class="pre">rename_with()</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">do()</span></code> is superseded in favour of <code class="docutils literal notranslate"><span class="pre">summarise()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> have been superseded by <code class="docutils literal notranslate"><span class="pre">slice_sample()</span></code>.
See <code class="docutils literal notranslate"><span class="pre">?sample_n</span></code> for details about why, and for examples converting from
old to new usage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_n()</span></code> has been superseded by<code class="docutils literal notranslate"><span class="pre">slice_min()</span></code>/<code class="docutils literal notranslate"><span class="pre">slice_max()</span></code>. See <code class="docutils literal notranslate"><span class="pre">?top_n</span></code>
for details about why, and how to convert old to new usage (#4494).</p></li>
</ul>
</div>
<div class="section" id="questioning">
<h3>Questioning<a class="headerlink" href="#questioning" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">all_equal()</span></code> is questioning; it solves a problem that no longer seems
important.</p></li>
</ul>
</div>
<div class="section" id="stable">
<h3>Stable<a class="headerlink" href="#stable" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rowwise()</span></code> is no longer questioning.</p></li>
</ul>
</div>
</div>
<div class="section" id="documentation-improvements">
<h2>Documentation improvements<a class="headerlink" href="#documentation-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">vignette(&quot;base&quot;)</span></code> which describes how dplyr verbs relate to the
base R equivalents (&#64;sastoudt, #4755)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">vignette(&quot;grouping&quot;)</span></code> gives more details about how dplyr verbs change
when applied to grouped data frames (#4779, &#64;MikeKSmith).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vignette(&quot;programming&quot;)</span></code> has been completely rewritten to reflect our
latest vocabulary, the most recent rlang features, and our current
recommendations. It should now be substantially easier to program with
dplyr.</p></li>
</ul>
</div>
<div class="section" id="minor-improvements-and-bug-fixes">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#minor-improvements-and-bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>dplyr now has a rudimentary, experimental, and stop-gap, extension mechanism
documented in <code class="docutils literal notranslate"><span class="pre">?dplyr_extending</span></code></p></li>
<li><p>dplyr no longer provides a <code class="docutils literal notranslate"><span class="pre">all.equal.tbl_df()</span></code> method. It never should have
done so in the first place because it owns neither the generic nor the class.
It also provided a problematic implementation because, by default, it
ignored the order of the rows and the columns which is usually important.
This is likely to cause new test failures in downstream packages; but on
the whole we believe those failures to either reflect unexpected behaviour
or tests that need to be strengthened (#2751).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce()</span></code> now uses vctrs recycling and common type coercion rules (#5186).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count()</span></code> and <code class="docutils literal notranslate"><span class="pre">add_count()</span></code> do a better job of preserving input class
and attributes (#4086).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> errors if you request it use variables that don’t exist
(this was previously a warning) (#4656).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> and  <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> get better error messages.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> handles data frame results when all columns are logical vectors
by reducing them with <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> (#4678). In particular this means <code class="docutils literal notranslate"><span class="pre">across()</span></code> can
be used in <code class="docutils literal notranslate"><span class="pre">filter()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">right_join()</span></code>, and <code class="docutils literal notranslate"><span class="pre">full_join()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">keep</span></code> argument so
that you can optionally choose to keep both sets of join keys (#4589). This is
useful when you want to figure out which rows were missing from either side.</p></li>
<li><p>Join functions can now perform a cross-join by specifying <code class="docutils literal notranslate"><span class="pre">by</span> <span class="pre">=</span> <span class="pre">character()</span></code>
(#4206.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groups()</span></code> now returns <code class="docutils literal notranslate"><span class="pre">list()</span></code> for ungrouped data; previously it returned
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> which was type-unstable (when there are groups it returns a list
of symbols).</p></li>
<li><p>The first argument of <code class="docutils literal notranslate"><span class="pre">group_map()</span></code>, <code class="docutils literal notranslate"><span class="pre">group_modify()</span></code> and <code class="docutils literal notranslate"><span class="pre">group_walk()</span></code>
has been changed to <code class="docutils literal notranslate"><span class="pre">.data</span></code> for consistency with other generics.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_keys.rowwise_df()</span></code> gives a 0 column data frame with <code class="docutils literal notranslate"><span class="pre">n()</span></code> rows.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_map()</span></code> is now a generic (#4576).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by(...,</span> <span class="pre">.add</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> replaces <code class="docutils literal notranslate"><span class="pre">group_by(...,</span> <span class="pre">add</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code>,
with a deprecation message. The old argument name was a mistake because
it prevents you from creating a new grouping var called <code class="docutils literal notranslate"><span class="pre">add</span></code> and
it violates our naming conventions (#4137).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">intersect()</span></code>, <code class="docutils literal notranslate"><span class="pre">union()</span></code>, <code class="docutils literal notranslate"><span class="pre">setdiff()</span></code> and <code class="docutils literal notranslate"><span class="pre">setequal()</span></code> generics are now
imported from the generics package. This reduces a conflict with lubridate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">order_by()</span></code> gives an informative hint if you accidentally call it instead
of <code class="docutils literal notranslate"><span class="pre">arrange()</span></code> #3357.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tally()</span></code> and <code class="docutils literal notranslate"><span class="pre">count()</span></code> now message if the default output <code class="docutils literal notranslate"><span class="pre">name</span></code> (n), already
exists in the data frame. To quiet the message, you’ll need to supply an
explicit <code class="docutils literal notranslate"><span class="pre">name</span></code> (#4284). You can override the default weighting to using a
constant by setting <code class="docutils literal notranslate"><span class="pre">wt</span> <span class="pre">=</span> <span class="pre">1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">starwars</span></code> dataset now does a better job of separating biological sex from
gender identity. The previous <code class="docutils literal notranslate"><span class="pre">gender</span></code> column has been renamed to <code class="docutils literal notranslate"><span class="pre">sex</span></code>,
since it actually describes the individual’s biological sex. A new <code class="docutils literal notranslate"><span class="pre">gender</span></code>
column encodes the actual gender identity using other information about
the Star Wars universe (&#64;MeganBeckett, #4456).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_tbls()</span></code> accepts <code class="docutils literal notranslate"><span class="pre">...</span></code> arguments (#4485, &#64;ianmcook). This could be a
breaking change for some dplyr backend packages that implement <code class="docutils literal notranslate"><span class="pre">src_tbls()</span></code>.</p></li>
<li><p>Better performance for extracting slices of factors and ordered factors (#4501).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rename_at()</span></code> and <code class="docutils literal notranslate"><span class="pre">rename_all()</span></code> call the function with a simple character
vector, not a <code class="docutils literal notranslate"><span class="pre">dplyr_sel_vars</span></code> (#4459).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ntile()</span></code> is now more consistent with database implementations if the buckets have irregular size (#4495).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-8-5-2020-03-07">
<h1>dplyr 0.8.5 (2020-03-07)<a class="headerlink" href="#dplyr-0-8-5-2020-03-07" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Maintenance release for compatibility with R-devel.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-8-4-2020-01-30">
<h1>dplyr 0.8.4 (2020-01-30)<a class="headerlink" href="#dplyr-0-8-4-2020-01-30" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Adapt tests to changes in dependent packages.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-8-3-2019-07-04">
<h1>dplyr 0.8.3 (2019-07-04)<a class="headerlink" href="#dplyr-0-8-3-2019-07-04" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed performance regression introduced in version 0.8.2 (#4458).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-8-2-2019-06-28">
<h1>dplyr 0.8.2 (2019-06-28)<a class="headerlink" href="#dplyr-0-8-2-2019-06-28" title="Permalink to this headline">¶</a></h1>
<div class="section" id="new-functions">
<h2>New functions<a class="headerlink" href="#new-functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">top_frac(data,</span> <span class="pre">proportion)</span></code> is a shorthand for <code class="docutils literal notranslate"><span class="pre">top_n(data,</span> <span class="pre">proportion</span> <span class="pre">*</span> <span class="pre">n())</span></code> (#4017).</p></li>
</ul>
</div>
<div class="section" id="colwise-changes">
<h2>colwise changes<a class="headerlink" href="#colwise-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Using quosures in colwise verbs is deprecated (#4330).</p></li>
<li><p>Updated <code class="docutils literal notranslate"><span class="pre">distinct_if()</span></code>, <code class="docutils literal notranslate"><span class="pre">distinct_at()</span></code> and <code class="docutils literal notranslate"><span class="pre">distinct_all()</span></code> to include <code class="docutils literal notranslate"><span class="pre">.keep_all</span></code> argument (&#64;beansrowning, #4343).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rename_at()</span></code> handles empty selection (#4324).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_if()</span></code> functions correctly handle columns with special names (#4380).</p></li>
<li><p>colwise functions support constants in formulas (#4374).</p></li>
</ul>
</div>
<div class="section" id="hybrid-evaluation-changes">
<h2>Hybrid evaluation changes<a class="headerlink" href="#hybrid-evaluation-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>hybrid rank functions correctly handle NA (#4427).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">first()</span></code>, <code class="docutils literal notranslate"><span class="pre">last()</span></code> and <code class="docutils literal notranslate"><span class="pre">nth()</span></code> hybrid version handles factors (#4295).</p></li>
</ul>
</div>
<div class="section" id="minor-changes">
<h2>Minor changes<a class="headerlink" href="#minor-changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">top_n()</span></code> quotes its <code class="docutils literal notranslate"><span class="pre">n</span></code> argument, <code class="docutils literal notranslate"><span class="pre">n</span></code> no longer needs to be constant for all groups (#4017).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbl_vars()</span></code> keeps information on grouping columns by returning a <code class="docutils literal notranslate"><span class="pre">dplyr_sel_vars</span></code> object (#4106).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_split()</span></code> always sets the <code class="docutils literal notranslate"><span class="pre">ptype</span></code> attribute, which make it more robust in the case where there
are 0 groups.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_map()</span></code> and <code class="docutils literal notranslate"><span class="pre">group_modify()</span></code> work in the 0 group edge case (#4421)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select.list()</span></code> method added so that <code class="docutils literal notranslate"><span class="pre">select()</span></code> does not dispatch on lists (#4279).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">view()</span></code> is reexported from tibble (#4423).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> puts NA groups last in character vectors (#4227).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> handles integer64 objects (#4366).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> correctly resolves summarised list columns (#4349).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-8-1-2019-05-14">
<h1>dplyr 0.8.1 (2019-05-14)<a class="headerlink" href="#dplyr-0-8-1-2019-05-14" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>Breaking changes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">group_modify()</span></code> is the new name of the function previously known as <code class="docutils literal notranslate"><span class="pre">group_map()</span></code></p></li>
</ul>
</div>
<div class="section" id="id2">
<h2>New functions<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">group_map()</span></code> now only calls the function on each group and return a list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by_drop_default()</span></code>, previously known as <code class="docutils literal notranslate"><span class="pre">dplyr:::group_drops()</span></code> is exported (#4245).</p></li>
</ul>
</div>
<div class="section" id="id3">
<h2>Minor changes<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Lists of formulas passed to colwise verbs are now automatically named.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> does a shallow copy even in the no groups case (#4221).</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> on rowwise data frames with 0 rows (#4224).</p></li>
<li><p>Fixed handling of bare formulas in colwise verbs (#4183).</p></li>
<li><p>Fixed performance of <code class="docutils literal notranslate"><span class="pre">n_distinct()</span></code> (#4202).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_indices()</span></code> now ignores empty groups by default for <code class="docutils literal notranslate"><span class="pre">data.frame</span></code>, which is
consistent with the default of <code class="docutils literal notranslate"><span class="pre">group_by()</span></code> (&#64;yutannihilation, #4208).</p></li>
<li><p>Fixed integer overflow in hybrid <code class="docutils literal notranslate"><span class="pre">ntile()</span></code> (#4186).</p></li>
<li><p>colwise functions <code class="docutils literal notranslate"><span class="pre">summarise_at()</span></code> … can rename vars in the case of multiple functions (#4180).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select_if()</span></code> and <code class="docutils literal notranslate"><span class="pre">rename_if()</span></code> handle logical vector predicate (#4213).</p></li>
<li><p>hybrid <code class="docutils literal notranslate"><span class="pre">min()</span></code> and <code class="docutils literal notranslate"><span class="pre">max()</span></code> cast to integer when possible (#4258).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> correctly handles the cases where there are multiple consecutive <code class="docutils literal notranslate"><span class="pre">NULL</span></code> (#4296).</p></li>
<li><p>Support for R 3.1.* has been dropped. The minimal R version supported is now 3.2.0.
<a class="reference external" href="https://www.tidyverse.org/articles/2019/04/r-version-support/">https://www.tidyverse.org/articles/2019/04/r-version-support/</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rename_at()</span></code> handles empty selection (#4324).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-8-0-1-2019-02-15">
<h1>dplyr 0.8.0.1 (2019-02-15)<a class="headerlink" href="#dplyr-0-8-0-1-2019-02-15" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed integer C/C++ division, forced released by CRAN (#4185).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-8-0-2019-02-14">
<h1>dplyr 0.8.0 (2019-02-14)<a class="headerlink" href="#dplyr-0-8-0-2019-02-14" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id4">
<h2>Breaking changes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The error <code class="docutils literal notranslate"><span class="pre">could</span> <span class="pre">not</span> <span class="pre">find</span> <span class="pre">function</span> <span class="pre">&quot;n&quot;</span></code> or the warning
<code class="docutils literal notranslate"><span class="pre">Calling</span> <span class="pre">`n()`</span> <span class="pre">without</span> <span class="pre">importing</span> <span class="pre">or</span> <span class="pre">prefixing</span> <span class="pre">it</span> <span class="pre">is</span> <span class="pre">deprecated,</span> <span class="pre">use</span> <span class="pre">`dplyr::n()`</span> </code></p>
<p>indicates when functions like <code class="docutils literal notranslate"><span class="pre">n()</span></code>, <code class="docutils literal notranslate"><span class="pre">row_number()</span></code>, … are not imported or prefixed.</p>
<p>The easiest fix is to import dplyr with <code class="docutils literal notranslate"><span class="pre">import(dplyr)</span></code> in your <code class="docutils literal notranslate"><span class="pre">NAMESPACE</span></code> or
<code class="docutils literal notranslate"><span class="pre">#'</span> <span class="pre">&#64;import</span> <span class="pre">dplyr</span></code> in a roxygen comment, alternatively such functions can be
imported selectively as any other function with <code class="docutils literal notranslate"><span class="pre">importFrom(dplyr,</span> <span class="pre">n)</span></code> in the
<code class="docutils literal notranslate"><span class="pre">NAMESPACE</span></code> or <code class="docutils literal notranslate"><span class="pre">#'</span> <span class="pre">&#64;importFrom</span> <span class="pre">dplyr</span> <span class="pre">n</span></code> in a roxygen comment. The third option is
to prefix them, i.e. use <code class="docutils literal notranslate"><span class="pre">dplyr::n()</span></code></p>
</li>
<li><p>If you see <code class="docutils literal notranslate"><span class="pre">checking</span> <span class="pre">S3</span> <span class="pre">generic/method</span> <span class="pre">consistency</span></code> in R CMD check for your
package, note that :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> have gained <code class="docutils literal notranslate"><span class="pre">...</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> and <code class="docutils literal notranslate"><span class="pre">slice()</span></code> have gained <code class="docutils literal notranslate"><span class="pre">.preserve</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> has gained <code class="docutils literal notranslate"><span class="pre">.drop</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Error:</span> <span class="pre">`.data`</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">corrupt</span> <span class="pre">grouped_df,</span> <span class="pre">...</span></code>  signals code that makes
wrong assumptions about the internals of a grouped data frame.</p></li>
</ul>
</div>
<div class="section" id="id5">
<h2>New functions<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>New selection helpers <code class="docutils literal notranslate"><span class="pre">group_cols()</span></code>. It can be called in selection contexts
such as <code class="docutils literal notranslate"><span class="pre">select()</span></code> and matches the grouping variables of grouped tibbles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">last_col()</span></code> is re-exported from tidyselect (#3584).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_trim()</span></code> drops unused levels of factors that are used as grouping variables.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nest_join()</span></code> creates a list column of the matching rows. <code class="docutils literal notranslate"><span class="pre">nest_join()</span></code> + <code class="docutils literal notranslate"><span class="pre">tidyr::unnest()</span></code>
is equivalent to <code class="docutils literal notranslate"><span class="pre">inner_join</span></code>  (#3570).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">band_members</span> <span class="o">%&gt;%</span> 
  <span class="nf">nest_join</span><span class="p">(</span><span class="n">band_instruments</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_nest()</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">tidyr::nest()</span></code> but focusing on the variables to nest by
instead of the nested columns.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">starwars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">homeworld</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_nest</span><span class="p">()</span>
  
<span class="n">starwars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_nest</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">homeworld</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_split()</span></code> is similar to <code class="docutils literal notranslate"><span class="pre">base::split()</span></code> but operating on existing groups when
applied to a grouped data frame, or subject to the data mask on ungrouped data frames</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">starwars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">homeworld</span><span class="p">)</span> <span class="o">%&gt;%</span>   
  <span class="nf">group_split</span><span class="p">()</span>

<span class="n">starwars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_split</span><span class="p">(</span><span class="n">species</span><span class="p">,</span> <span class="n">homeworld</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_map()</span></code> and <code class="docutils literal notranslate"><span class="pre">group_walk()</span></code> are purrr-like functions to iterate on groups
of a grouped data frame, jointly identified by the data subset (exposed as <code class="docutils literal notranslate"><span class="pre">.x</span></code>) and the
data key (a one row tibble, exposed as <code class="docutils literal notranslate"><span class="pre">.y</span></code>). <code class="docutils literal notranslate"><span class="pre">group_map()</span></code> returns a grouped data frame that
combines the results of the function, <code class="docutils literal notranslate"><span class="pre">group_walk()</span></code> is only used for side effects and returns
its input invisibly.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mtcars</span> <span class="o">%&gt;%</span>
  <span class="nf">group_by</span><span class="p">(</span><span class="n">cyl</span><span class="p">)</span> <span class="o">%&gt;%</span>
  <span class="nf">group_map</span><span class="p">(</span><span class="o">~</span> <span class="nf">head</span><span class="p">(</span><span class="n">.x</span><span class="p">,</span> <span class="m">2L</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct_prepare()</span></code>, previously known as <code class="docutils literal notranslate"><span class="pre">distinct_vars()</span></code> is exported. This is mostly useful for
alternative backends (e.g. <code class="docutils literal notranslate"><span class="pre">dbplyr</span></code>).</p></li>
</ul>
</div>
<div class="section" id="major-changes">
<h2>Major changes<a class="headerlink" href="#major-changes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> gains the <code class="docutils literal notranslate"><span class="pre">.drop</span></code> argument. When set to <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> the groups are generated
based on factor levels, hence some groups may be empty (#341).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 3 groups</span>
<span class="nf">tibble</span><span class="p">(</span>
  <span class="n">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> 
  <span class="n">f</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">),</span> <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">))</span>
<span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_by</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">.drop</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
  
<span class="c1"># the order of the grouping variables matter</span>
<span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">tibble</span><span class="p">(</span>
  <span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">),</span> 
  <span class="n">f</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">),</span> <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">))</span>
<span class="p">)</span>
<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">group_by</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">.drop</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">group_by</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">.drop</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</div>
<p>The default behaviour drops the empty groups as in the previous versions.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">tibble</span><span class="p">(</span>
    <span class="n">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> 
    <span class="n">f</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">),</span> <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">))</span>
  <span class="p">)</span> <span class="o">%&gt;%</span> 
    <span class="nf">group_by</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> and <code class="docutils literal notranslate"><span class="pre">slice()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">.preserve</span></code> argument to control which groups it should keep. The default
<code class="docutils literal notranslate"><span class="pre">filter(.preserve</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> recalculates the grouping structure based on the resulting data,
otherwise it is kept as is.</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">tibble</span><span class="p">(</span>
  <span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">),</span> 
  <span class="n">f</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">),</span> <span class="n">levels</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="s">&quot;b&quot;</span><span class="p">,</span> <span class="s">&quot;c&quot;</span><span class="p">))</span>
<span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_by</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">.drop</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>

<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span>
<span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="m">1</span><span class="p">,</span> <span class="n">.preserve</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>The notion of lazily grouped data frames have disappeared. All dplyr verbs now recalculate
immediately the grouping structure, and respect the levels of factors.</p></li>
<li><p>Subsets of columns now properly dispatch to the <code class="docutils literal notranslate"><span class="pre">[</span></code> or <code class="docutils literal notranslate"><span class="pre">[[</span></code> method when the column
is an object (a vector with a class) instead of making assumptions on how the
column should be handled. The <code class="docutils literal notranslate"><span class="pre">[</span></code> method must handle integer indices, including
<code class="docutils literal notranslate"><span class="pre">NA_integer_</span></code>, i.e. <code class="docutils literal notranslate"><span class="pre">x[NA_integer_]</span></code> should produce a vector of the same class
as <code class="docutils literal notranslate"><span class="pre">x</span></code> with whatever represents a missing value.</p></li>
</ul>
</div>
<div class="section" id="id6">
<h2>Minor changes<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">tally()</span></code> works correctly on non-data frame table sources such as <code class="docutils literal notranslate"><span class="pre">tbl_sql</span></code> (#3075).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> can use <code class="docutils literal notranslate"><span class="pre">n()</span></code> (#3527)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> respects the order of the variables provided (#3195, &#64;foo-bar-baz-qux)
and handles the 0 rows and 0 columns special case (#2954).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine()</span></code> uses tidy dots (#3407).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_indices()</span></code> can be used without argument in expressions in verbs (#1185).</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">mutate_all()</span></code>, <code class="docutils literal notranslate"><span class="pre">transmute_all()</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate_if()</span></code> and <code class="docutils literal notranslate"><span class="pre">transmute_if()</span></code>
with grouped tibbles now informs you that the grouping variables are
ignored. In the case of the <code class="docutils literal notranslate"><span class="pre">_all()</span></code> verbs, the message invites you to use
<code class="docutils literal notranslate"><span class="pre">mutate_at(df,</span> <span class="pre">vars(-group_cols()))</span></code> (or the equivalent <code class="docutils literal notranslate"><span class="pre">transmute_at()</span></code> call)
instead if you’d like to make it explicit in your code that the operation is
not applied on the grouping variables.</p></li>
<li><p>Scoped variants of <code class="docutils literal notranslate"><span class="pre">arrange()</span></code> respect the <code class="docutils literal notranslate"><span class="pre">.by_group</span></code> argument (#3504).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">first()</span></code> and <code class="docutils literal notranslate"><span class="pre">last()</span></code> hybrid functions fall back to R evaluation when given no arguments (#3589).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> removes a column when the expression evaluates to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for all groups (#2945).</p></li>
<li><p>grouped data frames support <code class="docutils literal notranslate"><span class="pre">[,</span> <span class="pre">drop</span> <span class="pre">=</span> <span class="pre">TRUE]</span></code> (#3714).</p></li>
<li><p>New low-level constructor <code class="docutils literal notranslate"><span class="pre">new_grouped_df()</span></code> and validator <code class="docutils literal notranslate"><span class="pre">validate_grouped_df</span></code> (#3837).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glimpse()</span></code> prints group information on grouped tibbles (#3384).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> gain <code class="docutils literal notranslate"><span class="pre">...</span></code> (#2888).</p></li>
<li><p>Scoped filter variants now support functions and purrr-like lambdas:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">mtcars</span> <span class="o">%&gt;%</span> <span class="nf">filter_at</span><span class="p">(</span><span class="nf">vars</span><span class="p">(</span><span class="n">hp</span><span class="p">,</span> <span class="n">vs</span><span class="p">),</span> <span class="o">~</span> <span class="n">.</span> <span class="o">%%</span> <span class="m">2</span> <span class="o">==</span> <span class="m">0</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="lifecycle">
<h2>Lifecycle<a class="headerlink" href="#lifecycle" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">do()</span></code>, <code class="docutils literal notranslate"><span class="pre">rowwise()</span></code> and <code class="docutils literal notranslate"><span class="pre">combine()</span></code> are questioning (#3494).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">funs()</span></code> is soft-deprecated and will start issuing warnings in a future version.</p></li>
</ul>
</div>
<div class="section" id="changes-to-column-wise-functions">
<h2>Changes to column wise functions<a class="headerlink" href="#changes-to-column-wise-functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Scoped variants for <code class="docutils literal notranslate"><span class="pre">distinct()</span></code>: <code class="docutils literal notranslate"><span class="pre">distinct_at()</span></code>, <code class="docutils literal notranslate"><span class="pre">distinct_if()</span></code>, <code class="docutils literal notranslate"><span class="pre">distinct_all()</span></code> (#2948).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise_at()</span></code> excludes the grouping variables (#3613).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate_all()</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate_at()</span></code>, <code class="docutils literal notranslate"><span class="pre">summarise_all()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise_at()</span></code> handle utf-8 names (#2967).</p></li>
</ul>
</div>
<div class="section" id="performance">
<h2>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>R expressions that cannot be handled with native code are now evaluated with
unwind-protection when available (on R 3.5 and later). This improves the
performance of dplyr on data frames with many groups (and hence many
expressions to evaluate). We benchmarked that computing a grouped average is
consistently twice as fast with unwind-protection enabled.</p>
<p>Unwind-protection also makes dplyr more robust in corner cases because it
ensures the C++ destructors are correctly called in all circumstances
(debugger exit, captured condition, restart invokation).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> gain <code class="docutils literal notranslate"><span class="pre">...</span></code> (#2888).</p></li>
<li><p>Improved performance for wide tibbles (#3335).</p></li>
<li><p>Faster hybrid <code class="docutils literal notranslate"><span class="pre">sum()</span></code>, <code class="docutils literal notranslate"><span class="pre">mean()</span></code>, <code class="docutils literal notranslate"><span class="pre">var()</span></code> and <code class="docutils literal notranslate"><span class="pre">sd()</span></code> for logical vectors (#3189).</p></li>
<li><p>Hybrid version of <code class="docutils literal notranslate"><span class="pre">sum(na.rm</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> exits early when there are missing values.
This considerably improves performance when there are missing values early in the vector (#3288).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> does not trigger the additional <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> on simple uses of the <code class="docutils literal notranslate"><span class="pre">.data</span></code> pronoun (#3533).</p></li>
</ul>
</div>
<div class="section" id="internal">
<h2>Internal<a class="headerlink" href="#internal" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>The grouping metadata of grouped data frame has been reorganized in a single tidy tibble, that can be accessed
with the new <code class="docutils literal notranslate"><span class="pre">group_data()</span></code> function. The grouping tibble consists of one column per grouping variable,
followed by a list column of the (1-based) indices of the groups. The new <code class="docutils literal notranslate"><span class="pre">group_rows()</span></code> function retrieves
that list of indices (#3489).</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># the grouping metadata, as a tibble</span>
<span class="nf">group_by</span><span class="p">(</span><span class="n">starwars</span><span class="p">,</span> <span class="n">homeworld</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_data</span><span class="p">()</span>

<span class="c1"># the indices</span>
<span class="nf">group_by</span><span class="p">(</span><span class="n">starwars</span><span class="p">,</span> <span class="n">homeworld</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_data</span><span class="p">()</span> <span class="o">%&gt;%</span> 
  <span class="nf">pull</span><span class="p">(</span><span class="n">.rows</span><span class="p">)</span>
  
<span class="nf">group_by</span><span class="p">(</span><span class="n">starwars</span><span class="p">,</span> <span class="n">homeworld</span><span class="p">)</span> <span class="o">%&gt;%</span> 
  <span class="nf">group_rows</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p>Hybrid evaluation has been completely redesigned for better performance and stability.</p></li>
</ul>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Add documentation example for moving variable to back in <code class="docutils literal notranslate"><span class="pre">?select</span></code> (#3051).</p></li>
<li><p>column wise functions are better documented, in particular explaining when
grouping variables are included as part of the selection.</p></li>
</ul>
<div class="section" id="deprecated-and-defunct-functions">
<h3>Deprecated and defunct functions<a class="headerlink" href="#deprecated-and-defunct-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mutate_each()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise_each()</span></code> are deprecated.</p></li>
</ul>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-7-6">
<h1>dplyr 0.7.6<a class="headerlink" href="#dplyr-0-7-6" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">exprs()</span></code> is no longer exported to avoid conflicts with <code class="docutils literal notranslate"><span class="pre">Biobase::exprs()</span></code>
(#3638).</p></li>
<li><p>The MASS package is explicitly suggested to fix CRAN warnings on R-devel
(#3657).</p></li>
<li><p>Set operations like <code class="docutils literal notranslate"><span class="pre">intersect()</span></code> and <code class="docutils literal notranslate"><span class="pre">setdiff()</span></code> reconstruct groups metadata (#3587) and keep the order of the rows (#3839).</p></li>
<li><p>Using namespaced calls to <code class="docutils literal notranslate"><span class="pre">base::sort()</span></code> and <code class="docutils literal notranslate"><span class="pre">base::unique()</span></code> from C++ code
to avoid ambiguities when these functions are overridden (#3644).</p></li>
<li><p>Fix rchk errors (#3693).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-7-5-2018-04-14">
<h1>dplyr 0.7.5 (2018-04-14)<a class="headerlink" href="#dplyr-0-7-5-2018-04-14" title="Permalink to this headline">¶</a></h1>
<div class="section" id="breaking-changes-for-package-developers">
<h2>Breaking changes for package developers<a class="headerlink" href="#breaking-changes-for-package-developers" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The major change in this version is that dplyr now depends on the selecting
backend of the tidyselect package. If you have been linking to
<code class="docutils literal notranslate"><span class="pre">dplyr::select_helpers</span></code> documentation topic, you should update the link to
point to <code class="docutils literal notranslate"><span class="pre">tidyselect::select_helpers</span></code>.</p></li>
<li><p>Another change that causes warnings in packages is that dplyr now exports the
<code class="docutils literal notranslate"><span class="pre">exprs()</span></code> function. This causes a collision with <code class="docutils literal notranslate"><span class="pre">Biobase::exprs()</span></code>. Either
import functions from dplyr selectively rather than in bulk, or do not import
<code class="docutils literal notranslate"><span class="pre">Biobase::exprs()</span></code> and refer to it with a namespace qualifier.</p></li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">distinct(data,</span> <span class="pre">&quot;string&quot;)</span></code> now returns a one-row data frame again. (The
previous behavior was to return the data unchanged.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do()</span></code> operations with more than one named argument can access <code class="docutils literal notranslate"><span class="pre">.</span></code> (#2998).</p></li>
<li><p>Reindexing grouped data frames (e.g. after <code class="docutils literal notranslate"><span class="pre">filter()</span></code> or <code class="docutils literal notranslate"><span class="pre">..._join()</span></code>)
never updates the <code class="docutils literal notranslate"><span class="pre">&quot;class&quot;</span></code> attribute. This also avoids unintended updates
to the original object (#3438).</p></li>
<li><p>Fixed rare column name clash in <code class="docutils literal notranslate"><span class="pre">..._join()</span></code> with non-join
columns of the same name in both tables (#3266).</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">ntile()</span></code> and <code class="docutils literal notranslate"><span class="pre">row_number()</span></code> ordering to use the locale-dependent
ordering functions in R when dealing with character vectors, rather than
always using the C-locale ordering function in C (#2792, &#64;foo-bar-baz-qux).</p></li>
<li><p>Summaries of summaries (such as <code class="docutils literal notranslate"><span class="pre">summarise(b</span> <span class="pre">=</span> <span class="pre">sum(a),</span> <span class="pre">c</span> <span class="pre">=</span> <span class="pre">sum(b))</span></code>) are
now computed using standard evaluation for simplicity and correctness, but
slightly slower (#3233).</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> for empty data frames with zero columns (#3071).</p></li>
</ul>
</div>
<div class="section" id="id7">
<h2>Major changes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">enexpr()</span></code>, <code class="docutils literal notranslate"><span class="pre">expr()</span></code>, <code class="docutils literal notranslate"><span class="pre">exprs()</span></code>, <code class="docutils literal notranslate"><span class="pre">sym()</span></code> and <code class="docutils literal notranslate"><span class="pre">syms()</span></code> are now
exported. <code class="docutils literal notranslate"><span class="pre">sym()</span></code> and <code class="docutils literal notranslate"><span class="pre">syms()</span></code> construct symbols from strings or character
vectors. The <code class="docutils literal notranslate"><span class="pre">expr()</span></code> variants are equivalent to <code class="docutils literal notranslate"><span class="pre">quo()</span></code>, <code class="docutils literal notranslate"><span class="pre">quos()</span></code> and
<code class="docutils literal notranslate"><span class="pre">enquo()</span></code> but return simple expressions rather than quosures. They support
quasiquotation.</p></li>
<li><p>dplyr now depends on the new tidyselect package to power <code class="docutils literal notranslate"><span class="pre">select()</span></code>,
<code class="docutils literal notranslate"><span class="pre">rename()</span></code>, <code class="docutils literal notranslate"><span class="pre">pull()</span></code> and their variants (#2896). Consequently
<code class="docutils literal notranslate"><span class="pre">select_vars()</span></code>, <code class="docutils literal notranslate"><span class="pre">select_var()</span></code> and <code class="docutils literal notranslate"><span class="pre">rename_vars()</span></code> are
soft-deprecated and will start issuing warnings in a future version.</p>
<p>Following the switch to tidyselect, <code class="docutils literal notranslate"><span class="pre">select()</span></code> and <code class="docutils literal notranslate"><span class="pre">rename()</span></code> fully support
character vectors. You can now unquote variables like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>vars &lt;- c(&quot;disp&quot;, &quot;cyl&quot;)
select(mtcars, !! vars)
select(mtcars, -(!! vars))
</pre></div>
</div>
<p>Note that this only works in selecting functions because in other contexts
strings and character vectors are ambiguous. For instance strings are a valid
input in mutating operations and <code class="docutils literal notranslate"><span class="pre">mutate(df,</span> <span class="pre">&quot;foo&quot;)</span></code> creates a new column by
recycling “foo” to the number of rows.</p>
</li>
</ul>
</div>
<div class="section" id="id8">
<h2>Minor changes<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Support for raw vector columns in <code class="docutils literal notranslate"><span class="pre">arrange()</span></code>, <code class="docutils literal notranslate"><span class="pre">group_by()</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate()</span></code>,
<code class="docutils literal notranslate"><span class="pre">summarise()</span></code> and <code class="docutils literal notranslate"><span class="pre">..._join()</span></code> (minimal <code class="docutils literal notranslate"><span class="pre">raw</span></code> x <code class="docutils literal notranslate"><span class="pre">raw</span></code> support initially) (#1803).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> handles unnamed list (#3402).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> works around corrupt columns that have the object bit set
while having no class attribute (#3349).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine()</span></code> returns <code class="docutils literal notranslate"><span class="pre">logical()</span></code> when all inputs are <code class="docutils literal notranslate"><span class="pre">NULL</span></code> (or when there
are no inputs) (#3365, &#64;zeehio).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> now supports renaming columns (#3234).</p></li>
<li><p>Hybrid evaluation simplifies <code class="docutils literal notranslate"><span class="pre">dplyr::foo()</span></code> to <code class="docutils literal notranslate"><span class="pre">foo()</span></code> (#3309). Hybrid
functions can now be masked by regular R functions to turn off hybrid
evaluation (#3255). The hybrid evaluator finds functions from dplyr even if
dplyr is not attached (#3456).</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> it is now illegal to use <code class="docutils literal notranslate"><span class="pre">data.frame</span></code> in the rhs (#3298).</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">!!!</span></code> in <code class="docutils literal notranslate"><span class="pre">recode_factor()</span></code> (#3390).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_number()</span></code> works on empty subsets (#3454).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> and <code class="docutils literal notranslate"><span class="pre">vars()</span></code> now treat <code class="docutils literal notranslate"><span class="pre">NULL</span></code> as empty inputs (#3023).</p></li>
<li><p>Scoped select and rename functions (<code class="docutils literal notranslate"><span class="pre">select_all()</span></code>, <code class="docutils literal notranslate"><span class="pre">rename_if()</span></code> etc.)
now work with grouped data frames, adapting the grouping as necessary
(#2947, #3410). <code class="docutils literal notranslate"><span class="pre">group_by_at()</span></code> can group by an existing grouping variable
(#3351). <code class="docutils literal notranslate"><span class="pre">arrange_at()</span></code> can use grouping variables (#3332).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> no longer enforce tibble classes when input is a simple
<code class="docutils literal notranslate"><span class="pre">data.frame</span></code>, and ignores 0 (#3297, #3313).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transmute()</span></code> no longer prints a message when including a group variable.</p></li>
</ul>
</div>
<div class="section" id="id9">
<h2>Documentation<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Improved documentation for <code class="docutils literal notranslate"><span class="pre">funs()</span></code> (#3094) and set operations (e.g. <code class="docutils literal notranslate"><span class="pre">union()</span></code>) (#3238, &#64;edublancas).</p></li>
</ul>
</div>
<div class="section" id="error-messages">
<h2>Error messages<a class="headerlink" href="#error-messages" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Better error message if dbplyr is not installed when accessing database
backends (#3225).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> fails gracefully on <code class="docutils literal notranslate"><span class="pre">data.frame</span></code> columns (#3153).</p></li>
<li><p>Corrected error message when calling <code class="docutils literal notranslate"><span class="pre">cbind()</span></code> with an object of wrong
length (#3085).</p></li>
<li><p>Add warning with explanation to <code class="docutils literal notranslate"><span class="pre">distinct()</span></code> if any of the selected columns
are of type <code class="docutils literal notranslate"><span class="pre">list</span></code> (#3088, &#64;foo-bar-baz-qux), or when used on unknown columns
(#2867, &#64;foo-bar-baz-qux).</p></li>
<li><p>Show clear error message for bad arguments to <code class="docutils literal notranslate"><span class="pre">funs()</span></code> (#3368).</p></li>
<li><p>Better error message in <code class="docutils literal notranslate"><span class="pre">..._join()</span></code> when joining data frames with duplicate
or <code class="docutils literal notranslate"><span class="pre">NA</span></code> column names. Joining such data frames with a semi- or anti-join
now gives a warning, which may be converted to an error in future versions
(#3243, #3417).</p></li>
<li><p>Dedicated error message when trying to use columns of the <code class="docutils literal notranslate"><span class="pre">Interval</span></code>
or <code class="docutils literal notranslate"><span class="pre">Period</span></code> classes (#2568).</p></li>
<li><p>Added an <code class="docutils literal notranslate"><span class="pre">.onDetach()</span></code> hook that allows for plyr to be loaded and attached
without the warning message that says functions in dplyr will be masked,
since dplyr is no longer attached (#3359, &#64;jwnorman).</p></li>
</ul>
</div>
<div class="section" id="id10">
<h2>Performance<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> on grouped data frame are now faster
especially for those with large number of groups (#3193, &#64;saurfang).</p></li>
</ul>
</div>
<div class="section" id="id11">
<h2>Internal<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Compute variable names for joins in R (#3430).</p></li>
<li><p>Bumped Rcpp dependency to 0.12.15 to avoid imperfect detection of <code class="docutils literal notranslate"><span class="pre">NA</span></code>
values in hybrid evaluation fixed in RcppCore/Rcpp#790 (#2919).</p></li>
<li><p>Avoid cleaning the data mask, a temporary environment used to evaluate
expressions. If the environment, in which e.g. a <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> expression
is evaluated, is preserved until after the operation, accessing variables
from that environment now gives a warning but still returns <code class="docutils literal notranslate"><span class="pre">NULL</span></code> (#3318).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-7-4">
<h1>dplyr 0.7.4<a class="headerlink" href="#dplyr-0-7-4" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fix recent Fedora and ASAN check errors (#3098).</p></li>
<li><p>Avoid dependency on Rcpp 0.12.10 (#3106).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-7-3">
<h1>dplyr 0.7.3<a class="headerlink" href="#dplyr-0-7-3" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed protection error that occurred when creating a character column using grouped <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> (#2971).</p></li>
<li><p>Fixed a rare problem with accessing variable values in <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> when all groups have size one (#3050).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> now throws an error when used on unknown columns
(#2867, &#64;foo-bar-baz-qux).</p></li>
<li><p>Fixed rare out-of-bounds memory write in <code class="docutils literal notranslate"><span class="pre">slice()</span></code> when negative indices beyond the number of rows were involved (#3073).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code>, <code class="docutils literal notranslate"><span class="pre">rename()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> no longer change the grouped vars of the original data (#3038).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nth(default</span> <span class="pre">=</span> <span class="pre">var)</span></code>, <code class="docutils literal notranslate"><span class="pre">first(default</span> <span class="pre">=</span> <span class="pre">var)</span></code> and <code class="docutils literal notranslate"><span class="pre">last(default</span> <span class="pre">=</span> <span class="pre">var)</span></code> fall back to standard evaluation in a grouped operation instead of triggering an error (#3045).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">case_when()</span></code> now works if all LHS are atomic (#2909), or when LHS or RHS values are zero-length vectors (#3048).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">case_when()</span></code> accepts <code class="docutils literal notranslate"><span class="pre">NA</span></code> on the LHS (#2927).</p></li>
<li><p>Semi- and anti-joins now preserve the order of left-hand-side data frame (#3089).</p></li>
<li><p>Improved error message for invalid list arguments to <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> (#3068).</p></li>
<li><p>Grouping by character vectors is now faster (#2204).</p></li>
<li><p>Fixed a crash that occurred when an unexpected input was supplied to
the <code class="docutils literal notranslate"><span class="pre">call</span></code> argument of <code class="docutils literal notranslate"><span class="pre">order_by()</span></code> (#3065).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-7-2">
<h1>dplyr 0.7.2<a class="headerlink" href="#dplyr-0-7-2" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Move build-time vs. run-time checks out of <code class="docutils literal notranslate"><span class="pre">.onLoad()</span></code> and into <code class="docutils literal notranslate"><span class="pre">dr_dplyr()</span></code>.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-7-1">
<h1>dplyr 0.7.1<a class="headerlink" href="#dplyr-0-7-1" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Use new versions of bindrcpp and glue to avoid protection problems.
Avoid wrapping arguments to internal error functions (#2877). Fix
two protection mistakes found by rchk (#2868).</p></li>
<li><p>Fix C++ error that caused compilation to fail on mac cran (#2862)</p></li>
<li><p>Fix undefined behaviour in <code class="docutils literal notranslate"><span class="pre">between()</span></code>, where <code class="docutils literal notranslate"><span class="pre">NA_REAL</span></code> were
assigned instead of <code class="docutils literal notranslate"><span class="pre">NA_LOGICAL</span></code>. (#2855, &#64;zeehio)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_n()</span></code> now executes operations lazily for compatibility with
database backends (#2848).</p></li>
<li><p>Reuse of new variables created in ungrouped <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> possible
again, regression introduced in dplyr 0.7.0 (#2869).</p></li>
<li><p>Quosured symbols do not prevent hybrid handling anymore. This should
fix many performance issues introduced with tidyeval (#2822).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-7-0">
<h1>dplyr 0.7.0<a class="headerlink" href="#dplyr-0-7-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="new-data-functions-and-features">
<h2>New data, functions, and features<a class="headerlink" href="#new-data-functions-and-features" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>Five new datasets provide some interesting built-in datasets to demonstrate
dplyr verbs (#2094):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">starwars</span></code> dataset about starwars characters; has list columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">storms</span></code> has the trajectories of ~200 tropical storms</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">band_members</span></code>, <code class="docutils literal notranslate"><span class="pre">band_instruments</span></code> and <code class="docutils literal notranslate"><span class="pre">band_instruments2</span></code>
has some simple data to demonstrate joins.</p></li>
</ul>
</li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">add_count()</span></code> and <code class="docutils literal notranslate"><span class="pre">add_tally()</span></code> for adding an <code class="docutils literal notranslate"><span class="pre">n</span></code> column within groups
(#2078, &#64;dgrtwo).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> for grouped data frames gains a <code class="docutils literal notranslate"><span class="pre">.by_group</span></code> argument so you
can choose to sort by groups if you want to (defaults to <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>) (#2318)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">pull()</span></code> generic for extracting a single column either by name or position
(either from the left or the right). Thanks to &#64;paulponcet for the idea (#2054).</p>
<p>This verb is powered with the new <code class="docutils literal notranslate"><span class="pre">select_var()</span></code> internal helper,
which is exported as well. It is like <code class="docutils literal notranslate"><span class="pre">select_vars()</span></code> but returns a
single variable.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_tibble()</span></code> is re-exported from tibble. This is the recommend way to create
tibbles from existing data frames. <code class="docutils literal notranslate"><span class="pre">tbl_df()</span></code> has been softly deprecated.
<code class="docutils literal notranslate"><span class="pre">tribble()</span></code> is now imported from tibble (#2336, &#64;chrMongeau); this
is now preferred to <code class="docutils literal notranslate"><span class="pre">frame_data()</span></code>.</p></li>
</ul>
</div>
<div class="section" id="deprecated-and-defunct">
<h2>Deprecated and defunct<a class="headerlink" href="#deprecated-and-defunct" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>dplyr no longer messages that you need dtplyr to work with data.table (#2489).</p></li>
<li><p>Long deprecated <code class="docutils literal notranslate"><span class="pre">regroup()</span></code>, <code class="docutils literal notranslate"><span class="pre">mutate_each_q()</span></code> and
<code class="docutils literal notranslate"><span class="pre">summarise_each_q()</span></code> functions have been removed.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">failwith()</span></code>. I’m not even sure why it was here.</p></li>
<li><p>Soft-deprecated <code class="docutils literal notranslate"><span class="pre">mutate_each()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise_each()</span></code>, these functions
print a message which will be changed to a warning in the next release.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.env</span></code> argument to <code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> is defunct,
passing a value to this argument print a message which will be changed to a
warning in the next release.</p></li>
</ul>
</div>
<div class="section" id="databases">
<h2>Databases<a class="headerlink" href="#databases" title="Permalink to this headline">¶</a></h2>
<p>This version of dplyr includes some major changes to how database connections work. By and large, you should be able to continue using your existing dplyr database code without modification, but there are two big changes that you should be aware of:</p>
<ul class="simple">
<li><p>Almost all database related code has been moved out of dplyr and into a
new package, <a class="reference external" href="https://github.com/tidyverse/dbplyr/">dbplyr</a>. This makes dplyr
simpler, and will make it easier to release fixes for bugs that only affect
databases. <code class="docutils literal notranslate"><span class="pre">src_mysql()</span></code>, <code class="docutils literal notranslate"><span class="pre">src_postgres()</span></code>, and <code class="docutils literal notranslate"><span class="pre">src_sqlite()</span></code> will still
live dplyr so your existing code continues to work.</p></li>
<li><p>It is no longer necessary to create a remote “src”. Instead you can work
directly with the database connection returned by DBI. This reflects the
maturity of the DBI ecosystem. Thanks largely to the work of Kirill Muller
(funded by the R Consortium) DBI backends are now much more consistent,
comprehensive, and easier to use. That means that there’s no longer a
need for a layer in between you and DBI.</p></li>
</ul>
<p>You can continue to use <code class="docutils literal notranslate"><span class="pre">src_mysql()</span></code>, <code class="docutils literal notranslate"><span class="pre">src_postgres()</span></code>, and <code class="docutils literal notranslate"><span class="pre">src_sqlite()</span></code>, but I recommend a new style that makes the connection to DBI more clear:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>

<span class="n">con</span> <span class="o">&lt;-</span> <span class="n">DBI</span><span class="o">::</span><span class="nf">dbConnect</span><span class="p">(</span><span class="n">RSQLite</span><span class="o">::</span><span class="nf">SQLite</span><span class="p">(),</span> <span class="s">&quot;:memory:&quot;</span><span class="p">)</span>
<span class="n">DBI</span><span class="o">::</span><span class="nf">dbWriteTable</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="s">&quot;mtcars&quot;</span><span class="p">,</span> <span class="n">mtcars</span><span class="p">)</span>

<span class="n">mtcars2</span> <span class="o">&lt;-</span> <span class="nf">tbl</span><span class="p">(</span><span class="n">con</span><span class="p">,</span> <span class="s">&quot;mtcars&quot;</span><span class="p">)</span>
<span class="n">mtcars2</span>
</pre></div>
</div>
<p>This is particularly useful if you want to perform non-SELECT queries as you can do whatever you want with <code class="docutils literal notranslate"><span class="pre">DBI::dbGetQuery()</span></code> and <code class="docutils literal notranslate"><span class="pre">DBI::dbExecute()</span></code>.</p>
<p>If you’ve implemented a database backend for dplyr, please read the <a class="reference external" href="https://github.com/tidyverse/dbplyr/blob/main/NEWS.md#backends">backend news</a> to see what’s changed from your perspective (not much). If you want to ensure your package works with both the current and previous version of dplyr, see <code class="docutils literal notranslate"><span class="pre">wrap_dbplyr_obj()</span></code> for helpers.</p>
</div>
<div class="section" id="utf-8">
<h2>UTF-8<a class="headerlink" href="#utf-8" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Internally, column names are always represented as character vectors,
and not as language symbols, to avoid encoding problems on Windows
(#1950, #2387, #2388).</p></li>
<li><p>Error messages and explanations of data frame inequality are now encoded in
UTF-8, also on Windows (#2441).</p></li>
<li><p>Joins now always reencode character columns to UTF-8 if necessary. This gives
a nice speedup, because now pointer comparison can be used instead of string
comparison, but relies on a proper encoding tag for all strings (#2514).</p></li>
<li><p>Fixed problems when joining factor or character encodings with a mix of
native and UTF-8 encoded values (#1885, #2118, #2271, #2451).</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">group_by()</span></code> for data frames that have UTF-8 encoded names (#2284, #2382).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">group_vars()</span></code> generic that returns the grouping as character vector, to
avoid the potentially lossy conversion to language symbols. The list returned
by <code class="docutils literal notranslate"><span class="pre">group_by_prepare()</span></code> now has a new <code class="docutils literal notranslate"><span class="pre">group_names</span></code> component (#1950, #2384).</p></li>
</ul>
</div>
<div class="section" id="colwise-functions">
<h2>Colwise functions<a class="headerlink" href="#colwise-functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">rename()</span></code>, <code class="docutils literal notranslate"><span class="pre">select()</span></code>, <code class="docutils literal notranslate"><span class="pre">group_by()</span></code>, <code class="docutils literal notranslate"><span class="pre">filter()</span></code>, <code class="docutils literal notranslate"><span class="pre">arrange()</span></code> and
<code class="docutils literal notranslate"><span class="pre">transmute()</span></code> now have scoped variants (verbs suffixed with <code class="docutils literal notranslate"><span class="pre">_if()</span></code>,
<code class="docutils literal notranslate"><span class="pre">_at()</span></code> and <code class="docutils literal notranslate"><span class="pre">_all()</span></code>). Like <code class="docutils literal notranslate"><span class="pre">mutate_all()</span></code>, <code class="docutils literal notranslate"><span class="pre">summarise_if()</span></code>, etc,
these variants apply an operation to a selection of variables.</p></li>
<li><p>The scoped verbs taking predicates (<code class="docutils literal notranslate"><span class="pre">mutate_if()</span></code>, <code class="docutils literal notranslate"><span class="pre">summarise_if()</span></code>,
etc) now support S3 objects and lazy tables. S3 objects should
implement methods for <code class="docutils literal notranslate"><span class="pre">length()</span></code>, <code class="docutils literal notranslate"><span class="pre">[[</span></code> and <code class="docutils literal notranslate"><span class="pre">tbl_vars()</span></code>. For lazy
tables, the first 100 rows are collected and the predicate is
applied on this subset of the data. This is robust for the common
case of checking the type of a column (#2129).</p></li>
<li><p>Summarise and mutate colwise functions pass <code class="docutils literal notranslate"><span class="pre">...</span></code> on the the manipulation
functions.</p></li>
<li><p>The performance of colwise verbs like <code class="docutils literal notranslate"><span class="pre">mutate_all()</span></code> is now back to
where it was in <code class="docutils literal notranslate"><span class="pre">mutate_each()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">funs()</span></code> has better handling of namespaced functions (#2089).</p></li>
<li><p>Fix issue with <code class="docutils literal notranslate"><span class="pre">mutate_if()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise_if()</span></code> when a predicate
function returns a vector of <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> (#1989, #2009, #2011).</p></li>
</ul>
</div>
<div class="section" id="tidyeval">
<h2>Tidyeval<a class="headerlink" href="#tidyeval" title="Permalink to this headline">¶</a></h2>
<p>dplyr has a new approach to non-standard evaluation (NSE) called tidyeval.
It is described in detail in <code class="docutils literal notranslate"><span class="pre">vignette(&quot;programming&quot;)</span></code> but, in brief, gives you
the ability to interpolate values in contexts where dplyr usually works with expressions:</p>
<p>This means that the underscored version of each main verb is no longer needed,
and so these functions have been deprecated (but remain around for backward compatibility).</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">order_by()</span></code>, <code class="docutils literal notranslate"><span class="pre">top_n()</span></code>, <code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> now use
tidyeval to capture their arguments by expression. This makes it
possible to use unquoting idioms (see <code class="docutils literal notranslate"><span class="pre">vignette(&quot;programming&quot;)</span></code>) and
fixes scoping issues (#2297).</p></li>
<li><p>Most verbs taking dots now ignore the last argument if empty. This
makes it easier to copy lines of code without having to worry about
deleting trailing commas (#1039).</p></li>
<li><p>[API] The new <code class="docutils literal notranslate"><span class="pre">.data</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code> environments can be used inside
all verbs that operate on data: <code class="docutils literal notranslate"><span class="pre">.data$column_name</span></code> accesses the column
<code class="docutils literal notranslate"><span class="pre">column_name</span></code>, whereas <code class="docutils literal notranslate"><span class="pre">.env$var</span></code> accesses the external variable <code class="docutils literal notranslate"><span class="pre">var</span></code>.
Columns or external variables named <code class="docutils literal notranslate"><span class="pre">.data</span></code> or <code class="docutils literal notranslate"><span class="pre">.env</span></code> are shadowed, use
<code class="docutils literal notranslate"><span class="pre">.data$...</span></code> and/or <code class="docutils literal notranslate"><span class="pre">.env$...</span></code> to access them.  (<code class="docutils literal notranslate"><span class="pre">.data</span></code> implements strict
matching also for the <code class="docutils literal notranslate"><span class="pre">$</span></code> operator (#2591).)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">column()</span></code> and <code class="docutils literal notranslate"><span class="pre">global()</span></code> functions have been removed. They were never
documented officially. Use the new <code class="docutils literal notranslate"><span class="pre">.data</span></code> and <code class="docutils literal notranslate"><span class="pre">.env</span></code> environments instead.</p>
</li>
<li><p>Expressions in verbs are now interpreted correctly in many cases that
failed before (e.g., use of <code class="docutils literal notranslate"><span class="pre">$</span></code>, <code class="docutils literal notranslate"><span class="pre">case_when()</span></code>, nonstandard evaluation, …).
These expressions are now evaluated in a specially constructed temporary
environment that retrieves column data on demand with the help of the
<code class="docutils literal notranslate"><span class="pre">bindrcpp</span></code> package (#2190). This temporary environment poses restrictions on
assignments using <code class="docutils literal notranslate"><span class="pre">&lt;-</span></code> inside verbs. To prevent leaking of broken bindings,
the temporary environment is cleared after the evaluation (#2435).</p></li>
</ul>
</div>
<div class="section" id="verbs">
<h2>Verbs<a class="headerlink" href="#verbs" title="Permalink to this headline">¶</a></h2>
<div class="section" id="joins">
<h3>Joins<a class="headerlink" href="#joins" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>[API] <code class="docutils literal notranslate"><span class="pre">xxx_join.tbl_df(na_matches</span> <span class="pre">=</span> <span class="pre">&quot;never&quot;)</span></code> treats all <code class="docutils literal notranslate"><span class="pre">NA</span></code> values as
different from each other (and from any other value), so that they never
match.  This corresponds to the behavior of joins for database sources,
and of database joins in general.  To match <code class="docutils literal notranslate"><span class="pre">NA</span></code> values, pass
<code class="docutils literal notranslate"><span class="pre">na_matches</span> <span class="pre">=</span> <span class="pre">&quot;na&quot;</span></code> to the join verbs; this is only supported for data frames.
The default is <code class="docutils literal notranslate"><span class="pre">na_matches</span> <span class="pre">=</span> <span class="pre">&quot;na&quot;</span></code>, kept for the sake of compatibility
to v0.5.0. It can be tweaked by calling
<code class="docutils literal notranslate"><span class="pre">pkgconfig::set_config(&quot;dplyr::na_matches&quot;,</span> <span class="pre">&quot;na&quot;)</span></code> (#2033).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">common_by()</span></code> gets a better error message for unexpected inputs (#2091)</p></li>
<li><p>Fix groups when joining grouped data frames with duplicate columns
(#2330, #2334, &#64;davidkretch).</p></li>
<li><p>One of the two join suffixes can now be an empty string, dplyr no longer
hangs (#2228, #2445).</p></li>
<li><p>Anti- and semi-joins warn if factor levels are inconsistent (#2741).</p></li>
<li><p>Warnings about join column inconsistencies now contain the column names
(#2728).</p></li>
</ul>
</div>
<div class="section" id="select">
<h3>Select<a class="headerlink" href="#select" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>For selecting variables, the first selector decides if it’s an inclusive
selection (i.e., the initial column list is empty), or an exclusive selection
(i.e., the initial column list contains all columns). This means that
<code class="docutils literal notranslate"><span class="pre">select(mtcars,</span> <span class="pre">contains(&quot;am&quot;),</span> <span class="pre">contains(&quot;FOO&quot;),</span> <span class="pre">contains(&quot;vs&quot;))</span></code> now returns
again both <code class="docutils literal notranslate"><span class="pre">am</span></code> and <code class="docutils literal notranslate"><span class="pre">vs</span></code> columns like in dplyr 0.4.3 (#2275, #2289, &#64;r2evans).</p></li>
<li><p>Select helpers now throw an error if called when no variables have been
set (#2452)</p></li>
<li><p>Helper functions in <code class="docutils literal notranslate"><span class="pre">select()</span></code> (and related verbs) are now evaluated
in a context where column names do not exist (#2184).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> (and the internal function <code class="docutils literal notranslate"><span class="pre">select_vars()</span></code>) now support
column names in addition to column positions. As a result,
expressions like <code class="docutils literal notranslate"><span class="pre">select(mtcars,</span> <span class="pre">&quot;cyl&quot;)</span></code> are now allowed.</p></li>
</ul>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">recode()</span></code>, <code class="docutils literal notranslate"><span class="pre">case_when()</span></code> and <code class="docutils literal notranslate"><span class="pre">coalesce()</span></code> now support splicing of
arguments with rlang’s <code class="docutils literal notranslate"><span class="pre">!!!</span></code> operator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count()</span></code> now preserves the grouping of its input (#2021).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> no longer duplicates variables (#2001).</p></li>
<li><p>Empty <code class="docutils literal notranslate"><span class="pre">distinct()</span></code> with a grouped data frame works the same way as
an empty <code class="docutils literal notranslate"><span class="pre">distinct()</span></code> on an ungrouped data frame, namely it uses all
variables (#2476).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">copy_to()</span></code> now returns it’s output invisibly (since you’re often just
calling for the side-effect).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> and <code class="docutils literal notranslate"><span class="pre">lag()</span></code> throw informative error if used with ts objects (#2219)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> recycles list columns of length 1 (#2171).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> gives better error message when attempting to add a non-vector
column (#2319), or attempting to remove a column with <code class="docutils literal notranslate"><span class="pre">NULL</span></code> (#2187, #2439).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> now correctly evaluates newly created factors (#2217), and
can create ordered factors (#2200).</p></li>
<li><p>Ungrouped <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> uses summary variables correctly (#2404, #2453).</p></li>
<li><p>Grouped <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> no longer converts character <code class="docutils literal notranslate"><span class="pre">NA</span></code> to empty strings (#1839).</p></li>
</ul>
</div>
</div>
<div class="section" id="combining-and-comparing">
<h2>Combining and comparing<a class="headerlink" href="#combining-and-comparing" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">all_equal()</span></code> now reports multiple problems as a character vector (#1819, #2442).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all_equal()</span></code> checks that factor levels are equal (#2440, #2442).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and <code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> give an error for database tables (#2373).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> works correctly with <code class="docutils literal notranslate"><span class="pre">NULL</span></code> arguments and an <code class="docutils literal notranslate"><span class="pre">.id</span></code> argument
(#2056), and also for zero-column data frames (#2175).</p></li>
<li><p>Breaking change: <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and <code class="docutils literal notranslate"><span class="pre">combine()</span></code> are more strict when coercing.
Logical values are no longer coerced to integer and numeric. Date, POSIXct
and other integer or double-based classes are no longer coerced to integer or
double as there is chance of attributes or information being lost
(#2209, &#64;zeehio).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> now calls <code class="docutils literal notranslate"><span class="pre">tibble::repair_names()</span></code> to ensure that all
names are unique (#2248).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> handles empty argument list (#2048).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> better handles <code class="docutils literal notranslate"><span class="pre">NULL</span></code> inputs (#2303, #2443).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> explicitly rejects columns containing data frames
(#2015, #2446).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and <code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> now accept vectors. They are treated
as rows by the former and columns by the latter. Rows require inner
names like <code class="docutils literal notranslate"><span class="pre">c(col1</span> <span class="pre">=</span> <span class="pre">1,</span> <span class="pre">col2</span> <span class="pre">=</span> <span class="pre">2)</span></code>, while columns require outer
names: <code class="docutils literal notranslate"><span class="pre">col1</span> <span class="pre">=</span> <span class="pre">c(1,</span> <span class="pre">2)</span></code>. Lists are still treated as data frames but
can be spliced explicitly with <code class="docutils literal notranslate"><span class="pre">!!!</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">bind_rows(!!!</span> <span class="pre">x)</span></code> (#1676).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_list()</span></code> and <code class="docutils literal notranslate"><span class="pre">rbind_all()</span></code> now call <code class="docutils literal notranslate"><span class="pre">.Deprecated()</span></code>, they will be removed
in the next CRAN release. Please use <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine()</span></code> accepts <code class="docutils literal notranslate"><span class="pre">NA</span></code> values (#2203, &#64;zeehio)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine()</span></code> and <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> with character and factor types now always warn
about the coercion to character (#2317, &#64;zeehio)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine()</span></code> and <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> accept <code class="docutils literal notranslate"><span class="pre">difftime</span></code> objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate</span></code> coerces results from grouped dataframes accepting combinable data
types (such as <code class="docutils literal notranslate"><span class="pre">integer</span></code> and <code class="docutils literal notranslate"><span class="pre">numeric</span></code>). (#1892, &#64;zeehio)</p></li>
</ul>
</div>
<div class="section" id="vector-functions">
<h2>Vector functions<a class="headerlink" href="#vector-functions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%in%</span></code> gets new hybrid handler (#126).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">between()</span></code> returns NA if <code class="docutils literal notranslate"><span class="pre">left</span></code> or <code class="docutils literal notranslate"><span class="pre">right</span></code> is <code class="docutils literal notranslate"><span class="pre">NA</span></code> (fixes #2562).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">case_when()</span></code> supports <code class="docutils literal notranslate"><span class="pre">NA</span></code> values (#2000, &#64;tjmahr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">first()</span></code>, <code class="docutils literal notranslate"><span class="pre">last()</span></code>, and <code class="docutils literal notranslate"><span class="pre">nth()</span></code> have better default values for factor,
Dates, POSIXct, and data frame inputs (#2029).</p></li>
<li><p>Fixed segmentation faults in hybrid evaluation of <code class="docutils literal notranslate"><span class="pre">first()</span></code>, <code class="docutils literal notranslate"><span class="pre">last()</span></code>,
<code class="docutils literal notranslate"><span class="pre">nth()</span></code>,  <code class="docutils literal notranslate"><span class="pre">lead()</span></code>, and <code class="docutils literal notranslate"><span class="pre">lag()</span></code>. These functions now always fall back to the R
implementation if called with arguments that the hybrid evaluator cannot
handle (#948, #1980).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_distinct()</span></code> gets larger hash tables given slightly better performance (#977).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nth()</span></code> and <code class="docutils literal notranslate"><span class="pre">ntile()</span></code> are more careful about proper data types of their return values (#2306).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ntile()</span></code> ignores <code class="docutils literal notranslate"><span class="pre">NA</span></code> when computing group membership (#2564).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lag()</span></code> enforces integer <code class="docutils literal notranslate"><span class="pre">n</span></code> (#2162, &#64;kevinushey).</p></li>
<li><p>hybrid <code class="docutils literal notranslate"><span class="pre">min()</span></code> and <code class="docutils literal notranslate"><span class="pre">max()</span></code> now always return a <code class="docutils literal notranslate"><span class="pre">numeric</span></code> and work correctly
in edge cases (empty input, all <code class="docutils literal notranslate"><span class="pre">NA</span></code>, …) (#2305, #2436).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min_rank(&quot;string&quot;)</span></code> no longer segfaults in hybrid evaluation (#2279, #2444).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recode()</span></code> can now recode a factor to other types (#2268)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recode()</span></code> gains <code class="docutils literal notranslate"><span class="pre">.dots</span></code> argument to support passing replacements as list
(#2110, &#64;jlegewie).</p></li>
</ul>
</div>
<div class="section" id="other-minor-changes-and-bug-fixes">
<h2>Other minor changes and bug fixes<a class="headerlink" href="#other-minor-changes-and-bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Many error messages are more helpful by referring to a column name or a
position in the argument list (#2448).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">is_grouped_df()</span></code> alias to <code class="docutils literal notranslate"><span class="pre">is.grouped_df()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbl_vars()</span></code> now has a <code class="docutils literal notranslate"><span class="pre">group_vars</span></code> argument set to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> by
default. If <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>, group variables are not returned.</p></li>
<li><p>Fixed segmentation fault after calling <code class="docutils literal notranslate"><span class="pre">rename()</span></code> on an invalid grouped
data frame (#2031).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rename_vars()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">strict</span></code> argument to control if an
error is thrown when you try and rename a variable that doesn’t
exist.</p></li>
<li><p>Fixed undefined behavior for <code class="docutils literal notranslate"><span class="pre">slice()</span></code> on a zero-column data frame (#2490).</p></li>
<li><p>Fixed very rare case of false match during join (#2515).</p></li>
<li><p>Restricted workaround for <code class="docutils literal notranslate"><span class="pre">match()</span></code> to R 3.3.0. (#1858).</p></li>
<li><p>dplyr now warns on load when the version of R or Rcpp during installation is
different to the currently installed version (#2514).</p></li>
<li><p>Fixed improper reuse of attributes when creating a list column in <code class="docutils literal notranslate"><span class="pre">summarise()</span></code>
and perhaps <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> (#2231).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> always strip the <code class="docutils literal notranslate"><span class="pre">names</span></code> attribute from new
or updated columns, even for ungrouped operations (#1689).</p></li>
<li><p>Fixed rare error that could lead to a segmentation fault in
<code class="docutils literal notranslate"><span class="pre">all_equal(ignore_col_order</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> (#2502).</p></li>
<li><p>The “dim” and “dimnames” attributes are always stripped when copying a
vector (#1918, #2049).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grouped_df</span></code> and <code class="docutils literal notranslate"><span class="pre">rowwise</span></code> are registered officially as S3 classes.
This makes them easier to use with S4 (#2276, &#64;joranE, #2789).</p></li>
<li><p>All operations that return tibbles now include the <code class="docutils literal notranslate"><span class="pre">&quot;tbl&quot;</span></code> class.
This is important for correct printing with tibble 1.3.1 (#2789).</p></li>
<li><p>Makeflags uses PKG_CPPFLAGS for defining preprocessor macros.</p></li>
<li><p>astyle formatting for C++ code, tested but not changed as part of the tests
(#2086, #2103).</p></li>
<li><p>Update RStudio project settings to install tests (#1952).</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">Rcpp::interfaces()</span></code> to register C callable interfaces, and registering all native exported functions via <code class="docutils literal notranslate"><span class="pre">R_registerRoutines()</span></code> and <code class="docutils literal notranslate"><span class="pre">useDynLib(.registration</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> (#2146).</p></li>
<li><p>Formatting of grouped data frames now works by overriding the <code class="docutils literal notranslate"><span class="pre">tbl_sum()</span></code> generic instead of <code class="docutils literal notranslate"><span class="pre">print()</span></code>. This means that the output is more consistent with tibble, and that <code class="docutils literal notranslate"><span class="pre">format()</span></code> is now supported also for SQL sources (#2781).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-5-0">
<h1>dplyr 0.5.0<a class="headerlink" href="#dplyr-0-5-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id12">
<h2>Breaking changes<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<div class="section" id="existing-functions">
<h3>Existing functions<a class="headerlink" href="#existing-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> once again ignores grouping (#1206).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> now only keeps the distinct variables. If you want to return
all variables (using the first row for non-distinct values) use
<code class="docutils literal notranslate"><span class="pre">.keep_all</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> (#1110). For SQL sources, <code class="docutils literal notranslate"><span class="pre">.keep_all</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> is
implemented using <code class="docutils literal notranslate"><span class="pre">GROUP</span> <span class="pre">BY</span></code>, and <code class="docutils literal notranslate"><span class="pre">.keep_all</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> raises an error
(#1937, #1942, &#64;krlmlr). (The default behaviour of using all variables
when none are specified remains - this note only applies if you select
some variables).</p></li>
<li><p>The select helper functions <code class="docutils literal notranslate"><span class="pre">starts_with()</span></code>, <code class="docutils literal notranslate"><span class="pre">ends_with()</span></code> etc are now
real exported functions. This means that you’ll need to import those
functions if you’re using from a package where dplyr is not attached.
i.e. <code class="docutils literal notranslate"><span class="pre">dplyr::select(mtcars,</span> <span class="pre">starts_with(&quot;m&quot;))</span></code> used to work, but
now you’ll need <code class="docutils literal notranslate"><span class="pre">dplyr::select(mtcars,</span> <span class="pre">dplyr::starts_with(&quot;m&quot;))</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id13">
<h3>Deprecated and defunct functions<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The long deprecated <code class="docutils literal notranslate"><span class="pre">chain()</span></code>, <code class="docutils literal notranslate"><span class="pre">chain_q()</span></code> and <code class="docutils literal notranslate"><span class="pre">%.%</span></code> have been removed.
Please use <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id()</span></code> has been deprecated. Please use <code class="docutils literal notranslate"><span class="pre">group_indices()</span></code> instead
(#808).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_all()</span></code> and <code class="docutils literal notranslate"><span class="pre">rbind_list()</span></code> are formally deprecated. Please use
<code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> instead (#803).</p></li>
<li><p>Outdated benchmarking demos have been removed (#1487).</p></li>
<li><p>Code related to starting and signalling clusters has been moved out to
<a class="reference external" href="https://github.com/tidyverse/multidplyr">multidplyr</a>.</p></li>
</ul>
</div>
</div>
<div class="section" id="id14">
<h2>New functions<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">coalesce()</span></code> finds the first non-missing value from a set of vectors.
(#1666, thanks to &#64;krlmlr for initial implementation).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">case_when()</span></code> is a general vectorised if + else if (#631).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if_else()</span></code> is a vectorised if statement: it’s a stricter (type-safe),
faster, and more predictable version of <code class="docutils literal notranslate"><span class="pre">ifelse()</span></code>. In SQL it is
translated to a <code class="docutils literal notranslate"><span class="pre">CASE</span></code> statement.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">na_if()</span></code> makes it easy to replace a certain value with an <code class="docutils literal notranslate"><span class="pre">NA</span></code> (#1707).
In SQL it is translated to <code class="docutils literal notranslate"><span class="pre">NULL_IF</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">near(x,</span> <span class="pre">y)</span></code> is a helper for <code class="docutils literal notranslate"><span class="pre">abs(x</span> <span class="pre">-</span> <span class="pre">y)</span> <span class="pre">&lt;</span> <span class="pre">tol</span></code> (#1607).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">recode()</span></code> is vectorised equivalent to <code class="docutils literal notranslate"><span class="pre">switch()</span></code> (#1710).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">union_all()</span></code> method. Maps to <code class="docutils literal notranslate"><span class="pre">UNION</span> <span class="pre">ALL</span></code> for SQL sources, <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code>
for data frames/tbl_dfs, and <code class="docutils literal notranslate"><span class="pre">combine()</span></code> for vectors (#1045).</p></li>
<li><p>A new family of functions replace <code class="docutils literal notranslate"><span class="pre">summarise_each()</span></code> and
<code class="docutils literal notranslate"><span class="pre">mutate_each()</span></code> (which will thus be deprecated in a future release).
<code class="docutils literal notranslate"><span class="pre">summarise_all()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate_all()</span></code> apply a function to all columns
while <code class="docutils literal notranslate"><span class="pre">summarise_at()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate_at()</span></code> operate on a subset of
columns. These columns are selected with either a character vector
of columns names, a numeric vector of column positions, or a column
specification with <code class="docutils literal notranslate"><span class="pre">select()</span></code> semantics generated by the new
<code class="docutils literal notranslate"><span class="pre">columns()</span></code> helper. In addition, <code class="docutils literal notranslate"><span class="pre">summarise_if()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate_if()</span></code>
take a predicate function or a logical vector (these verbs currently
require local sources). All these functions can now take ordinary
functions instead of a list of functions generated by <code class="docutils literal notranslate"><span class="pre">funs()</span></code>
(though this is only useful for local sources). (#1845, &#64;lionel-)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select_if()</span></code> lets you select columns with a predicate function.
Only compatible with local sources. (#497, #1569, &#64;lionel-)</p></li>
</ul>
</div>
<div class="section" id="local-backends">
<h2>Local backends<a class="headerlink" href="#local-backends" title="Permalink to this headline">¶</a></h2>
<div class="section" id="dtplyr">
<h3>dtplyr<a class="headerlink" href="#dtplyr" title="Permalink to this headline">¶</a></h3>
<p>All data table related code has been separated out in to a new dtplyr package. This decouples the development of the data.table interface from the development of the dplyr package. If both data.table and dplyr are loaded, you’ll get a message reminding you to load dtplyr.</p>
</div>
<div class="section" id="tibble">
<h3>Tibble<a class="headerlink" href="#tibble" title="Permalink to this headline">¶</a></h3>
<p>Functions related to the creation and coercion of <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code>s, now live in their own package: <a class="reference external" href="https://www.rstudio.com/blog/tibble-1-0-0/">tibble</a>. See <code class="docutils literal notranslate"><span class="pre">vignette(&quot;tibble&quot;)</span></code> for more details.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$</span></code> and <code class="docutils literal notranslate"><span class="pre">[[</span></code> methods that never do partial matching (#1504), and throw
an error if the variable does not exist.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all_equal()</span></code> allows to compare data frames ignoring row and column order,
and optionally ignoring minor differences in type (e.g. int vs. double)
(#821). The test handles the case where the df has 0 columns (#1506).
The test fails fails when convert is <code class="docutils literal notranslate"><span class="pre">FALSE</span></code> and types don’t match (#1484).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all_equal()</span></code> shows better error message when comparing raw values
or when types are incompatible and <code class="docutils literal notranslate"><span class="pre">convert</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> (#1820, &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_row()</span></code> makes it easy to add a new row to data frame (#1021)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code> is now an S3 generic with methods for lists (the old
<code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code>), data frames (trivial), and matrices (with efficient
C++ implementation) (#876). It no longer strips subclasses.</p></li>
<li><p>The internals of <code class="docutils literal notranslate"><span class="pre">data_frame()</span></code> and <code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code> have been aligned,
so <code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code> will now automatically recycle length-1 vectors.
Both functions give more informative error messages if you attempting to
create an invalid data frame. You can no longer create a data frame with
duplicated names (#820). Both check for <code class="docutils literal notranslate"><span class="pre">POSIXlt</span></code> columns, and tell you to
use <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code> instead (#813).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frame_data()</span></code> properly constructs rectangular tables (#1377, &#64;kevinushey),
and supports list-cols.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glimpse()</span></code> is now a generic. The default method dispatches to <code class="docutils literal notranslate"><span class="pre">str()</span></code>
(#1325).  It now (invisibly) returns its first argument (#1570).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lst()</span></code> and <code class="docutils literal notranslate"><span class="pre">lst_()</span></code> which create lists in the same way that
<code class="docutils literal notranslate"><span class="pre">data_frame()</span></code> and <code class="docutils literal notranslate"><span class="pre">data_frame_()</span></code> create data frames (#1290).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print.tbl_df()</span></code> is considerably faster if you have very wide data frames.
It will now also only list the first 100 additional variables not already
on screen - control this with the new <code class="docutils literal notranslate"><span class="pre">n_extra</span></code> parameter to <code class="docutils literal notranslate"><span class="pre">print()</span></code>
(#1161). When printing a grouped data frame the number of groups is now
printed with thousands separators (#1398). The type of list columns
is correctly printed (#1379)</p></li>
<li><p>Package includes <code class="docutils literal notranslate"><span class="pre">setOldClass(c(&quot;tbl_df&quot;,</span> <span class="pre">&quot;tbl&quot;,</span> <span class="pre">&quot;data.frame&quot;))</span></code> to help
with S4 dispatch (#969).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbl_df</span></code> automatically generates column names (#1606).</p></li>
</ul>
</div>
<div class="section" id="tbl-cube">
<h3>tbl_cube<a class="headerlink" href="#tbl-cube" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>new <code class="docutils literal notranslate"><span class="pre">as_data_frame.tbl_cube()</span></code> (#1563, &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tbl_cube</span></code>s are now constructed correctly from data frames, duplicate
dimension values are detected, missing dimension values are filled
with <code class="docutils literal notranslate"><span class="pre">NA</span></code>. The construction from data frames now guesses the measure
variables by default, and allows specification of dimension and/or
measure variables (#1568, &#64;krlmlr).</p></li>
<li><p>Swap order of <code class="docutils literal notranslate"><span class="pre">dim_names</span></code> and <code class="docutils literal notranslate"><span class="pre">met_name</span></code> arguments in <code class="docutils literal notranslate"><span class="pre">as.tbl_cube</span></code>
(for <code class="docutils literal notranslate"><span class="pre">array</span></code>, <code class="docutils literal notranslate"><span class="pre">table</span></code> and <code class="docutils literal notranslate"><span class="pre">matrix</span></code>) for consistency with <code class="docutils literal notranslate"><span class="pre">tbl_cube</span></code> and
<code class="docutils literal notranslate"><span class="pre">as.tbl_cube.data.frame</span></code>. Also, the <code class="docutils literal notranslate"><span class="pre">met_name</span></code> argument to
<code class="docutils literal notranslate"><span class="pre">as.tbl_cube.table</span></code> now defaults to <code class="docutils literal notranslate"><span class="pre">&quot;Freq&quot;</span></code> for consistency with
<code class="docutils literal notranslate"><span class="pre">as.data.frame.table</span></code> (&#64;krlmlr, #1374).</p></li>
</ul>
</div>
</div>
<div class="section" id="remote-backends">
<h2>Remote backends<a class="headerlink" href="#remote-backends" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code> on SQL sources now returns all rows (#1752, #1821,
&#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compute()</span></code> gets new parameters <code class="docutils literal notranslate"><span class="pre">indexes</span></code> and <code class="docutils literal notranslate"><span class="pre">unique_indexes</span></code> that make
it easier to add indexes (#1499, &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">db_explain()</span></code> gains a default method for DBIConnections (#1177).</p></li>
<li><p>The backend testing system has been improved. This lead to the removal of
<code class="docutils literal notranslate"><span class="pre">temp_srcs()</span></code>. In the unlikely event that you were using this function,
you can instead use <code class="docutils literal notranslate"><span class="pre">test_register_src()</span></code>, <code class="docutils literal notranslate"><span class="pre">test_load()</span></code>, and <code class="docutils literal notranslate"><span class="pre">test_frame()</span></code>.</p></li>
<li><p>You can now use <code class="docutils literal notranslate"><span class="pre">right_join()</span></code> and <code class="docutils literal notranslate"><span class="pre">full_join()</span></code> with remote tables (#1172).</p></li>
</ul>
<div class="section" id="sqlite">
<h3>SQLite<a class="headerlink" href="#sqlite" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src_memdb()</span></code> is a session-local in-memory SQLite database.
<code class="docutils literal notranslate"><span class="pre">memdb_frame()</span></code> works like <code class="docutils literal notranslate"><span class="pre">data_frame()</span></code>, but creates a new table in
that database.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_sqlite()</span></code> now uses a stricter quoting character, <code class="docutils literal notranslate"><span class="pre">`</span></code>, instead of
<code class="docutils literal notranslate"><span class="pre">&quot;</span></code>. SQLite “helpfully” will convert <code class="docutils literal notranslate"><span class="pre">&quot;x&quot;</span></code> into a string if there is
no identifier called x in the current scope (#1426).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_sqlite()</span></code> throws errors if you try and use it with window functions
(#907).</p></li>
</ul>
</div>
<div class="section" id="sql-translation">
<h3>SQL translation<a class="headerlink" href="#sql-translation" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filter.tbl_sql()</span></code> now puts parens around each argument (#934).</p></li>
<li><p>Unary <code class="docutils literal notranslate"><span class="pre">-</span></code> is better translated (#1002).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">escape.POSIXt()</span></code> method makes it easier to use date times. The date is
rendered in ISO 8601 format in UTC, which should work in most databases
(#857).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is.na()</span></code> gets a missing space (#1695).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">if</span></code>, <code class="docutils literal notranslate"><span class="pre">is.na()</span></code>, and <code class="docutils literal notranslate"><span class="pre">is.null()</span></code> get extra parens to make precedence
more clear (#1695).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pmin()</span></code> and <code class="docutils literal notranslate"><span class="pre">pmax()</span></code> are translated to <code class="docutils literal notranslate"><span class="pre">MIN()</span></code> and <code class="docutils literal notranslate"><span class="pre">MAX()</span></code> (#1711).</p></li>
<li><p>Window functions:</p>
<ul>
<li><p>Work on ungrouped data (#1061).</p></li>
<li><p>Warning if order is not set on cumulative window functions.</p></li>
<li><p>Multiple partitions or ordering variables in windowed functions no
longer generate extra parentheses, so should work for more databases
(#1060)</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="internals">
<h3>Internals<a class="headerlink" href="#internals" title="Permalink to this headline">¶</a></h3>
<p>This version includes an almost total rewrite of how dplyr verbs are translated into SQL. Previously, I used a rather ad-hoc approach, which tried to guess when a new subquery was needed. Unfortunately this approach was fraught with bugs, so in this version I’ve implemented a much richer internal data model. Now there is a three step process:</p>
<ol class="simple">
<li><p>When applied to a <code class="docutils literal notranslate"><span class="pre">tbl_lazy</span></code>, each dplyr verb captures its inputs
and stores in a <code class="docutils literal notranslate"><span class="pre">op</span></code> (short for operation) object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sql_build()</span></code> iterates through the operations building to build up an
object that represents a SQL query. These objects are convenient for
testing as they are lists, and are backend agnostics.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sql_render()</span></code> iterates through the queries and generates the SQL,
using generics (like <code class="docutils literal notranslate"><span class="pre">sql_select()</span></code>) that can vary based on the
backend.</p></li>
</ol>
<p>In the short-term, this increased abstraction is likely to lead to some minor performance decreases, but the chance of dplyr generating correct SQL is much much higher. In the long-term, these abstractions will make it possible to write a query optimiser/compiler in dplyr, which would make it possible to generate much more succinct queries.</p>
<p>If you have written a dplyr backend, you’ll need to make some minor changes to your package:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sql_join()</span></code> has been considerably simplified - it is now only responsible
for generating the join query, not for generating the intermediate selects
that rename the variable. Similarly for <code class="docutils literal notranslate"><span class="pre">sql_semi_join()</span></code>. If you’ve
provided new methods in your backend, you’ll need to rewrite.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select_query()</span></code> gains a distinct argument which is used for generating
queries for <code class="docutils literal notranslate"><span class="pre">distinct()</span></code>. It loses the <code class="docutils literal notranslate"><span class="pre">offset</span></code> argument which was
never used (and hence never tested).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_translate_env()</span></code> has been replaced by <code class="docutils literal notranslate"><span class="pre">sql_translate_env()</span></code> which
should have methods for the connection object.</p></li>
</ul>
<p>There were two other tweaks to the exported API, but these are less likely to affect anyone.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">translate_sql()</span></code> and <code class="docutils literal notranslate"><span class="pre">partial_eval()</span></code> got a new API: now use connection +
variable names, rather than a <code class="docutils literal notranslate"><span class="pre">tbl</span></code>. This makes testing considerably easier.
<code class="docutils literal notranslate"><span class="pre">translate_sql_q()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">translate_sql_()</span></code>.</p></li>
<li><p>Also note that the sql generation generics now have a default method, instead
methods for DBIConnection and NULL.</p></li>
</ul>
</div>
</div>
<div class="section" id="id15">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h2>
<div class="section" id="single-table-verbs">
<h3>Single table verbs<a class="headerlink" href="#single-table-verbs" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Avoiding segfaults in presence of <code class="docutils literal notranslate"><span class="pre">raw</span></code> columns (#1803, #1817, &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> fails gracefully on list columns (#1489) and matrices
(#1870, #1945, &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count()</span></code> now adds additional grouping variables, rather than overriding
existing (#1703). <code class="docutils literal notranslate"><span class="pre">tally()</span></code> and <code class="docutils literal notranslate"><span class="pre">count()</span></code> can now count a variable
called <code class="docutils literal notranslate"><span class="pre">n</span></code> (#1633). Weighted <code class="docutils literal notranslate"><span class="pre">count()</span></code>/<code class="docutils literal notranslate"><span class="pre">tally()</span></code> ignore <code class="docutils literal notranslate"><span class="pre">NA</span></code>s (#1145).</p></li>
<li><p>The progress bar in <code class="docutils literal notranslate"><span class="pre">do()</span></code> is now updated at most 20 times per second,
avoiding unneccessary redraws (#1734, &#64;mkuhn)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> doesn’t crash when given a 0-column data frame (#1437).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> throws an error if you supply an named arguments. This is usually
a type: <code class="docutils literal notranslate"><span class="pre">filter(df,</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">1)</span></code> instead of <code class="docutils literal notranslate"><span class="pre">filter(df,</span> <span class="pre">x</span> <span class="pre">==</span> <span class="pre">1)</span></code> (#1529).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> correctly coerces factors with different levels (#1678),
handles min/max of already summarised variable (#1622), and
supports data frames as columns (#1425).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> now informs you that it adds missing grouping variables
(#1511). It works even if the grouping variable has a non-syntactic name
(#1138). Negating a failed match (e.g. <code class="docutils literal notranslate"><span class="pre">select(mtcars,</span> <span class="pre">-contains(&quot;x&quot;))</span></code>)
returns all columns, instead of no columns (#1176)</p>
<p>The <code class="docutils literal notranslate"><span class="pre">select()</span></code> helpers are now exported and have their own
documentation (#1410). <code class="docutils literal notranslate"><span class="pre">one_of()</span></code> gives a useful error message if
variables names are not found in data frame (#1407).</p>
</li>
<li><p>The naming behaviour of <code class="docutils literal notranslate"><span class="pre">summarise_each()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate_each()</span></code> has been
tweaked so that you can force inclusion of both the function and the
variable name: <code class="docutils literal notranslate"><span class="pre">summarise_each(mtcars,</span> <span class="pre">funs(mean</span> <span class="pre">=</span> <span class="pre">mean),</span> <span class="pre">everything())</span></code>
(#442).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> handles factors that are all <code class="docutils literal notranslate"><span class="pre">NA</span></code> (#1645), or have different
levels in different groups (#1414). It disambiguates <code class="docutils literal notranslate"><span class="pre">NA</span></code> and <code class="docutils literal notranslate"><span class="pre">NaN</span></code> (#1448),
and silently promotes groups that only contain <code class="docutils literal notranslate"><span class="pre">NA</span></code> (#1463). It deep copies
data in list columns (#1643), and correctly fails on incompatible columns
(#1641). <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> on a grouped data no longer groups grouping attributes
(#1120). <code class="docutils literal notranslate"><span class="pre">rowwise()</span></code> mutate gives expected results (#1381).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">one_of()</span></code> tolerates unknown variables in <code class="docutils literal notranslate"><span class="pre">vars</span></code>, but warns (#1848, &#64;jennybc).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print.grouped_df()</span></code> passes on <code class="docutils literal notranslate"><span class="pre">...</span></code> to <code class="docutils literal notranslate"><span class="pre">print()</span></code> (#1893).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> correctly handles grouped attributes (#1405).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ungroup()</span></code> generic gains <code class="docutils literal notranslate"><span class="pre">...</span></code> (#922).</p></li>
</ul>
</div>
<div class="section" id="dual-table-verbs">
<h3>Dual table verbs<a class="headerlink" href="#dual-table-verbs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> matches the behaviour of <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and ignores <code class="docutils literal notranslate"><span class="pre">NULL</span></code>
inputs (#1148). It also handles <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code>s with integer base type (#1402).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> handles 0-length named lists (#1515), promotes factors to
characters (#1538), and warns when binding factor and character (#1485).
bind_rows()` is more flexible in the way it can accept data frames,
lists, list of data frames, and list of lists (#1389).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> rejects <code class="docutils literal notranslate"><span class="pre">POSIXlt</span></code> columns (#1875, &#64;krlmlr).</p></li>
<li><p>Both <code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> and <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> infer classes and grouping information
from the first data frame (#1692).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind()</span></code> and <code class="docutils literal notranslate"><span class="pre">cbind()</span></code> get <code class="docutils literal notranslate"><span class="pre">grouped_df()</span></code> methods that make it harder to
create corrupt data frames (#1385). You should still prefer <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code>
and <code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code>.</p></li>
<li><p>Joins now use correct class when joining on <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code> columns
(#1582, &#64;joel23888), and consider time zones (#819). Joins handle a <code class="docutils literal notranslate"><span class="pre">by</span></code>
that is empty (#1496), or has duplicates (#1192). Suffixes grow progressively
to avoid creating repeated column names (#1460).  Joins on string columns
should be substantially faster (#1386). Extra attributes are ok if they are
identical (#1636). Joins work correct when factor levels not equal
(#1712, #1559). Anti- and semi-joins give correct result when by variable
is a factor (#1571), but warn if factor levels are inconsistent (#2741).
A clear error message is given for joins where an
explicit <code class="docutils literal notranslate"><span class="pre">by</span></code> contains unavailable columns (#1928, #1932).
Warnings about join column inconsistencies now contain the column names
(#2728).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inner_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">left_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">right_join()</span></code>, and <code class="docutils literal notranslate"><span class="pre">full_join()</span></code> gain a
<code class="docutils literal notranslate"><span class="pre">suffix</span></code> argument which allows you to control what suffix duplicated variable
names receive (#1296).</p></li>
<li><p>Set operations (<code class="docutils literal notranslate"><span class="pre">intersect()</span></code>, <code class="docutils literal notranslate"><span class="pre">union()</span></code> etc) respect coercion rules
(#799). <code class="docutils literal notranslate"><span class="pre">setdiff()</span></code> handles factors with <code class="docutils literal notranslate"><span class="pre">NA</span></code> levels (#1526).</p></li>
<li><p>There were a number of fixes to enable joining of data frames that don’t
have the same encoding of column names (#1513), including working around
bug 16885 regarding <code class="docutils literal notranslate"><span class="pre">match()</span></code> in R 3.3.0 (#1806, #1810,
&#64;krlmlr).</p></li>
</ul>
</div>
<div class="section" id="id16">
<h3>Vector functions<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">combine()</span></code> silently drops <code class="docutils literal notranslate"><span class="pre">NULL</span></code> inputs (#1596).</p></li>
<li><p>Hybrid <code class="docutils literal notranslate"><span class="pre">cummean()</span></code> is more stable against floating point errors (#1387).</p></li>
<li><p>Hybrid <code class="docutils literal notranslate"><span class="pre">lead()</span></code> and <code class="docutils literal notranslate"><span class="pre">lag()</span></code> received a considerable overhaul. They are more
careful about more complicated expressions (#1588), and falls back more
readily to pure R evaluation (#1411). They behave correctly in <code class="docutils literal notranslate"><span class="pre">summarise()</span></code>
(#1434). and handle default values for string columns.</p></li>
<li><p>Hybrid <code class="docutils literal notranslate"><span class="pre">min()</span></code> and <code class="docutils literal notranslate"><span class="pre">max()</span></code> handle empty sets (#1481).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_distinct()</span></code> uses multiple arguments for data frames (#1084), falls back to R
evaluation when needed (#1657), reverting decision made in (#567).
Passing no arguments gives an error (#1957, #1959, &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nth()</span></code> now supports negative indices to select from end, e.g. <code class="docutils literal notranslate"><span class="pre">nth(x,</span> <span class="pre">-2)</span></code>
selects the 2nd value from the end of <code class="docutils literal notranslate"><span class="pre">x</span></code> (#1584).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_n()</span></code> can now also select bottom <code class="docutils literal notranslate"><span class="pre">n</span></code> values by passing a negative value
to <code class="docutils literal notranslate"><span class="pre">n</span></code> (#1008, #1352).</p></li>
<li><p>Hybrid evaluation leaves formulas untouched (#1447).</p></li>
</ul>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-4-3">
<h1>dplyr 0.4.3<a class="headerlink" href="#dplyr-0-4-3" title="Permalink to this headline">¶</a></h1>
<div class="section" id="improved-encoding-support">
<h2>Improved encoding support<a class="headerlink" href="#improved-encoding-support" title="Permalink to this headline">¶</a></h2>
<p>Until now, dplyr’s support for non-UTF8 encodings has been rather shaky. This release brings a number of improvement to fix these problems: it’s probably not perfect, but should be a lot better than the previously version. This includes fixes to <code class="docutils literal notranslate"><span class="pre">arrange()</span></code> (#1280), <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> (#1265), <code class="docutils literal notranslate"><span class="pre">distinct()</span></code> (#1179), and joins (#1315). <code class="docutils literal notranslate"><span class="pre">print.tbl_df()</span></code> also received a fix for strings with invalid encodings (#851).</p>
</div>
<div class="section" id="other-minor-improvements-and-bug-fixes">
<h2>Other minor improvements and bug fixes<a class="headerlink" href="#other-minor-improvements-and-bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">frame_data()</span></code> provides a means for constructing <code class="docutils literal notranslate"><span class="pre">data_frame</span></code>s using
a simple row-wise language. (#1358, &#64;kevinushey)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all.equal()</span></code> no longer runs all outputs together (#1130).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code> gives better error message with NA column names (#1101).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">[.tbl_df</span></code> is more careful about subsetting column names (#1245).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> work on empty data frames (#1142).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code>, <code class="docutils literal notranslate"><span class="pre">filter()</span></code>, <code class="docutils literal notranslate"><span class="pre">slice()</span></code>, and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> preserve data frame
meta attributes (#1064).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and <code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> accept lists (#1104): during initial data
cleaning you no longer need to convert lists to data frames, but can
instead feed them to <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> directly.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">.id</span></code> argument. When supplied, it creates a
new column that gives the name of each data frame (#1337, &#64;lionel-).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> respects the <code class="docutils literal notranslate"><span class="pre">ordered</span></code> attribute of factors (#1112), and
does better at comparing <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code>s (#1125). The <code class="docutils literal notranslate"><span class="pre">tz</span></code> attribute is ignored
when determining if two <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code> vectors are comparable. If the <code class="docutils literal notranslate"><span class="pre">tz</span></code> of
all inputs is the same, it’s used, otherwise its set to <code class="docutils literal notranslate"><span class="pre">UTC</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_frame()</span></code> always produces a <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code> (#1151, &#64;kevinushey)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter(x,</span> <span class="pre">TRUE,</span> <span class="pre">TRUE)</span></code> now just returns <code class="docutils literal notranslate"><span class="pre">x</span></code> (#1210),
it doesn’t internally modify the first argument (#971), and
it now works with rowwise data (#1099). It once again works with
data tables (#906).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glimpse()</span></code> also prints out the number of variables in addition to the number
of observations (&#64;ilarischeinin, #988).</p></li>
<li><p>Joins handles matrix columns better (#1230), and can join <code class="docutils literal notranslate"><span class="pre">Date</span></code> objects
with heterogenous representations (some <code class="docutils literal notranslate"><span class="pre">Date</span></code>s are integers, while other
are numeric). This also improves <code class="docutils literal notranslate"><span class="pre">all.equal()</span></code> (#1204).</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">percent_rank()</span></code> and <code class="docutils literal notranslate"><span class="pre">cume_dist()</span></code> so that missing values no longer
affect denominator (#1132).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print.tbl_df()</span></code> now displays the class for all variables, not just those
that don’t fit on the screen (#1276). It also displays duplicated column
names correctly (#1159).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print.grouped_df()</span></code> now tells you how many groups there are.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> can set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> the first column (used to segfault, #1329) and
it better protects intermediary results (avoiding random segfaults, #1231).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> on grouped data handles the special case where for the first few
groups, the result consists of a <code class="docutils literal notranslate"><span class="pre">logical</span></code> vector with only <code class="docutils literal notranslate"><span class="pre">NA</span></code>. This can
happen when the condition of an <code class="docutils literal notranslate"><span class="pre">ifelse</span></code> is an all <code class="docutils literal notranslate"><span class="pre">NA</span></code> logical vector (#958).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate.rowwise_df()</span></code> handles factors (#886) and correctly handles
0-row inputs (#1300).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_distinct()</span></code> gains an <code class="docutils literal notranslate"><span class="pre">na_rm</span></code> argument (#1052).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Progress</span></code> bar used by <code class="docutils literal notranslate"><span class="pre">do()</span></code> now respects global option
<code class="docutils literal notranslate"><span class="pre">dplyr.show_progress</span></code> (default is TRUE) so you can turn it off globally
(&#64;jimhester #1264, #1226).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> handles expressions that returning heterogenous outputs,
e.g. <code class="docutils literal notranslate"><span class="pre">median()</span></code>, which that sometimes returns an integer, and other times a
numeric (#893).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> silently drops columns corresponding to an NA (#1235).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ungroup.rowwise_df()</span></code> gives a <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code> (#936).</p></li>
<li><p>More explicit duplicated column name error message (#996).</p></li>
<li><p>When “,” is already being used as the decimal point (<code class="docutils literal notranslate"><span class="pre">getOption(&quot;OutDec&quot;)</span></code>),
use “.” as the thousands separator when printing out formatted numbers
(&#64;ilarischeinin, #988).</p></li>
</ul>
</div>
<div class="section" id="id17">
<h2>Databases<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">db_query_fields.SQLiteConnection</span></code> uses <code class="docutils literal notranslate"><span class="pre">build_sql</span></code> rather than <code class="docutils literal notranslate"><span class="pre">paste0</span></code>
(#926, &#64;NikNakk)</p></li>
<li><p>Improved handling of <code class="docutils literal notranslate"><span class="pre">log()</span></code> (#1330).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_distinct(x)</span></code> is translated to <code class="docutils literal notranslate"><span class="pre">COUNT(DISTINCT(x))</span></code> (&#64;skparkes, #873).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print(n</span> <span class="pre">=</span> <span class="pre">Inf)</span></code> now works for remote sources (#1310).</p></li>
</ul>
</div>
<div class="section" id="hybrid-evaluation">
<h2>Hybrid evaluation<a class="headerlink" href="#hybrid-evaluation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Hybrid evaluation does not take place for objects with a class (#1237).</p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">$</span></code> handling (#1134).</p></li>
<li><p>Simplified code for <code class="docutils literal notranslate"><span class="pre">lead()</span></code> and <code class="docutils literal notranslate"><span class="pre">lag()</span></code> and make sure they work properly on
factors (#955). Both respect the <code class="docutils literal notranslate"><span class="pre">default</span></code> argument (#915).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate</span></code> can set to <code class="docutils literal notranslate"><span class="pre">NULL</span></code> the first column (used to segfault, #1329).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter</span></code> on grouped data handles indices correctly (#880).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum()</span></code> issues a warning about integer overflow (#1108).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-4-2">
<h1>dplyr 0.4.2<a class="headerlink" href="#dplyr-0-4-2" title="Permalink to this headline">¶</a></h1>
<p>This is a minor release containing fixes for a number of crashes and issues identified by R CMD CHECK. There is one new “feature”: dplyr no longer complains about unrecognised attributes, and instead just copies them over to the output.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lag()</span></code> and <code class="docutils literal notranslate"><span class="pre">lead()</span></code> for grouped data were confused about indices and therefore
produced wrong results (#925, #937). <code class="docutils literal notranslate"><span class="pre">lag()</span></code> once again overrides <code class="docutils literal notranslate"><span class="pre">lag()</span></code>
instead of just the default method <code class="docutils literal notranslate"><span class="pre">lag.default()</span></code>. This is necessary due to
changes in R CMD check. To use the lag function provided by another package,
use <code class="docutils literal notranslate"><span class="pre">pkg::lag</span></code>.</p></li>
<li><p>Fixed a number of memory issues identified by valgrind.</p></li>
<li><p>Improved performance when working with large number of columns (#879).</p></li>
<li><p>Lists-cols that contain data frames now print a slightly nicer summary
(#1147)</p></li>
<li><p>Set operations give more useful error message on incompatible data frames
(#903).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all.equal()</span></code> gives the correct result when <code class="docutils literal notranslate"><span class="pre">ignore_row_order</span></code> is <code class="docutils literal notranslate"><span class="pre">TRUE</span></code>
(#1065) and <code class="docutils literal notranslate"><span class="pre">all.equal()</span></code> correctly handles character missing values (#1095).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> always produces a <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code> (#779).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> gains a test for a form of data frame corruption (#1074).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> now handles complex columns (#933).</p></li>
<li><p>Workaround for using the constructor of <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> on an unprotected object
(#998)</p></li>
<li><p>Improved performance when working with large number of columns (#879).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-4-1">
<h1>dplyr 0.4.1<a class="headerlink" href="#dplyr-0-4-1" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Don’t assume that RPostgreSQL is available.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-4-0">
<h1>dplyr 0.4.0<a class="headerlink" href="#dplyr-0-4-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id18">
<h2>New features<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">add_rownames()</span></code> turns row names into an explicit variable (#639).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code> efficiently coerces a list into a data frame (#749).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and <code class="docutils literal notranslate"><span class="pre">bind_cols()</span></code> efficiently bind a list of data frames by
row or column. <code class="docutils literal notranslate"><span class="pre">combine()</span></code> applies the same coercion rules to vectors
(it works like <code class="docutils literal notranslate"><span class="pre">c()</span></code> or <code class="docutils literal notranslate"><span class="pre">unlist()</span></code> but is consistent with the <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code>
rules).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">right_join()</span></code> (include all rows in <code class="docutils literal notranslate"><span class="pre">y</span></code>, and matching rows in <code class="docutils literal notranslate"><span class="pre">x</span></code>) and
<code class="docutils literal notranslate"><span class="pre">full_join()</span></code> (include all rows in <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>) complete the family of
mutating joins (#96).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_indices()</span></code> computes a unique integer id for each group (#771). It
can be called on a grouped_df without any arguments or on a data frame
with same arguments as <code class="docutils literal notranslate"><span class="pre">group_by()</span></code>.</p></li>
</ul>
</div>
<div class="section" id="new-vignettes">
<h2>New vignettes<a class="headerlink" href="#new-vignettes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">vignette(&quot;data_frames&quot;)</span></code> describes dplyr functions that make it easier
and faster to create and coerce data frames. It subsumes the old <code class="docutils literal notranslate"><span class="pre">memory</span></code>
vignette.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vignette(&quot;two-table&quot;)</span></code> describes how two-table verbs work in dplyr.</p></li>
</ul>
</div>
<div class="section" id="minor-improvements">
<h2>Minor improvements<a class="headerlink" href="#minor-improvements" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">data_frame()</span></code> (and <code class="docutils literal notranslate"><span class="pre">as_data_frame()</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">tbl_df()</span></code>) now explicitly
forbid columns that are data frames or matrices (#775). All columns
must be either a 1d atomic vector or a 1d list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do()</span></code> uses lazyeval to correctly evaluate its arguments in the correct
environment (#744), and new <code class="docutils literal notranslate"><span class="pre">do_()</span></code> is the SE equivalent of <code class="docutils literal notranslate"><span class="pre">do()</span></code> (#718).
You can modify grouped data in place: this is probably a bad idea but it’s
sometimes convenient (#737). <code class="docutils literal notranslate"><span class="pre">do()</span></code> on grouped data tables now passes in all
columns (not all columns except grouping vars) (#735, thanks to &#64;kismsu).
<code class="docutils literal notranslate"><span class="pre">do()</span></code> with database tables no longer potentially includes grouping
variables twice (#673). Finally, <code class="docutils literal notranslate"><span class="pre">do()</span></code> gives more consistent outputs when
there are no rows or no groups (#625).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">first()</span></code> and <code class="docutils literal notranslate"><span class="pre">last()</span></code> preserve factors, dates and times (#509).</p></li>
<li><p>Overhaul of single table verbs for data.table backend. They now all use
a consistent (and simpler) code base. This ensures that (e.g.) <code class="docutils literal notranslate"><span class="pre">n()</span></code>
now works in all verbs (#579).</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">*_join()</span></code>, you can now name only those variables that are different between
the two tables, e.g. <code class="docutils literal notranslate"><span class="pre">inner_join(x,</span> <span class="pre">y,</span> <span class="pre">c(&quot;a&quot;,</span> <span class="pre">&quot;b&quot;,</span> <span class="pre">&quot;c&quot;</span> <span class="pre">=</span> <span class="pre">&quot;d&quot;))</span></code> (#682).
If non-join columns are the same, dplyr will add <code class="docutils literal notranslate"><span class="pre">.x</span></code> and <code class="docutils literal notranslate"><span class="pre">.y</span></code>
suffixes to distinguish the source (#655).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> handles complex vectors (#436) and forbids <code class="docutils literal notranslate"><span class="pre">POSIXlt</span></code> results
(instead of crashing) (#670).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> now implements a more sophisticated algorithm so if you’re
doing multiples includes and excludes with and without names, you’re more
likely to get what you expect (#644). You’ll also get a better error
message if you supply an input that doesn’t resolve to an integer
column position (#643).</p></li>
<li><p>Printing has received a number of small tweaks. All <code class="docutils literal notranslate"><span class="pre">print()</span></code> methods
invisibly return their input so you can interleave <code class="docutils literal notranslate"><span class="pre">print()</span></code> statements into a
pipeline to see interim results. <code class="docutils literal notranslate"><span class="pre">print()</span></code> will column names of 0 row data
frames (#652), and will never print more 20 rows (i.e.
<code class="docutils literal notranslate"><span class="pre">options(dplyr.print_max)</span></code> is now 20), not 100 (#710). Row names are no
never printed since no dplyr method is guaranteed to preserve them (#669).</p>
<p><code class="docutils literal notranslate"><span class="pre">glimpse()</span></code> prints the number of observations (#692)</p>
<p><code class="docutils literal notranslate"><span class="pre">type_sum()</span></code> gains a data frame method.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> handles list output columns (#832)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> works for data tables (#717). Documentation clarifies that
slice can’t work with relational databases, and the examples show
how to achieve the same results using <code class="docutils literal notranslate"><span class="pre">filter()</span></code> (#720).</p></li>
<li><p>dplyr now requires RSQLite &gt;= 1.0. This shouldn’t affect your code
in any way (except that RSQLite now doesn’t need to be attached) but does
simplify the internals (#622).</p></li>
<li><p>Functions that need to combine multiple results into a single column
(e.g. <code class="docutils literal notranslate"><span class="pre">join()</span></code>, <code class="docutils literal notranslate"><span class="pre">bind_rows()</span></code> and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code>) are more careful about
coercion.</p>
<p>Joining factors with the same levels in the same order preserves the
original levels (#675). Joining factors with non-identical levels
generates a warning and coerces to character (#684). Joining a character
to a factor (or vice versa) generates a warning and coerces to character.
Avoid these warnings by ensuring your data is compatible before joining.</p>
<p><code class="docutils literal notranslate"><span class="pre">rbind_list()</span></code> will throw an error if you attempt to combine an integer and
factor (#751). <code class="docutils literal notranslate"><span class="pre">rbind()</span></code>ing a column full of <code class="docutils literal notranslate"><span class="pre">NA</span></code>s is allowed and just
collects the appropriate missing value for the column type being collected
(#493).</p>
<p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> is more careful about <code class="docutils literal notranslate"><span class="pre">NA</span></code>, e.g. the decision on the result
type will be delayed until the first non NA value is returned (#599).
It will complain about loss of precision coercions, which can happen for
expressions that return integers for some groups and a doubles for others
(#599).</p>
</li>
<li><p>A number of functions gained new or improved hybrid handlers: <code class="docutils literal notranslate"><span class="pre">first()</span></code>,
<code class="docutils literal notranslate"><span class="pre">last()</span></code>, <code class="docutils literal notranslate"><span class="pre">nth()</span></code> (#626), <code class="docutils literal notranslate"><span class="pre">lead()</span></code> &amp; <code class="docutils literal notranslate"><span class="pre">lag()</span></code> (#683), <code class="docutils literal notranslate"><span class="pre">%in%</span></code> (#126). That means
when you use these functions in a dplyr verb, we handle them in C++, rather
than calling back to R, and hence improving performance.</p>
<p>Hybrid <code class="docutils literal notranslate"><span class="pre">min_rank()</span></code> correctly handles <code class="docutils literal notranslate"><span class="pre">NaN</span></code> values (#726). Hybrid
implementation of <code class="docutils literal notranslate"><span class="pre">nth()</span></code> falls back to R evaluation when <code class="docutils literal notranslate"><span class="pre">n</span></code> is not
a length one integer or numeric, e.g. when it’s an expression (#734).</p>
<p>Hybrid <code class="docutils literal notranslate"><span class="pre">dense_rank()</span></code>, <code class="docutils literal notranslate"><span class="pre">min_rank()</span></code>, <code class="docutils literal notranslate"><span class="pre">cume_dist()</span></code>, <code class="docutils literal notranslate"><span class="pre">ntile()</span></code>, <code class="docutils literal notranslate"><span class="pre">row_number()</span></code>
and <code class="docutils literal notranslate"><span class="pre">percent_rank()</span></code> now preserve NAs (#774)</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter</span></code> returns its input when it has no rows or no columns (#782).</p></li>
<li><p>Join functions keep attributes (e.g. time zone information) from the
left argument for <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code> and <code class="docutils literal notranslate"><span class="pre">Date</span></code> objects (#819), and only
only warn once about each incompatibility (#798).</p></li>
</ul>
</div>
<div class="section" id="id19">
<h2>Bug fixes<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">[.tbl_df</span></code> correctly computes row names for 0-column data frames, avoiding
problems with xtable (#656). <code class="docutils literal notranslate"><span class="pre">[.grouped_df</span></code> will silently drop grouping
if you don’t include the grouping columns (#733).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_frame()</span></code> now acts correctly if the first argument is a vector to be
recycled. (#680 thanks &#64;jimhester)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter.data.table()</span></code> works if the table has a variable called “V1” (#615).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_join()</span></code> keeps columns in original order (#684).
Joining a factor to a character vector doesn’t segfault (#688).
<code class="docutils literal notranslate"><span class="pre">*_join</span></code> functions can now deal with multiple encodings (#769),
and correctly name results (#855).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_join.data.table()</span></code> works when data.table isn’t attached (#786).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> on a data table preserves original order of the rows (#623).
<code class="docutils literal notranslate"><span class="pre">group_by()</span></code> supports variables with more than 39 characters thanks to
a fix in lazyeval (#705). It gives meaningful error message when a variable
is not found in the data frame (#716).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">grouped_df()</span></code> requires <code class="docutils literal notranslate"><span class="pre">vars</span></code> to be a list of symbols (#665).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min(.,na.rm</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> works with <code class="docutils literal notranslate"><span class="pre">Date</span></code>s built on numeric vectors (#755).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rename_()</span></code> generic gets missing <code class="docutils literal notranslate"><span class="pre">.dots</span></code> argument (#708).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_number()</span></code>, <code class="docutils literal notranslate"><span class="pre">min_rank()</span></code>, <code class="docutils literal notranslate"><span class="pre">percent_rank()</span></code>, <code class="docutils literal notranslate"><span class="pre">dense_rank()</span></code>, <code class="docutils literal notranslate"><span class="pre">ntile()</span></code> and
<code class="docutils literal notranslate"><span class="pre">cume_dist()</span></code> handle data frames with 0 rows (#762). They all preserve
missing values (#774). <code class="docutils literal notranslate"><span class="pre">row_number()</span></code> doesn’t segfault when giving an external
variable with the wrong number of variables (#781).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_indices</span></code> handles the edge case when there are no variables (#867).</p></li>
<li><p>Removed bogus <code class="docutils literal notranslate"><span class="pre">NAs</span> <span class="pre">introduced</span> <span class="pre">by</span> <span class="pre">coercion</span> <span class="pre">to</span> <span class="pre">integer</span> <span class="pre">range</span></code> on 32-bit Windows (#2708).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-3-0-1">
<h1>dplyr 0.3.0.1<a class="headerlink" href="#dplyr-0-3-0-1" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fixed problem with test script on Windows.</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-3">
<h1>dplyr 0.3<a class="headerlink" href="#dplyr-0-3" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id20">
<h2>New functions<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">between()</span></code> vector function efficiently determines if numeric values fall
in a range, and is translated to special form for SQL (#503).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count()</span></code> makes it even easier to do (weighted) counts (#358).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_frame()</span></code> by &#64;kevinushey is a nicer way of creating data frames.
It never coerces column types (no more <code class="docutils literal notranslate"><span class="pre">stringsAsFactors</span> <span class="pre">=</span> <span class="pre">FALSE</span></code>!),
never munges column names, and never adds row names. You can use previously
defined columns to compute new columns (#376).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code> returns distinct (unique) rows of a tbl (#97). Supply
additional variables to return the first row for each unique combination
of variables.</p></li>
<li><p>Set operations, <code class="docutils literal notranslate"><span class="pre">intersect()</span></code>, <code class="docutils literal notranslate"><span class="pre">union()</span></code> and <code class="docutils literal notranslate"><span class="pre">setdiff()</span></code> now have methods
for data frames, data tables and SQL database tables (#93). They pass their
arguments down to the base functions, which will ensure they raise errors if
you pass in two many arguments.</p></li>
<li><p>Joins (e.g. <code class="docutils literal notranslate"><span class="pre">left_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">inner_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">semi_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">anti_join()</span></code>)
now allow you to join on different variables in <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> tables by
supplying a named vector to <code class="docutils literal notranslate"><span class="pre">by</span></code>. For example, <code class="docutils literal notranslate"><span class="pre">by</span> <span class="pre">=</span> <span class="pre">c(&quot;a&quot;</span> <span class="pre">=</span> <span class="pre">&quot;b&quot;)</span></code> joins
<code class="docutils literal notranslate"><span class="pre">x.a</span></code> to <code class="docutils literal notranslate"><span class="pre">y.b</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_groups()</span></code> function tells you how many groups in a tbl. It returns
1 for ungrouped data. (#477)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transmute()</span></code> works like <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> but drops all variables that you didn’t
explicitly refer to (#302).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rename()</span></code> makes it easy to rename variables - it works similarly to
<code class="docutils literal notranslate"><span class="pre">select()</span></code> but it preserves columns that you didn’t otherwise touch.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> allows you to selecting rows by position (#226). It includes
positive integers, drops negative integers and you can use expression like
<code class="docutils literal notranslate"><span class="pre">n()</span></code>.</p></li>
</ul>
</div>
<div class="section" id="programming-with-dplyr-non-standard-evaluation">
<h2>Programming with dplyr (non-standard evaluation)<a class="headerlink" href="#programming-with-dplyr-non-standard-evaluation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>You can now program with dplyr - every function that does non-standard
evaluation (NSE) has a standard evaluation (SE) version ending in <code class="docutils literal notranslate"><span class="pre">_</span></code>.
This is powered by the new lazyeval package which provides all the tools
needed to implement NSE consistently and correctly.</p></li>
<li><p>See <code class="docutils literal notranslate"><span class="pre">vignette(&quot;nse&quot;)</span></code> for full details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">regroup()</span></code> is deprecated. Please use the more flexible <code class="docutils literal notranslate"><span class="pre">group_by_()</span></code>
instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise_each_q()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate_each_q()</span></code> are deprecated. Please use
<code class="docutils literal notranslate"><span class="pre">summarise_each_()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate_each_()</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">funs_q</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">funs_</span></code>.</p></li>
</ul>
</div>
<div class="section" id="removed-and-deprecated-features">
<h2>Removed and deprecated features<a class="headerlink" href="#removed-and-deprecated-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">%.%</span></code> has been deprecated: please use <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> instead. <code class="docutils literal notranslate"><span class="pre">chain()</span></code> is
defunct. (#518)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter.numeric()</span></code> removed. Need to figure out how to reimplement with
new lazy eval system.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">Progress</span></code> refclass is no longer exported to avoid conflicts with shiny.
Instead use <code class="docutils literal notranslate"><span class="pre">progress_estimated()</span></code> (#535).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_monetdb()</span></code> is now implemented in MonetDB.R, not dplyr.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show_sql()</span></code> and <code class="docutils literal notranslate"><span class="pre">explain_sql()</span></code> and matching global options <code class="docutils literal notranslate"><span class="pre">dplyr.show_sql</span></code>
and <code class="docutils literal notranslate"><span class="pre">dplyr.explain_sql</span></code> have been removed. Instead use <code class="docutils literal notranslate"><span class="pre">show_query()</span></code> and
<code class="docutils literal notranslate"><span class="pre">explain()</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id21">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Main verbs now have individual documentation pages (#519).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> is simply re-exported from magrittr, instead of creating a local copy
(#496, thanks to &#64;jimhester)</p></li>
<li><p>Examples now use <code class="docutils literal notranslate"><span class="pre">nycflights13</span></code> instead of <code class="docutils literal notranslate"><span class="pre">hflights</span></code> because it the variables
have better names and there are a few interlinked tables (#562). <code class="docutils literal notranslate"><span class="pre">Lahman</span></code> and
<code class="docutils literal notranslate"><span class="pre">nycflights13</span></code> are (once again) suggested packages. This means many examples
will not work unless you explicitly install them with
<code class="docutils literal notranslate"><span class="pre">install.packages(c(&quot;Lahman&quot;,</span> <span class="pre">&quot;nycflights13&quot;))</span></code> (#508). dplyr now depends on
Lahman 3.0.1. A number of examples have been updated to reflect modified
field names (#586).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">do()</span></code> now displays the progress bar only when used in interactive prompts
and not when knitting (#428, &#64;jimhester).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">glimpse()</span></code> now prints a trailing new line (#590).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> has more consistent behaviour when grouping by constants:
it creates a new column with that value (#410). It renames grouping
variables (#410). The first argument is now <code class="docutils literal notranslate"><span class="pre">.data</span></code> so you can create
new groups with name x (#534).</p></li>
<li><p>Now instead of overriding <code class="docutils literal notranslate"><span class="pre">lag()</span></code>, dplyr overrides <code class="docutils literal notranslate"><span class="pre">lag.default()</span></code>,
which should avoid clobbering lag methods added by other packages.
(#277).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate(data,</span> <span class="pre">a</span> <span class="pre">=</span> <span class="pre">NULL)</span></code> removes the variable <code class="docutils literal notranslate"><span class="pre">a</span></code> from the returned
dataset (#462).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trunc_mat()</span></code> and hence <code class="docutils literal notranslate"><span class="pre">print.tbl_df()</span></code> and friends gets a <code class="docutils literal notranslate"><span class="pre">width</span></code> argument
to control the default output width. Set <code class="docutils literal notranslate"><span class="pre">options(dplyr.width</span> <span class="pre">=</span> <span class="pre">Inf)</span></code> to
always show all columns (#589).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> gains <code class="docutils literal notranslate"><span class="pre">one_of()</span></code> selector: this allows you to select variables
provided by a character vector (#396). It fails immediately if you give an
empty pattern to <code class="docutils literal notranslate"><span class="pre">starts_with()</span></code>,  <code class="docutils literal notranslate"><span class="pre">ends_with()</span></code>, <code class="docutils literal notranslate"><span class="pre">contains()</span></code> or <code class="docutils literal notranslate"><span class="pre">matches()</span></code>
(#481, &#64;leondutoit). Fixed buglet in <code class="docutils literal notranslate"><span class="pre">select()</span></code> so that you can now create
variables called <code class="docutils literal notranslate"><span class="pre">val</span></code> (#564).</p></li>
<li><p>Switched from RC to R6.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tally()</span></code> and <code class="docutils literal notranslate"><span class="pre">top_n()</span></code> work consistently: neither accidentally
evaluates the the <code class="docutils literal notranslate"><span class="pre">wt</span></code> param. (#426, &#64;mnel)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rename</span></code> handles grouped data (#640).</p></li>
</ul>
</div>
<div class="section" id="minor-improvements-and-bug-fixes-by-backend">
<h2>Minor improvements and bug fixes by backend<a class="headerlink" href="#minor-improvements-and-bug-fixes-by-backend" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id22">
<h3>Databases<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Correct SQL generation for <code class="docutils literal notranslate"><span class="pre">paste()</span></code> when used with the collapse parameter
targeting a Postgres database. (&#64;rbdixon, #1357)</p></li>
<li><p>The db backend system has been completely overhauled in order to make
it possible to add backends in other packages, and to support a much
wider range of databases. See <code class="docutils literal notranslate"><span class="pre">vignette(&quot;new-sql-backend&quot;)</span></code> for instruction
on how to create your own (#568).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">src_mysql()</span></code> gains a method for <code class="docutils literal notranslate"><span class="pre">explain()</span></code>.</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> creates a new variable that uses a window function,
automatically wrap the result in a subquery (#484).</p></li>
<li><p>Correct SQL generation for <code class="docutils literal notranslate"><span class="pre">first()</span></code> and <code class="docutils literal notranslate"><span class="pre">last()</span></code> (#531).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">order_by()</span></code> now works in conjunction with window functions in databases
that support them.</p></li>
</ul>
</div>
<div class="section" id="data-frames-tbl-df">
<h3>Data frames/<code class="docutils literal notranslate"><span class="pre">tbl_df</span></code><a class="headerlink" href="#data-frames-tbl-df" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>All verbs now understand how to work with <code class="docutils literal notranslate"><span class="pre">difftime()</span></code> (#390) and
<code class="docutils literal notranslate"><span class="pre">AsIs</span></code> (#453) objects. They all check that colnames are unique (#483), and
are more robust when columns are not present (#348, #569, #600).</p></li>
<li><p>Hybrid evaluation bugs fixed:</p>
<ul>
<li><p>Call substitution stopped too early when a sub expression contained a
<code class="docutils literal notranslate"><span class="pre">$</span></code> (#502).</p></li>
<li><p>Handle <code class="docutils literal notranslate"><span class="pre">::</span></code> and <code class="docutils literal notranslate"><span class="pre">:::</span></code> (#412).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cumany()</span></code> and <code class="docutils literal notranslate"><span class="pre">cumall()</span></code> properly handle <code class="docutils literal notranslate"><span class="pre">NA</span></code> (#408).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nth()</span></code> now correctly preserve the class when using dates, times and
factors (#509).</p></li>
<li><p>no longer substitutes within <code class="docutils literal notranslate"><span class="pre">order_by()</span></code> because <code class="docutils literal notranslate"><span class="pre">order_by()</span></code> needs to do
its own NSE (#169).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">[.tbl_df</span></code> always returns a tbl_df (i.e. <code class="docutils literal notranslate"><span class="pre">drop</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> is the default)
(#587, #610). <code class="docutils literal notranslate"><span class="pre">[.grouped_df</span></code> preserves important output attributes (#398).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> keeps the grouping structure of grouped data (#491, #605),
and preserves input classes (#563).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contains()</span></code> accidentally matched regular expressions, now it passes
<code class="docutils literal notranslate"><span class="pre">fixed</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> to <code class="docutils literal notranslate"><span class="pre">grep()</span></code> (#608).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> asserts all variables are white listed (#566).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> makes a <code class="docutils literal notranslate"><span class="pre">rowwise_df</span></code> when given a <code class="docutils literal notranslate"><span class="pre">rowwise_df</span></code> (#463).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_all()</span></code> creates <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code> objects instead of raw <code class="docutils literal notranslate"><span class="pre">data.frame</span></code>s.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">select()</span></code> doesn’t match any variables, it returns a 0-column data frame,
instead of the original (#498). It no longer fails when if some columns
are not named (#492)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> and <code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> methods for data.frames exported.
(#405, &#64;alyst)</p></li>
<li><p>A grouped data frame may have 0 groups (#486). Grouped df objects
gain some basic validity checking, which should prevent some crashes
related to corrupt <code class="docutils literal notranslate"><span class="pre">grouped_df</span></code> objects made by <code class="docutils literal notranslate"><span class="pre">rbind()</span></code> (#606).</p></li>
<li><p>More coherence when joining columns of compatible but different types,
e.g. when joining a character vector and a factor (#455),
or a numeric and integer (#450)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> works for on zero-row grouped data frame, and
with list columns (#555).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LazySubset</span></code> was confused about input data size (#452).</p></li>
<li><p>Internal <code class="docutils literal notranslate"><span class="pre">n_distinct()</span></code> is stricter about it’s inputs: it requires one symbol
which must be from the data frame (#567).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_*()</span></code> handle data frames with 0 rows (#597). They fill character
vector columns with <code class="docutils literal notranslate"><span class="pre">NA</span></code> instead of blanks (#595).  They work with
list columns (#463).</p></li>
<li><p>Improved handling of encoding for column names (#636).</p></li>
<li><p>Improved handling of hybrid evaluation re $ and &#64; (#645).</p></li>
</ul>
</div>
<div class="section" id="data-tables">
<h3>Data tables<a class="headerlink" href="#data-tables" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fix major omission in <code class="docutils literal notranslate"><span class="pre">tbl_dt()</span></code> and <code class="docutils literal notranslate"><span class="pre">grouped_dt()</span></code> methods - I was
accidentally doing a deep copy on every result :(</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> and <code class="docutils literal notranslate"><span class="pre">group_by()</span></code> now retain over-allocation when working with
data.tables (#475, &#64;arunsrinivasan).</p></li>
<li><p>joining two data.tables now correctly dispatches to data table methods,
and result is a data table (#470)</p></li>
</ul>
</div>
<div class="section" id="cubes">
<h3>Cubes<a class="headerlink" href="#cubes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">summarise.tbl_cube()</span></code> works with single grouping variable (#480).</p></li>
</ul>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-2">
<h1>dplyr 0.2<a class="headerlink" href="#dplyr-0-2" title="Permalink to this headline">¶</a></h1>
<div class="section" id="piping">
<h2>Piping<a class="headerlink" href="#piping" title="Permalink to this headline">¶</a></h2>
<p>dplyr now imports <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> from magrittr (#330). I recommend that you use this instead of <code class="docutils literal notranslate"><span class="pre">%.%</span></code> because it is easier to type (since you can hold down the shift key) and is more flexible. With you <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code>, you can control which argument on the RHS recieves the LHS by using the pronoun <code class="docutils literal notranslate"><span class="pre">.</span></code>. This makes <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> more useful with base R functions because they don’t always take the data frame as the first argument. For example you could pipe <code class="docutils literal notranslate"><span class="pre">mtcars</span></code> to <code class="docutils literal notranslate"><span class="pre">xtabs()</span></code> with:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mtcars %&gt;% xtabs( ~ cyl + vs, data = .)
</pre></div>
</div>
<p>Thanks to &#64;smbache for the excellent magrittr package. dplyr only provides <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> from magrittr, but it contains many other useful functions. To use them, load <code class="docutils literal notranslate"><span class="pre">magrittr</span></code> explicitly: <code class="docutils literal notranslate"><span class="pre">library(magrittr)</span></code>. For more details, see <code class="docutils literal notranslate"><span class="pre">vignette(&quot;magrittr&quot;)</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">%.%</span></code> will be deprecated in a future version of dplyr, but it won’t happen for a while. I’ve also deprecated <code class="docutils literal notranslate"><span class="pre">chain()</span></code> to encourage a single style of dplyr usage: please use <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> instead.</p>
</div>
<div class="section" id="do">
<h2>Do<a class="headerlink" href="#do" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">do()</span></code> has been completely overhauled. There are now two ways to use it, either with multiple named arguments or a single unnamed arguments. <code class="docutils literal notranslate"><span class="pre">group_by()</span></code> + <code class="docutils literal notranslate"><span class="pre">do()</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">plyr::dlply</span></code>, except it always returns a data frame.</p>
<p>If you use named arguments, each argument becomes a list-variable in the output. A list-variable can contain any arbitrary R object so it’s particularly well suited for storing models.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>library(dplyr)
models &lt;- mtcars %&gt;% group_by(cyl) %&gt;% do(lm = lm(mpg ~ wt, data = .))
models %&gt;% summarise(rsq = summary(lm)$r.squared)
</pre></div>
</div>
<p>If you use an unnamed argument, the result should be a data frame. This allows you to apply arbitrary functions to each group.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mtcars %&gt;% group_by(cyl) %&gt;% do(head(., 1))
</pre></div>
</div>
<p>Note the use of the <code class="docutils literal notranslate"><span class="pre">.</span></code> pronoun to refer to the data in the current group.</p>
<p><code class="docutils literal notranslate"><span class="pre">do()</span></code> also has an automatic progress bar. It appears if the computation takes longer than 5 seconds and lets you know (approximately) how much longer the job will take to complete.</p>
</div>
<div class="section" id="new-verbs">
<h2>New verbs<a class="headerlink" href="#new-verbs" title="Permalink to this headline">¶</a></h2>
<p>dplyr 0.2 adds three new verbs:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">glimpse()</span></code> makes it possible to see all the columns in a tbl,
displaying as much data for each variable as can be fit on a single line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_n()</span></code> randomly samples a fixed number of rows from a tbl;
<code class="docutils literal notranslate"><span class="pre">sample_frac()</span></code> randomly samples a fixed fraction of rows. Only works
for local data frames and data tables (#202).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise_each()</span></code> and <code class="docutils literal notranslate"><span class="pre">mutate_each()</span></code> make it easy to apply one or more
functions to multiple columns in a tbl (#178).</p></li>
</ul>
</div>
<div class="section" id="id23">
<h2>Minor improvements<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>If you load plyr after dplyr, you’ll get a message suggesting that you
load plyr first (#347).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">as.tbl_cube()</span></code> gains a method for matrices (#359, &#64;paulstaab)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">compute()</span></code> gains <code class="docutils literal notranslate"><span class="pre">temporary</span></code> argument so you can control whether the
results are temporary or permanent (#382, &#64;cpsievert)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> now defaults to <code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> so that it sets the grouping
variables rather than adding to the existing list. I think this is how
most people expected <code class="docutils literal notranslate"><span class="pre">group_by</span></code> to work anyway, so it’s unlikely to
cause problems (#385).</p></li>
<li><p>Support for <a class="reference external" href="http://www.monetdb.org">MonetDB</a> tables with <code class="docutils literal notranslate"><span class="pre">src_monetdb()</span></code>
(#8, thanks to &#64;hannesmuehleisen).</p></li>
<li><p>New vignettes:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">memory</span></code> vignette which discusses how dplyr minimises memory usage
for local data frames (#198).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new-sql-backend</span></code> vignette which discusses how to add a new
SQL backend/source to dplyr.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">changes()</span></code> output more clearly distinguishes which columns were added or
deleted.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">explain()</span></code> is now generic.</p></li>
<li><p>dplyr is more careful when setting the keys of data tables, so it never
accidentally modifies an object that it doesn’t own. It also avoids
unnecessary key setting which negatively affected performance.
(#193, #255).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print()</span></code> methods for <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code>, <code class="docutils literal notranslate"><span class="pre">tbl_dt</span></code> and <code class="docutils literal notranslate"><span class="pre">tbl_sql</span></code> gain <code class="docutils literal notranslate"><span class="pre">n</span></code> argument to
control the number of rows printed (#362). They also works better when you have
columns containing lists of complex objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_number()</span></code> can be called without arguments, in which case it returns
the same as <code class="docutils literal notranslate"><span class="pre">1:n()</span></code> (#303).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;comment&quot;</span></code> attribute is allowed (white listed) as well as names (#346).</p></li>
<li><p>hybrid versions of <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">max</span></code>, <code class="docutils literal notranslate"><span class="pre">mean</span></code>, <code class="docutils literal notranslate"><span class="pre">var</span></code>, <code class="docutils literal notranslate"><span class="pre">sd</span></code> and <code class="docutils literal notranslate"><span class="pre">sum</span></code>
handle the <code class="docutils literal notranslate"><span class="pre">na.rm</span></code> argument (#168). This should yield substantial
performance improvements for those functions.</p></li>
<li><p>Special case for call to <code class="docutils literal notranslate"><span class="pre">arrange()</span></code> on a grouped data frame with no arguments. (#369)</p></li>
</ul>
</div>
<div class="section" id="id24">
<h2>Bug fixes<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Code adapted to Rcpp &gt; 0.11.1</p></li>
<li><p>internal <code class="docutils literal notranslate"><span class="pre">DataDots</span></code> class protects against missing variables in verbs (#314),
including the case where <code class="docutils literal notranslate"><span class="pre">...</span></code> is missing. (#338)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all.equal.data.frame</span></code> from base is no longer bypassed. we now have
<code class="docutils literal notranslate"><span class="pre">all.equal.tbl_df</span></code> and <code class="docutils literal notranslate"><span class="pre">all.equal.tbl_dt</span></code> methods (#332).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> correctly handles NA in numeric vectors (#331) and 0 row
data frames (#289).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">copy_to.src_mysql()</span></code> now works on windows (#323)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">*_join()</span></code> doesn’t reorder column names (#324).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_all()</span></code> is stricter and only accepts list of data frames (#288)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_*</span></code> propagates time zone information for <code class="docutils literal notranslate"><span class="pre">POSIXct</span></code> columns (#298).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_*</span></code> is less strict about type promotion. The numeric <code class="docutils literal notranslate"><span class="pre">Collecter</span></code> allows
collection of integer and logical vectors. The integer <code class="docutils literal notranslate"><span class="pre">Collecter</span></code> also collects
logical values (#321).</p></li>
<li><p>internal <code class="docutils literal notranslate"><span class="pre">sum</span></code> correctly handles integer (under/over)flow (#308).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> checks consistency of outputs (#300) and drops <code class="docutils literal notranslate"><span class="pre">names</span></code>
attribute of output columns (#357).</p></li>
<li><p>join functions throw error instead of crashing when there are no common
variables between the data frames, and also give a better error message when
only one data frame has a by variable (#371).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_n()</span></code> returns <code class="docutils literal notranslate"><span class="pre">n</span></code> rows instead of <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">-</span> <span class="pre">1</span></code> (&#64;leondutoit, #367).</p></li>
<li><p>SQL translation always evaluates subsetting operators (<code class="docutils literal notranslate"><span class="pre">$</span></code>, <code class="docutils literal notranslate"><span class="pre">[</span></code>, <code class="docutils literal notranslate"><span class="pre">[[</span></code>)
locally. (#318).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> now renames variables in remote sql tbls (#317) and
implicitly adds grouping variables (#170).</p></li>
<li><p>internal <code class="docutils literal notranslate"><span class="pre">grouped_df_impl</span></code> function errors if there are no variables to group by (#398).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_distinct</span></code> did not treat NA correctly in the numeric case #384.</p></li>
<li><p>Some compiler warnings triggered by -Wall or -pedantic have been eliminated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by</span></code> only creates one group for NA (#401).</p></li>
<li><p>Hybrid evaluator did not evaluate expression in correct environment (#403).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-1-3">
<h1>dplyr 0.1.3<a class="headerlink" href="#dplyr-0-1-3" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id25">
<h2>Bug fixes<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> actually renames columns in a data table (#284).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_all()</span></code> and <code class="docutils literal notranslate"><span class="pre">rbind_list()</span></code> now handle missing values in factors (#279).</p></li>
<li><p>SQL joins now work better if names duplicated in both x and y tables (#310).</p></li>
<li><p>Builds against Rcpp 0.11.1</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> correctly works with the vars attribute (#309).</p></li>
<li><p>Internal code is stricter when deciding if a data frame is grouped (#308):
this avoids a number of situations which previously caused problems.</p></li>
<li><p>More data frame joins work with missing values in keys (#306).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-1-2">
<h1>dplyr 0.1.2<a class="headerlink" href="#dplyr-0-1-2" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id26">
<h2>New features<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code> is substantially more powerful. You can use named arguments to
rename existing variables, and new functions <code class="docutils literal notranslate"><span class="pre">starts_with()</span></code>, <code class="docutils literal notranslate"><span class="pre">ends_with()</span></code>,
<code class="docutils literal notranslate"><span class="pre">contains()</span></code>, <code class="docutils literal notranslate"><span class="pre">matches()</span></code> and <code class="docutils literal notranslate"><span class="pre">num_range()</span></code> to select variables based on
their names. It now also makes a shallow copy, substantially reducing its
memory impact (#158, #172, #192, #232).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarize()</span></code> added as alias for <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> for people from countries
that don’t don’t spell things correctly ;) (#245)</p></li>
</ul>
</div>
<div class="section" id="id27">
<h2>Bug fixes<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> now fails when given anything other than a logical vector, and
correctly handles missing values (#249). <code class="docutils literal notranslate"><span class="pre">filter.numeric()</span></code> proxies
<code class="docutils literal notranslate"><span class="pre">stats::filter()</span></code> so you can continue to use <code class="docutils literal notranslate"><span class="pre">filter()</span></code> function with
numeric inputs (#264).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> correctly uses newly created variables (#259).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> correctly propagates attributes (#265) and <code class="docutils literal notranslate"><span class="pre">mutate.data.frame()</span></code>
correctly mutates the same variable repeatedly (#243).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lead()</span></code> and <code class="docutils literal notranslate"><span class="pre">lag()</span></code> preserve attributes, so they now work with
dates, times and factors (#166).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n()</span></code> never accepts arguments (#223).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">row_number()</span></code> gives correct results (#227).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rbind_all()</span></code> silently ignores data frames with 0 rows or 0 columns (#274).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> orders the result (#242). It also checks that columns
are of supported types (#233, #276).</p></li>
<li><p>The hybrid evaluator did not handle some expressions correctly, for
example in <code class="docutils literal notranslate"><span class="pre">if(n()</span> <span class="pre">&gt;</span> <span class="pre">5)</span> <span class="pre">1</span> <span class="pre">else</span> <span class="pre">2</span></code> the subexpression <code class="docutils literal notranslate"><span class="pre">n()</span></code> was not
substituted correctly. It also correctly processes <code class="docutils literal notranslate"><span class="pre">$</span></code> (#278).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code> checks that all columns are of supported types (#266). It also
handles list columns (#282).</p></li>
<li><p>Working towards Solaris compatibility.</p></li>
<li><p>Benchmarking vignette temporarily disabled due to microbenchmark
problems reported by BDR.</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="dplyr-0-1-1">
<h1>dplyr 0.1.1<a class="headerlink" href="#dplyr-0-1-1" title="Permalink to this headline">¶</a></h1>
<div class="section" id="improvements">
<h2>Improvements<a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>new <code class="docutils literal notranslate"><span class="pre">location()</span></code> and <code class="docutils literal notranslate"><span class="pre">changes()</span></code> functions which provide more information
about how data frames are stored in memory so that you can see what
gets copied.</p></li>
<li><p>renamed <code class="docutils literal notranslate"><span class="pre">explain_tbl()</span></code> to <code class="docutils literal notranslate"><span class="pre">explain()</span></code> (#182).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tally()</span></code> gains <code class="docutils literal notranslate"><span class="pre">sort</span></code> argument to sort output so highest counts
come first (#173).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ungroup.grouped_df()</span></code>, <code class="docutils literal notranslate"><span class="pre">tbl_df()</span></code>, <code class="docutils literal notranslate"><span class="pre">as.data.frame.tbl_df()</span></code> now only
make shallow copies of their inputs (#191).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">benchmark-baseball</span></code> vignette now contains fairer (including grouping
times) comparisons with <code class="docutils literal notranslate"><span class="pre">data.table</span></code>. (#222)</p></li>
</ul>
</div>
<div class="section" id="id28">
<h2>Bug fixes<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> (#221) and <code class="docutils literal notranslate"><span class="pre">summarise()</span></code> (#194) correctly propagate attributes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code> throws an error when asked to summarise an unknown variable
instead of crashing (#208).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group_by()</span></code> handles factors with missing values (#183).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">filter()</span></code> handles scalar results (#217) and better handles scoping, e.g.
<code class="docutils literal notranslate"><span class="pre">filter(.,</span> <span class="pre">variable)</span></code> where <code class="docutils literal notranslate"><span class="pre">variable</span></code> is defined in the function that calls
<code class="docutils literal notranslate"><span class="pre">filter</span></code>. It also handles <code class="docutils literal notranslate"><span class="pre">T</span></code> and <code class="docutils literal notranslate"><span class="pre">F</span></code> as aliases to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> and <code class="docutils literal notranslate"><span class="pre">FALSE</span></code>
if there are no <code class="docutils literal notranslate"><span class="pre">T</span></code> or <code class="docutils literal notranslate"><span class="pre">F</span></code> variables in the data or in the scope.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">select.grouped_df</span></code> fails when the grouping variables are not included
in the selected variables (#170)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">all.equal.data.frame()</span></code> handles a corner case where the data frame has
<code class="docutils literal notranslate"><span class="pre">NULL</span></code> names (#217)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code> gives informative error message on unsupported types (#179)</p></li>
<li><p>dplyr source package no longer includes pandas benchmark, reducing
download size from 2.8 MB to 0.5 MB.</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./temporal/renv/library/R-4.1/aarch64-apple-darwin20/dplyr"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Quan Nguyen<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>