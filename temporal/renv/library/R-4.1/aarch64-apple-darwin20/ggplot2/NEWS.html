
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ggplot2 3.3.6 &#8212; Temporal and sequential analysis - LASI 2022</title>
    
  <link href="../../../../../../_static/css/theme.css" rel="stylesheet">
  <link href="../../../../../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../../../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../../../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../../../../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../../../../../" id="documentation_options" src="../../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../../_static/jquery.js"></script>
    <script src="../../../../../../_static/underscore.js"></script>
    <script src="../../../../../../_static/doctools.js"></script>
    <script src="../../../../../../_static/togglebutton.js"></script>
    <script src="../../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../../../../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../../../../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../../../../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../../../../../_static/solar_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Temporal and sequential analysis - LASI 2022</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../../../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Lectures
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lecture1.html">
   Lecture 1: Clustering of sequential data in education
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lecture2.html">
   Lecture 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lecture3.html">
   Lecture 3
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Labs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lab1.html">
   Lab 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lab2.html">
   Lab 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../../../../../Lab3.html">
   Lab 3
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Quan Nguyen<br>Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../../../../../_sources/temporal/renv/library/R-4.1/aarch64-apple-darwin20/ggplot2/NEWS.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/quan3010/temporal_analysis"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/quan3010/temporal_analysis/issues/new?title=Issue%20on%20page%20%2Ftemporal/renv/library/R-4.1/aarch64-apple-darwin20/ggplot2/NEWS.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   ggplot2 3.3.6
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-3-5">
   ggplot2 3.3.5
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-3-4">
   ggplot2 3.3.4
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features">
     Features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#fixes">
     Fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-3-3">
   ggplot2 3.3.3
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-3-2">
   ggplot2 3.3.2
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-3-1">
   ggplot2 3.3.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-3-0">
   ggplot2 3.3.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#breaking-changes">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#new-features">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extensions">
     Extensions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-improvements-and-bug-fixes">
     Minor improvements and bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-2-1">
   ggplot2 3.2.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-2-0">
   ggplot2 3.2.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id1">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     Extensions
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id4">
     Minor improvements and bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-1-0">
   ggplot2 3.1.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-improvements-and-fixes">
     Minor improvements and fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-3-0-0">
   ggplot2 3.0.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id7">
     Breaking changes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tidy-evaluation">
     Tidy evaluation
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#sf">
       sf
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id8">
     New features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#layers-geoms-stats-and-position-adjustments">
       Layers: geoms, stats, and position adjustments
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#scales-and-guides">
       Scales and guides
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#margins">
       Margins
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extension-points">
     Extension points
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#minor-bug-fixes-and-improvements">
     Minor bug fixes and improvements
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#faceting">
       Faceting
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#scales">
       Scales
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#layers">
       Layers
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#coords">
       Coords
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#themes">
       Themes
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#guides">
       Guides
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#other">
       Other
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-2-2-1">
   ggplot2 2.2.1
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-2-2-0">
   ggplot2 2.2.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#major-new-features">
     Major new features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#subtitle-and-caption">
       Subtitle and caption
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#stacking">
       Stacking
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id9">
       Layers
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#facetting">
       Facetting
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#id10">
       Extensions
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id11">
     Scales
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#continuous-scales">
       Continuous scales
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#date-time">
       Date time
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#discrete-scales">
       Discrete scales
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id12">
     Themes
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bug-fixes-and-minor-improvements">
     Bug fixes and minor improvements
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-2-1-0">
   ggplot2 2.1.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id13">
     New features
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#bug-fixes">
     Bug fixes
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#ggplot2-2-0-0">
   ggplot2 2.0.0
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#major-changes">
     Major changes
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#extensibility">
       Extensibility
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#text">
       Text
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#deprecated-features">
       Deprecated features
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#default-appearance">
       Default appearance
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#new-and-updated-themes">
       New and updated themes
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#labelling">
       Labelling
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#documentation">
     Documentation
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data">
     Data
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id14">
     Bug fixes and minor improvements
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-3-6">
<h1>ggplot2 3.3.6<a class="headerlink" href="#ggplot2-3-3-6" title="Permalink to this headline">¶</a></h1>
<p>This is a very small release only applying an internal change to comply with
R 4.2 and its deprecation of <code class="docutils literal notranslate"><span class="pre">default.stringsAsFactors()</span></code>. There are no user
facing changes and no breaking changes.</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-3-5">
<h1>ggplot2 3.3.5<a class="headerlink" href="#ggplot2-3-3-5" title="Permalink to this headline">¶</a></h1>
<p>This is a very small release focusing on fixing a couple of untenable issues
that surfaced with the 3.3.4 release</p>
<ul class="simple">
<li><p>Revert changes made in #4434 (apply transform to intercept in <code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code>)
as it introduced undesirable issues far worse than the bug it fixed
(&#64;thomasp85, #4514)</p></li>
<li><p>Fixes an issue in <code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> when producing emf/wmf files (&#64;yutannihilation,
#4521)</p></li>
<li><p>Warn when grDevices specific arguments are passed to ragg devices (&#64;thomasp85,
#4524)</p></li>
<li><p>Fix an issue where <code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code> was reporting that it is non-linear
even when data is provided in projected coordinates (&#64;clauswilke, #4527)</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-3-4">
<h1>ggplot2 3.3.4<a class="headerlink" href="#ggplot2-3-3-4" title="Permalink to this headline">¶</a></h1>
<p>This is a larger patch release fixing a huge number of bugs and introduces a
small selection of feature refinements.</p>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Alt-text can now be added to a plot using the <code class="docutils literal notranslate"><span class="pre">alt</span></code> label, i.e
<code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">labs(alt</span> <span class="pre">=</span> <span class="pre">...)</span></code>. Currently this alt text is not automatically propagated,
but we plan to integrate into Shiny, RMarkdown, and other tools in the future.
(&#64;thomasp85, #4477)</p></li>
<li><p>Add support for the BrailleR package for creating descriptions of the plot
when rendered (&#64;thomasp85, #4459)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code> now has an argument <code class="docutils literal notranslate"><span class="pre">default_crs</span></code> that specifies the coordinate
reference system (CRS) for non-sf layers and scale/coord limits. This argument
defaults to <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, which means non-sf layers are assumed to be in projected
coordinates, as in prior ggplot2 versions. Setting <code class="docutils literal notranslate"><span class="pre">default_crs</span> <span class="pre">=</span> <span class="pre">sf::st_crs(4326)</span></code>
provides a simple way to interpret x and y positions as longitude and latitude,
regardless of the CRS used by <code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code>. Authors of extension packages
implementing <code class="docutils literal notranslate"><span class="pre">stat_sf()</span></code>-like functionality are encouraged to look at the source
code of <code class="docutils literal notranslate"><span class="pre">stat_sf()</span></code>’s <code class="docutils literal notranslate"><span class="pre">compute_group()</span></code> function to see how to provide scale-limit
hints to <code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code> (&#64;clauswilke, #3659).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> now uses ragg to render raster output if ragg is available. It also
handles custom devices that sets a default unit (e.g. <code class="docutils literal notranslate"><span class="pre">ragg::agg_png</span></code>)
correctly (&#64;thomasp85, #4388)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> now returns the saved file location invisibly (#3379, &#64;eliocamp).
Note that, as a side effect, an unofficial hack <code class="docutils literal notranslate"><span class="pre">&lt;ggplot</span> <span class="pre">object&gt;</span> <span class="pre">+</span> <span class="pre">ggsave()</span></code>
no longer works (#4513).</p></li>
<li><p>The scale arguments <code class="docutils literal notranslate"><span class="pre">limits</span></code>, <code class="docutils literal notranslate"><span class="pre">breaks</span></code>, <code class="docutils literal notranslate"><span class="pre">minor_breaks</span></code>, <code class="docutils literal notranslate"><span class="pre">labels</span></code>, <code class="docutils literal notranslate"><span class="pre">rescaler</span></code>
and <code class="docutils literal notranslate"><span class="pre">oob</span></code> now accept purrr style lambda notation (&#64;teunbrand, #4427). The same
is true for <code class="docutils literal notranslate"><span class="pre">as_labeller()</span></code> (and therefore also <code class="docutils literal notranslate"><span class="pre">labeller()</span></code>)
(&#64;netique, #4188).</p></li>
<li><p>Manual scales now allow named vectors passed to <code class="docutils literal notranslate"><span class="pre">values</span></code> to contain fewer
elements than existing in the data. Elements not present in values will be set
to <code class="docutils literal notranslate"><span class="pre">NA</span></code> (&#64;thomasp85, #3451)</p></li>
<li><p>Date and datetime position scales support out-of-bounds (oob) arguments to
control how limits affect data outside those limits (&#64;teunbrand, #4199).</p></li>
</ul>
</div>
<div class="section" id="fixes">
<h2>Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Fix a bug that <code class="docutils literal notranslate"><span class="pre">after_stat()</span></code> and <code class="docutils literal notranslate"><span class="pre">after_scale()</span></code> cannot refer to aesthetics
if it’s specified in the plot-global mapping (&#64;yutannihilation, #4260).</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">annotate_logticks()</span></code> that would cause an error when used together
with <code class="docutils literal notranslate"><span class="pre">coord_flip()</span></code> (&#64;thomasp85, #3954)</p></li>
<li><p>Fix a bug in <code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code> that resulted in <code class="docutils literal notranslate"><span class="pre">intercept</span></code> not being subjected
to the transformation of the y scale (&#64;thomasp85, #3741)</p></li>
<li><p>Extent the range of the line created by <code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code> so that line ending
is not visible for large linewidths (&#64;thomasp85, #4024)</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">geom_dotplot()</span></code> where dots would be positioned wrong with
<code class="docutils literal notranslate"><span class="pre">stackgroups</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> (&#64;thomasp85, #1745)</p></li>
<li><p>Fix calculation of confidence interval for locfit smoothing in <code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code>
(&#64;topepo, #3806)</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">geom_text()</span></code> where <code class="docutils literal notranslate"><span class="pre">&quot;outward&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;inward&quot;</span></code> justification for
some <code class="docutils literal notranslate"><span class="pre">angle</span></code> values was reversed (&#64;aphalo, #4169, #4447)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> now sets the default background to match the fill value of the
<code class="docutils literal notranslate"><span class="pre">plot.background</span></code> theme element (&#64;karawoo, #4057)</p></li>
<li><p>It is now deprecated to specify <code class="docutils literal notranslate"><span class="pre">guides(&lt;scale&gt;</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> or
<code class="docutils literal notranslate"><span class="pre">scale_*(guide</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> to remove a guide. Please use
<code class="docutils literal notranslate"><span class="pre">guides(&lt;scale&gt;</span> <span class="pre">=</span> <span class="pre">&quot;none&quot;)</span></code> or <code class="docutils literal notranslate"><span class="pre">scale_*(guide</span> <span class="pre">=</span> <span class="pre">&quot;none&quot;)</span></code> instead
(&#64;yutannihilation, #4094).</p></li>
<li><p>Fix a bug in <code class="docutils literal notranslate"><span class="pre">guide_bins()</span></code> where keys would disappear if the guide was
reversed (&#64;thomasp85, #4210)</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">guide_coloursteps()</span></code> that would repeat the terminal bins if the
breaks coincided with the limits of the scale (&#64;thomasp85, #4019)</p></li>
<li><p>Make sure that default labels from default mappings doesn’t overwrite default
labels from explicit mappings (&#64;thomasp85, #2406)</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">labeller()</span></code> where parsing was turned off if <code class="docutils literal notranslate"><span class="pre">.multiline</span> <span class="pre">=</span> <span class="pre">FALSE</span></code>
(&#64;thomasp85, #4084)</p></li>
<li><p>Make sure <code class="docutils literal notranslate"><span class="pre">label_bquote()</span></code> has access to the calling environment when
evaluating the labels (&#64;thomasp85, #4141)</p></li>
<li><p>Fix a bug in the layer implementation that introduced a new state after the
first render which could lead to a different look when rendered the second
time (&#64;thomasp85, #4204)</p></li>
<li><p>Fix a bug in legend justification where justification was lost of the legend
dimensions exceeded the available size (&#64;thomasp85, #3635)</p></li>
<li><p>Fix a bug in <code class="docutils literal notranslate"><span class="pre">position_dodge2()</span></code> where <code class="docutils literal notranslate"><span class="pre">NA</span></code> values in thee data would cause an
error (&#64;thomasp85, #2905)</p></li>
<li><p>Make sure <code class="docutils literal notranslate"><span class="pre">position_jitter()</span></code> creates the same jittering independent of
whether it is called by name or with constructor (&#64;thomasp85, #2507)</p></li>
<li><p>Fix a bug in <code class="docutils literal notranslate"><span class="pre">position_jitter()</span></code> where different jitters would be applied to
different position aesthetics of the same axis (&#64;thomasp85, #2941)</p></li>
<li><p>Fix a bug in <code class="docutils literal notranslate"><span class="pre">qplot()</span></code> when supplying <code class="docutils literal notranslate"><span class="pre">c(NA,</span> <span class="pre">NA)</span></code> as axis limits
(&#64;thomasp85, #4027)</p></li>
<li><p>Remove cross-inheritance of default discrete colour/fill scales and check the
type and aesthetic of function output if <code class="docutils literal notranslate"><span class="pre">type</span></code> is a function
(&#64;thomasp85, #4149)</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">scale_[x|y]_date()</span></code> where custom breaks functions that resulted in
fracional dates would get misaligned (&#64;thomasp85, #3965)</p></li>
<li><p>Fix bug in <code class="docutils literal notranslate"><span class="pre">scale_[x|y]_datetime()</span></code> where a specified timezone would be
ignored by the scale (&#64;thomasp85, #4007)</p></li>
<li><p>Fix issue in <code class="docutils literal notranslate"><span class="pre">sec_axis()</span></code> that would throw warnings in the absence of any
secondary breaks (&#64;thomasp85, #4368)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code>’s computed variable <code class="docutils literal notranslate"><span class="pre">width</span></code> is now documented (#3522).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_count()</span></code> now computes width based on the full dataset instead of per
group (&#64;thomasp85, #2047)</p></li>
<li><p>Extended <code class="docutils literal notranslate"><span class="pre">stat_ecdf()</span></code> to calculate the cdf from either x or y instead from y
only (&#64;jgjl, #4005)</p></li>
<li><p>Fix a bug in <code class="docutils literal notranslate"><span class="pre">stat_summary_bin()</span></code> where one more than the requested number of
bins would be created (&#64;thomasp85, #3824)</p></li>
<li><p>Only drop groups in <code class="docutils literal notranslate"><span class="pre">stat_ydensity()</span></code> when there are fewer than two data
points and throw a warning (&#64;andrewwbutler, #4111).</p></li>
<li><p>Fixed a bug in strip assembly when theme has <code class="docutils literal notranslate"><span class="pre">strip.text</span> <span class="pre">=</span> <span class="pre">element_blank()</span></code>
and plots are faceted with multi-layered strips (&#64;teunbrand, #4384).</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">theme(aspect.ratio</span> <span class="pre">=</span> <span class="pre">...)</span></code> together with free space in <code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code>
now crrectly throws an error (&#64;thomasp85, #3834)</p></li>
<li><p>Fixed a bug in <code class="docutils literal notranslate"><span class="pre">labeller()</span></code> so that <code class="docutils literal notranslate"><span class="pre">.default</span></code> is passed to <code class="docutils literal notranslate"><span class="pre">as_labeller()</span></code>
when labellers are specified by naming faceting variables. (&#64;waltersom, #4031)</p></li>
<li><p>Updated style for example code (&#64;rjake, #4092)</p></li>
<li><p>ggplot2 now requires R &gt;= 3.3 (#4247).</p></li>
<li><p>ggplot2 now uses <code class="docutils literal notranslate"><span class="pre">rlang::check_installed()</span></code> to check if a suggested package is
installed, which will offer to install the package before continuing (#4375,
&#64;malcolmbarrett)</p></li>
<li><p>Improved error with hint when piping a <code class="docutils literal notranslate"><span class="pre">ggplot</span></code> object into a facet function
(#4379, &#64;mitchelloharawild).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-3-3">
<h1>ggplot2 3.3.3<a class="headerlink" href="#ggplot2-3-3-3" title="Permalink to this headline">¶</a></h1>
<p>This is a small patch release mainly intended to address changes in R and CRAN.
It further changes the licensing model of ggplot2 to an MIT license.</p>
<ul class="simple">
<li><p>Update the ggplot2 licence to an MIT license (#4231, #4232, #4233, and #4281)</p></li>
<li><p>Use vdiffr conditionally so ggplot2 can be tested on systems without vdiffr</p></li>
<li><p>Update tests to work with the new <code class="docutils literal notranslate"><span class="pre">all.equal()</span></code> defaults in R &gt;4.0.3</p></li>
<li><p>Fixed a bug that <code class="docutils literal notranslate"><span class="pre">guide_bins()</span></code> mistakenly ignore <code class="docutils literal notranslate"><span class="pre">override.aes</span></code> argument
(&#64;yutannihilation, #4085).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-3-2">
<h1>ggplot2 3.3.2<a class="headerlink" href="#ggplot2-3-3-2" title="Permalink to this headline">¶</a></h1>
<p>This is a small release focusing on fixing regressions introduced in 3.3.1.</p>
<ul class="simple">
<li><p>Added an <code class="docutils literal notranslate"><span class="pre">outside</span></code> option to <code class="docutils literal notranslate"><span class="pre">annotation_logticks()</span></code> that places tick marks
outside of the plot bounds. (#3783, &#64;kbodwin)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">annotation_raster()</span></code> adds support for native rasters. For large rasters,
native rasters render significantly faster than arrays (&#64;kent37, #3388)</p></li>
<li><p>Facet strips now have dedicated position-dependent theme elements
(<code class="docutils literal notranslate"><span class="pre">strip.text.x.top</span></code>, <code class="docutils literal notranslate"><span class="pre">strip.text.x.bottom</span></code>, <code class="docutils literal notranslate"><span class="pre">strip.text.y.left</span></code>,
<code class="docutils literal notranslate"><span class="pre">strip.text.y.right</span></code>) that inherit from <code class="docutils literal notranslate"><span class="pre">strip.text.x</span></code> and <code class="docutils literal notranslate"><span class="pre">strip.text.y</span></code>,
respectively. As a consequence, some theme stylings now need to be applied to
the position-dependent elements rather than to the parent elements. This
change was already introduced in ggplot2 3.3.0 but not listed in the
changelog. (&#64;thomasp85, #3683)</p></li>
<li><p>Facets now handle layers containing no data (&#64;yutannihilation, #3853).</p></li>
<li><p>A newly added geom <code class="docutils literal notranslate"><span class="pre">geom_density_2d_filled()</span></code> and associated stat
<code class="docutils literal notranslate"><span class="pre">stat_density_2d_filled()</span></code> can draw filled density contours
(&#64;clauswilke, #3846).</p></li>
<li><p>A newly added <code class="docutils literal notranslate"><span class="pre">geom_function()</span></code> is now recommended to use in conjunction
with/instead of <code class="docutils literal notranslate"><span class="pre">stat_function()</span></code>. In addition, <code class="docutils literal notranslate"><span class="pre">stat_function()</span></code> now
works with transformed y axes, e.g. <code class="docutils literal notranslate"><span class="pre">scale_y_log10()</span></code>, and in plots
containing no other data or layers (&#64;clauswilke, #3611, #3905, #3983).</p></li>
<li><p>Fixed a bug in <code class="docutils literal notranslate"><span class="pre">geom_sf()</span></code> that caused problems with legend-type
autodetection (&#64;clauswilke, #3963).</p></li>
<li><p>Support graphics devices that use the <code class="docutils literal notranslate"><span class="pre">file</span></code> argument instead of <code class="docutils literal notranslate"><span class="pre">fileneame</span></code>
in <code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> (&#64;bwiernik, #3810)</p></li>
<li><p>Default discrete color scales are now configurable through the <code class="docutils literal notranslate"><span class="pre">options()</span></code> of
<code class="docutils literal notranslate"><span class="pre">ggplot2.discrete.colour</span></code> and <code class="docutils literal notranslate"><span class="pre">ggplot2.discrete.fill</span></code>. When set to a character
vector of colour codes (or list of character vectors)  with sufficient length,
these colours are used for the default scale. See <code class="docutils literal notranslate"><span class="pre">help(scale_colour_discrete)</span></code>
for more details and examples (&#64;cpsievert, #3833).</p></li>
<li><p>Default continuous colour scales (i.e., the <code class="docutils literal notranslate"><span class="pre">options()</span></code>
<code class="docutils literal notranslate"><span class="pre">ggplot2.continuous.colour</span></code> and <code class="docutils literal notranslate"><span class="pre">ggplot2.continuous.fill</span></code>, which inform the
<code class="docutils literal notranslate"><span class="pre">type</span></code> argument of <code class="docutils literal notranslate"><span class="pre">scale_fill_continuous()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_colour_continuous()</span></code>)
now accept a function, which allows more control over these default
<code class="docutils literal notranslate"><span class="pre">continuous_scale()</span></code>s (&#64;cpsievert, #3827).</p></li>
<li><p>A bug was fixed in <code class="docutils literal notranslate"><span class="pre">stat_contour()</span></code> when calculating breaks based on
the <code class="docutils literal notranslate"><span class="pre">bins</span></code> argument (&#64;clauswilke, #3879, #4004).</p></li>
<li><p>Data columns can now contain <code class="docutils literal notranslate"><span class="pre">Vector</span></code> S4 objects, which are widely used in the
Bioconductor project. (&#64;teunbrand, #3837)</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-3-1">
<h1>ggplot2 3.3.1<a class="headerlink" href="#ggplot2-3-3-1" title="Permalink to this headline">¶</a></h1>
<p>This is a small release with no code change. It removes all malicious links to a
site that got hijacked from the readme and pkgdown site.</p>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-3-0">
<h1>ggplot2 3.3.0<a class="headerlink" href="#ggplot2-3-3-0" title="Permalink to this headline">¶</a></h1>
<p>This is a minor release but does contain a range of substantial new features,
along with the standard bug fixes. The release contains a few visual breaking
changes, along with breaking changes for extension developers due to a shift in
internal representation of the position scales and their axes. No user breaking
changes are included.</p>
<p>This release also adds Dewey Dunnington (&#64;paleolimbot) to the core team.</p>
<div class="section" id="breaking-changes">
<h2>Breaking changes<a class="headerlink" href="#breaking-changes" title="Permalink to this headline">¶</a></h2>
<p>There are no user-facing breaking changes, but a change in some internal
representations that extension developers may have relied on, along with a few
breaking visual changes which may cause visual tests in downstream packages to
fail.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">panel_params</span></code> field in the <code class="docutils literal notranslate"><span class="pre">Layout</span></code> now contains a list of list of
<code class="docutils literal notranslate"><span class="pre">ViewScale</span></code> objects, describing the trained coordinate system scales, instead
of the list object used before. Any extensions that use this field will likely
break, as will unit tests that checks aspects of this.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">element_text()</span></code> now issues a warning when vectorized arguments are provided,
as in <code class="docutils literal notranslate"><span class="pre">colour</span> <span class="pre">=</span> <span class="pre">c(&quot;red&quot;,</span> <span class="pre">&quot;green&quot;,</span> <span class="pre">&quot;blue&quot;)</span></code>. Such use is discouraged and not
officially supported (&#64;clauswilke, #3492).</p></li>
<li><p>Changed <code class="docutils literal notranslate"><span class="pre">theme_grey()</span></code> setting for legend key so that it creates no border
(<code class="docutils literal notranslate"><span class="pre">NA</span></code>) rather than drawing a white one. (&#64;annennenne, #3180)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_ribbon()</span></code> now draws separate lines for the upper and lower intervals if
<code class="docutils literal notranslate"><span class="pre">colour</span></code> is mapped. Similarly, <code class="docutils literal notranslate"><span class="pre">geom_area()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_density()</span></code> now draw
the upper lines only in the same case by default. If you want old-style full
stroking, use <code class="docutils literal notranslate"><span class="pre">outline.type</span> <span class="pre">=</span> <span class="pre">&quot;full&quot;</span></code> (&#64;yutannihilation, #3503 / &#64;thomasp85, #3708).</p></li>
</ul>
</div>
<div class="section" id="new-features">
<h2>New features<a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The evaluation time of aesthetics can now be controlled to a finer degree.
<code class="docutils literal notranslate"><span class="pre">after_stat()</span></code> supersedes the use of <code class="docutils literal notranslate"><span class="pre">stat()</span></code> and <code class="docutils literal notranslate"><span class="pre">..var..</span></code>-notation, and is
joined by <code class="docutils literal notranslate"><span class="pre">after_scale()</span></code> to allow for mapping to scaled aesthetic values.
Remapping of the same aesthetic is now supported with <code class="docutils literal notranslate"><span class="pre">stage()</span></code>, so you can
map a data variable to a stat aesthetic, and remap the same aesthetic to
something else after statistical transformation (&#64;thomasp85, #3534)</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">coord_*()</span></code> functions with <code class="docutils literal notranslate"><span class="pre">xlim</span></code> and <code class="docutils literal notranslate"><span class="pre">ylim</span></code> arguments now accept
vectors with <code class="docutils literal notranslate"><span class="pre">NA</span></code> as a placeholder for the minimum or maximum value
(e.g., <code class="docutils literal notranslate"><span class="pre">ylim</span> <span class="pre">=</span> <span class="pre">c(0,</span> <span class="pre">NA)</span></code> would zoom the y-axis from 0 to the
maximum value observed in the data). This mimics the behaviour
of the <code class="docutils literal notranslate"><span class="pre">limits</span></code> argument in continuous scale functions
(&#64;paleolimbot, #2907).</p></li>
<li><p>Allowed reversing of discrete scales by re-writing <code class="docutils literal notranslate"><span class="pre">get_limits()</span></code>
(&#64;AnneLyng, #3115)</p></li>
<li><p>All geoms and stats that had a direction (i.e. where the x and y axes had
different interpretation), can now freely choose their direction, instead of
relying on <code class="docutils literal notranslate"><span class="pre">coord_flip()</span></code>. The direction is deduced from the aesthetic
mapping, but can also be specified directly with the new <code class="docutils literal notranslate"><span class="pre">orientation</span></code>
argument (&#64;thomasp85, #3506).</p></li>
<li><p>Position guides can now be customized using the new <code class="docutils literal notranslate"><span class="pre">guide_axis()</span></code>, which can
be passed to position <code class="docutils literal notranslate"><span class="pre">scale_*()</span></code> functions or via <code class="docutils literal notranslate"><span class="pre">guides()</span></code>. The new axis
guide (<code class="docutils literal notranslate"><span class="pre">guide_axis()</span></code>) comes with arguments <code class="docutils literal notranslate"><span class="pre">check.overlap</span></code> (automatic removal
of overlapping labels), <code class="docutils literal notranslate"><span class="pre">angle</span></code> (easy rotation of axis labels), and
<code class="docutils literal notranslate"><span class="pre">n.dodge</span></code> (dodge labels into multiple rows/columns) (&#64;paleolimbot, #3322).</p></li>
<li><p>A new scale type has been added, that allows binning of aesthetics at the
scale level. It has versions for both position and non-position aesthetics and
comes with two new guides (<code class="docutils literal notranslate"><span class="pre">guide_bins</span></code> and <code class="docutils literal notranslate"><span class="pre">guide_coloursteps</span></code>)
(&#64;thomasp85, #3096)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_x_continuous()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_y_continuous()</span></code> gains an <code class="docutils literal notranslate"><span class="pre">n.breaks</span></code> argument
guiding the number of automatic generated breaks (&#64;thomasp85, #3102)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">stat_contour_filled()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_contour_filled()</span></code>, which compute
and draw filled contours of gridded data (&#64;paleolimbot, #3044).
<code class="docutils literal notranslate"><span class="pre">geom_contour()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_contour()</span></code> now use the isoband package
to compute contour lines. The <code class="docutils literal notranslate"><span class="pre">complete</span></code> parameter (which was undocumented
and has been unused for at least four years) was removed (&#64;paleolimbot, #3044).</p></li>
<li><p>Themes have gained two new parameters, <code class="docutils literal notranslate"><span class="pre">plot.title.position</span></code> and
<code class="docutils literal notranslate"><span class="pre">plot.caption.position</span></code>, that can be used to customize how plot
title/subtitle and plot caption are positioned relative to the overall plot
(&#64;clauswilke, #3252).</p></li>
</ul>
</div>
<div class="section" id="extensions">
<h2>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Geom</span></code> now gains a <code class="docutils literal notranslate"><span class="pre">setup_params()</span></code> method in line with the other ggproto
classes (&#64;thomasp85, #3509)</p></li>
<li><p>The newly added function <code class="docutils literal notranslate"><span class="pre">register_theme_elements()</span></code> now allows developers
of extension packages to define their own new theme elements and place them
into the ggplot2 element tree (&#64;clauswilke, #2540).</p></li>
</ul>
</div>
<div class="section" id="minor-improvements-and-bug-fixes">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#minor-improvements-and-bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">coord_trans()</span></code> now draws second axes and accepts <code class="docutils literal notranslate"><span class="pre">xlim</span></code>, <code class="docutils literal notranslate"><span class="pre">ylim</span></code>,
and <code class="docutils literal notranslate"><span class="pre">expand</span></code> arguments to bring it up to feature parity with
<code class="docutils literal notranslate"><span class="pre">coord_cartesian()</span></code>. The <code class="docutils literal notranslate"><span class="pre">xtrans</span></code> and <code class="docutils literal notranslate"><span class="pre">ytrans</span></code> arguments that were
deprecated in version 1.0.1 in favour of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>
were removed (&#64;paleolimbot, #2990).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_trans()</span></code> now calculates breaks using the expanded range
(previously these were calculated using the unexpanded range,
which resulted in differences between plots made with <code class="docutils literal notranslate"><span class="pre">coord_trans()</span></code>
and those made with <code class="docutils literal notranslate"><span class="pre">coord_cartesian()</span></code>). The expansion for discrete axes
in <code class="docutils literal notranslate"><span class="pre">coord_trans()</span></code> was also updated such that it behaves identically
to that in <code class="docutils literal notranslate"><span class="pre">coord_cartesian()</span></code> (&#64;paleolimbot, #3338).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expand_scale()</span></code> was deprecated in favour of <code class="docutils literal notranslate"><span class="pre">expansion()</span></code> for setting
the <code class="docutils literal notranslate"><span class="pre">expand</span></code> argument of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> scales (&#64;paleolimbot).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_hline()</span></code>, and <code class="docutils literal notranslate"><span class="pre">geom_vline()</span></code> now issue
more informative warnings when supplied with set aesthetics
(i.e., <code class="docutils literal notranslate"><span class="pre">slope</span></code>, <code class="docutils literal notranslate"><span class="pre">intercept</span></code>, <code class="docutils literal notranslate"><span class="pre">yintercept</span></code>, and/or <code class="docutils literal notranslate"><span class="pre">xintercept</span></code>)
and mapped aesthetics (i.e., <code class="docutils literal notranslate"><span class="pre">data</span></code> and/or <code class="docutils literal notranslate"><span class="pre">mapping</span></code>).</p></li>
<li><p>Fix a bug in <code class="docutils literal notranslate"><span class="pre">geom_raster()</span></code> that squeezed the image when it went outside
scale limits (#3539, &#64;thomasp85)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_sf()</span></code> now determines the legend type automatically (&#64;microly, #3646).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_sf()</span></code> now removes rows that can’t be plotted due to <code class="docutils literal notranslate"><span class="pre">NA</span></code> aesthetics
(#3546, &#64;thomasp85)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_sf()</span></code> now applies alpha to linestring geometries
(#3589, &#64;yutannihilation).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gg_dep()</span></code> was deprecated (&#64;perezp44, #3382).</p></li>
<li><p>Added function <code class="docutils literal notranslate"><span class="pre">ggplot_add.by()</span></code> for lists created with <code class="docutils literal notranslate"><span class="pre">by()</span></code>, allowing such
lists to be added to ggplot objects (#2734, &#64;Maschette)</p></li>
<li><p>ggplot2 no longer depends on reshape2, which means that it no longer
(recursively) needs plyr, stringr, or stringi packages.</p></li>
<li><p>Increase the default <code class="docutils literal notranslate"><span class="pre">nbin</span></code> of <code class="docutils literal notranslate"><span class="pre">guide_colourbar()</span></code> to place the ticks more
precisely (#3508, &#64;yutannihilation).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">manual_scale()</span></code> now matches <code class="docutils literal notranslate"><span class="pre">values</span></code> with the order of <code class="docutils literal notranslate"><span class="pre">breaks</span></code> whenever
<code class="docutils literal notranslate"><span class="pre">values</span></code> is an unnamed vector. Previously, unnamed <code class="docutils literal notranslate"><span class="pre">values</span></code> would match with
the limits of the scale and ignore the order of any <code class="docutils literal notranslate"><span class="pre">breaks</span></code> provided. Note
that this may change the appearance of plots that previously relied on the
unordered behaviour (#2429, &#64;idno0001).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_manual_*(limits</span> <span class="pre">=</span> <span class="pre">...)</span></code> now actually limits the scale (#3262,
&#64;yutannihilation).</p></li>
<li><p>Fix a bug when <code class="docutils literal notranslate"><span class="pre">show.legend</span></code> is a named logical vector
(#3461, &#64;yutannihilation).</p></li>
<li><p>Added weight aesthetic option to <code class="docutils literal notranslate"><span class="pre">stat_density()</span></code> and made scaling of
weights the default (&#64;annennenne, #2902)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_density2d()</span></code> can now take an <code class="docutils literal notranslate"><span class="pre">adjust</span></code> parameter to scale the default
bandwidth. (#2860, &#64;haleyjeppson)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_smooth()</span></code> uses <code class="docutils literal notranslate"><span class="pre">REML</span></code> by default, if <code class="docutils literal notranslate"><span class="pre">method</span> <span class="pre">=</span> <span class="pre">&quot;gam&quot;</span></code> and
<code class="docutils literal notranslate"><span class="pre">gam</span></code>’s method is not specified (&#64;ikosmidis, #2630).</p></li>
<li><p>stacking text when calculating the labels and the y axis with
<code class="docutils literal notranslate"><span class="pre">stat_summary()</span></code> now works (&#64;ikosmidis, #2709)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_summary()</span></code> and related functions now support rlang-style lambda functions
(#3568, &#64;dkahle).</p></li>
<li><p>The data mask pronoun, <code class="docutils literal notranslate"><span class="pre">.data</span></code>, is now stripped from default labels.</p></li>
<li><p>Addition of partial themes to plots has been made more predictable;
stepwise addition of individual partial themes is now equivalent to
addition of multple theme elements at once (&#64;clauswilke, #3039).</p></li>
<li><p>Facets now don’t fail even when some variable in the spec are not available
in all layers (&#64;yutannihilation, #2963).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-2-1">
<h1>ggplot2 3.2.1<a class="headerlink" href="#ggplot2-3-2-1" title="Permalink to this headline">¶</a></h1>
<p>This is a patch release fixing a few regressions introduced in 3.2.0 as well as
fixing some unit tests that broke due to upstream changes.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">position_stack()</span></code> no longer changes the order of the input data. Changes to
the internal behaviour of <code class="docutils literal notranslate"><span class="pre">geom_ribbon()</span></code> made this reordering problematic
with ribbons that spanned <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">=</span> <span class="pre">0</span></code> (#3471)</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">qplot()</span></code> with a single positional aesthetic will no longer title the
non-specified scale as <code class="docutils literal notranslate"><span class="pre">&quot;NULL&quot;</span></code> (#3473)</p></li>
<li><p>Fixes unit tests for sf graticule labels caused by chages to sf</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-2-0">
<h1>ggplot2 3.2.0<a class="headerlink" href="#ggplot2-3-2-0" title="Permalink to this headline">¶</a></h1>
<p>This is a minor release with an emphasis on internal changes to make ggplot2
faster and more consistent. The few interface changes will only affect the
aesthetics of the plot in minor ways, and will only potentially break code of
extension developers if they have relied on internals that have been changed.
This release also sees the addition of Hiroaki Yutani (&#64;yutannihilation) to the
core developer team.</p>
<p>With the release of R 3.6, ggplot2 now requires the R version to be at least 3.2,
as the tidyverse is committed to support 5 major versions of R.</p>
<div class="section" id="id1">
<h2>Breaking changes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Two patches (#2996 and #3050) fixed minor rendering problems. In most cases,
the visual changes are so subtle that they are difficult to see with the naked
eye. However, these changes are detected by the vdiffr package, and therefore
any package developers who use vdiffr to test for visual correctness of ggplot2
plots will have to regenerate all reference images.</p></li>
<li><p>In some cases, ggplot2 now produces a warning or an error for code that previously
produced plot output. In all these cases, the previous plot output was accidental,
and the plotting code uses the ggplot2 API in a way that would lead to undefined
behavior. Examples include a missing <code class="docutils literal notranslate"><span class="pre">group</span></code> aesthetic in <code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code> (#3316),
annotations across multiple facets (#3305), and not using aesthetic mappings when
drawing ribbons with <code class="docutils literal notranslate"><span class="pre">geom_ribbon()</span></code> (#3318).</p></li>
</ul>
</div>
<div class="section" id="id2">
<h2>New features<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>This release includes a range of internal changes that speeds up plot
generation. None of the changes are user facing and will not break any code,
but in general ggplot2 should feel much faster. The changes includes, but are
not limited to:</p>
<ul>
<li><p>Caching ascent and descent dimensions of text to avoid recalculating it for
every title.</p></li>
<li><p>Using a faster data.frame constructor as well as faster indexing into
data.frames</p></li>
<li><p>Removing the plyr dependency, replacing plyr functions with faster
equivalents.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_polygon()</span></code> can now draw polygons with holes using the new <code class="docutils literal notranslate"><span class="pre">subgroup</span></code>
aesthetic. This functionality requires R 3.6.0 (&#64;thomasp85, #3128)</p></li>
<li><p>Aesthetic mappings now accept functions that return <code class="docutils literal notranslate"><span class="pre">NULL</span></code> (&#64;yutannihilation,
#2997).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_function()</span></code> now accepts rlang/purrr style anonymous functions for the
<code class="docutils literal notranslate"><span class="pre">fun</span></code> parameter (&#64;dkahle, #3159).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_rug()</span></code> gains an “outside” option to allow for moving the rug tassels to
outside the plot area (&#64;njtierney, #3085) and a <code class="docutils literal notranslate"><span class="pre">length</span></code> option to allow for
changing the length of the rug lines (&#64;daniel-wells, #3109).</p></li>
<li><p>All geoms now take a <code class="docutils literal notranslate"><span class="pre">key_glyph</span></code> paramter that allows users to customize
how legend keys are drawn (&#64;clauswilke, #3145). In addition, a new key glyph
<code class="docutils literal notranslate"><span class="pre">timeseries</span></code> is provided to draw nice legends for time series
(&#64;mitchelloharawild, #3145).</p></li>
</ul>
</div>
<div class="section" id="id3">
<h2>Extensions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Layers now have a new member function <code class="docutils literal notranslate"><span class="pre">setup_layer()</span></code> which is called at the
very beginning of the plot building process and which has access to the
original input data and the plot object being built. This function allows the
creation of custom layers that autogenerate aesthetic mappings based on the
input data or that filter the input data in some form. For the time being, this
feature is not exported, but it has enabled the development of a new layer type,
<code class="docutils literal notranslate"><span class="pre">layer_sf()</span></code> (see next item). Other special-purpose layer types may be added
in the future (&#64;clauswilke, #2872).</p></li>
<li><p>A new layer type <code class="docutils literal notranslate"><span class="pre">layer_sf()</span></code> can auto-detect and auto-map sf geometry
columns in the data. It should be used by extension developers who are writing
new sf-based geoms or stats (&#64;clauswilke, #3232).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x0</span></code> and <code class="docutils literal notranslate"><span class="pre">y0</span></code> are now recognized positional aesthetics so they will get scaled
if used in extension geoms and stats (&#64;thomasp85, #3168)</p></li>
<li><p>Continuous scale limits now accept functions which accept the default
limits and return adjusted limits. This makes it possible to write
a function that e.g. ensures the limits are always a multiple of 100,
regardless of the data (&#64;econandrew, #2307).</p></li>
</ul>
</div>
<div class="section" id="id4">
<h2>Minor improvements and bug fixes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cut_width()</span></code> now accepts <code class="docutils literal notranslate"><span class="pre">...</span></code> to pass further arguments to <code class="docutils literal notranslate"><span class="pre">base::cut.default()</span></code>
like <code class="docutils literal notranslate"><span class="pre">cut_number()</span></code> and <code class="docutils literal notranslate"><span class="pre">cut_interval()</span></code> already did (&#64;cderv, #3055)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_map()</span></code> now can have axes on the top and right (&#64;karawoo, #3042).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_polar()</span></code> now correctly rescales the secondary axis (&#64;linzi-sg, #3278)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code>, <code class="docutils literal notranslate"><span class="pre">coord_map()</span></code>, and <code class="docutils literal notranslate"><span class="pre">coord_polar()</span></code> now squash <code class="docutils literal notranslate"><span class="pre">-Inf</span></code> and <code class="docutils literal notranslate"><span class="pre">Inf</span></code>
into the min and max of the plot (&#64;yutannihilation, #2972).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code> graticule lines are now drawn in the same thickness as panel grid
lines in <code class="docutils literal notranslate"><span class="pre">coord_cartesian()</span></code>, and seting panel grid lines to <code class="docutils literal notranslate"><span class="pre">element_blank()</span></code>
now also works in <code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code>
(&#64;clauswilke, #2991, #2525).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">economics</span></code> data has been regenerated. This leads to some changes in the
values of all columns (especially in <code class="docutils literal notranslate"><span class="pre">psavert</span></code>), but more importantly, strips
the grouping attributes from <code class="docutils literal notranslate"><span class="pre">economics_long</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">element_line()</span></code> now fills closed arrows (&#64;yutannihilation, #2924).</p></li>
<li><p>Facet strips on the left side of plots now have clipping turned on, preventing
text from running out of the strip and borders from looking thicker than for
other strips (&#64;karawoo, #2772 and #3061).</p></li>
<li><p>ggplot2 now works in Turkish locale (&#64;yutannihilation, #3011).</p></li>
<li><p>Clearer error messages for inappropriate aesthetics (&#64;clairemcwhite, #3060).</p></li>
<li><p>ggplot2 no longer attaches any external packages when using functions that
depend on packages that are suggested but not imported by ggplot2. The
affected functions include <code class="docutils literal notranslate"><span class="pre">geom_hex()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_binhex()</span></code>,
<code class="docutils literal notranslate"><span class="pre">stat_summary_hex()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_quantile()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_quantile()</span></code>, and <code class="docutils literal notranslate"><span class="pre">map_data()</span></code>
(&#64;clauswilke, #3126).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_area()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_ribbon()</span></code> now sort the data along the x-axis in the
<code class="docutils literal notranslate"><span class="pre">setup_data()</span></code> method rather than as part of <code class="docutils literal notranslate"><span class="pre">draw_group()</span></code> (&#64;thomasp85,
#3023)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_hline()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_vline()</span></code>, and <code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code> now throw a warning if the
user supplies both an <code class="docutils literal notranslate"><span class="pre">xintercept</span></code>, <code class="docutils literal notranslate"><span class="pre">yintercept</span></code>, or <code class="docutils literal notranslate"><span class="pre">slope</span></code> value and a
mapping (&#64;RichardJActon, #2950).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_rug()</span></code> now works with <code class="docutils literal notranslate"><span class="pre">coord_flip()</span></code> (&#64;has2k1, #2987).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_violin()</span></code> no longer throws an error when quantile lines fall outside
the violin polygon (&#64;thomasp85, #3254).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">guide_legend()</span></code> and <code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code> now use appropriate spacing between legend
key glyphs and legend text even if the legend title is missing (&#64;clauswilke, #2943).</p></li>
<li><p>Default labels are now generated more consistently; e.g., symbols no longer
get backticks, and long expressions are abbreviated with <code class="docutils literal notranslate"><span class="pre">...</span></code>
(&#64;yutannihilation, #2981).</p></li>
<li><p>All-<code class="docutils literal notranslate"><span class="pre">Inf</span></code> layers are now ignored for picking the scale (&#64;yutannihilation,
#3184).</p></li>
<li><p>Diverging Brewer colour palette now use the correct mid-point colour
(&#64;dariyasydykova, #3072).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_color_continuous()</span></code> now points to <code class="docutils literal notranslate"><span class="pre">scale_colour_continuous()</span></code> so that
it will handle <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">=</span> <span class="pre">&quot;viridis&quot;</span></code> as the documentation states (&#64;hlendway,
#3079).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_shape_identity()</span></code> now works correctly with <code class="docutils literal notranslate"><span class="pre">guide</span> <span class="pre">=</span> <span class="pre">&quot;legend&quot;</span></code>
(&#64;malcolmbarrett, #3029)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_continuous</span></code> will now draw axis line even if the length of breaks is 0
(&#64;thomasp85, #3257)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> will now error when the number of bins exceeds 1e6 to avoid
accidentally freezing the user session (&#64;thomasp85).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sec_axis()</span></code> now places ticks accurately when using nonlinear transformations (&#64;dpseidel, #2978).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> and <code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> now automatically remove NULL from facet
specs, and accept empty specs (&#64;yutannihilation, #3070, #2986).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> now handles data with only one unique value (&#64;yutannihilation
#3047).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sec_axis()</span></code> now accepts functions as well as formulas (&#64;yutannihilation, #3031).</p></li>
<li><p>New theme elements allowing different ticks lengths for each axis. For instance,
this can be used to have inwards ticks on the x-axis (<code class="docutils literal notranslate"><span class="pre">axis.ticks.length.x</span></code>) and
outwards ticks on the y-axis (<code class="docutils literal notranslate"><span class="pre">axis.ticks.length.y</span></code>) (&#64;pank, #2935).</p></li>
<li><p>The arguments of <code class="docutils literal notranslate"><span class="pre">Stat*$compute_layer()</span></code> and <code class="docutils literal notranslate"><span class="pre">Position*$compute_layer()</span></code> are
now renamed to always match the ones of <code class="docutils literal notranslate"><span class="pre">Stat$compute_layer()</span></code> and
<code class="docutils literal notranslate"><span class="pre">Position$compute_layer()</span></code> (&#64;yutannihilation, #3202).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_*()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_*()</span></code> now accepts purrr-style lambda notation
(&#64;yutannihilation, #3138).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_tile()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_rect()</span></code> now draw rectangles without notches at the
corners. The style of the corner can be controlled by <code class="docutils literal notranslate"><span class="pre">linejoin</span></code> parameters
(&#64;yutannihilation, #3050).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-1-0">
<h1>ggplot2 3.1.0<a class="headerlink" href="#ggplot2-3-1-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id5">
<h2>Breaking changes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>This is a minor release and breaking changes have been kept to a minimum. End users of
ggplot2 are unlikely to encounter any issues. However, there are a few items that developers
of ggplot2 extensions should be aware of. For additional details, see also the discussion
accompanying issue #2890.</p>
<ul class="simple">
<li><p>In non-user-facing internal code (specifically in the <code class="docutils literal notranslate"><span class="pre">aes()</span></code> function and in
the <code class="docutils literal notranslate"><span class="pre">aesthetics</span></code> argument of scale functions), ggplot2 now always uses the British
spelling for aesthetics containing the word “colour”. When users specify a “color”
aesthetic it is automatically renamed to “colour”. This renaming is also applied
to non-standard aesthetics that contain the word “color”. For example, “point_color”
is renamed to “point_colour”. This convention makes it easier to support both
British and American spelling for novel, non-standard aesthetics, but it may require
some adjustment for packages that have previously introduced non-standard color
aesthetics using American spelling. A new function <code class="docutils literal notranslate"><span class="pre">standardise_aes_names()</span></code> is
provided in case extension writers need to perform this renaming in their own code
(&#64;clauswilke, #2649).</p></li>
<li><p>Functions that generate other functions (closures) now force the arguments that are
used from the generated functions, to avoid hard-to-catch errors. This may affect
some users of manual scales (such as <code class="docutils literal notranslate"><span class="pre">scale_colour_manual()</span></code>, <code class="docutils literal notranslate"><span class="pre">scale_fill_manual()</span></code>,
etc.) who depend on incorrect behavior (&#64;krlmlr, #2807).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Coord</span></code> objects now have a function <code class="docutils literal notranslate"><span class="pre">backtransform_range()</span></code> that returns the
panel range in data coordinates. This change may affect developers of custom coords,
who now should implement this function. It may also affect developers of custom
geoms that use the <code class="docutils literal notranslate"><span class="pre">range()</span></code> function. In some applications, <code class="docutils literal notranslate"><span class="pre">backtransform_range()</span></code>
may be more appropriate (&#64;clauswilke, #2821).</p></li>
</ul>
</div>
<div class="section" id="id6">
<h2>New features<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code> has much improved customization of axis tick labels. Labels can now
be set manually, and there are two new parameters, <code class="docutils literal notranslate"><span class="pre">label_graticule</span></code> and
<code class="docutils literal notranslate"><span class="pre">label_axes</span></code>, that can be used to specify which graticules to label on which side
of the plot (&#64;clauswilke, #2846, #2857, #2881).</p></li>
<li><p>Two new geoms <code class="docutils literal notranslate"><span class="pre">geom_sf_label()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_sf_text()</span></code> can draw labels and text
on sf objects. Under the hood, a new <code class="docutils literal notranslate"><span class="pre">stat_sf_coordinates()</span></code> calculates the
x and y coordinates from the coordinates of the sf geometries. You can customize
the calculation method via <code class="docutils literal notranslate"><span class="pre">fun.geometry</span></code> argument (&#64;yutannihilation, #2761).</p></li>
</ul>
</div>
<div class="section" id="minor-improvements-and-fixes">
<h2>Minor improvements and fixes<a class="headerlink" href="#minor-improvements-and-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">benchplot()</span></code> now uses tidy evaluation (&#64;dpseidel, #2699).</p></li>
<li><p>The error message in <code class="docutils literal notranslate"><span class="pre">compute_aesthetics()</span></code> now only provides the names of
aesthetics with mismatched lengths, rather than all aesthetics (&#64;karawoo,
#2853).</p></li>
<li><p>For faceted plots, data is no longer internally reordered. This makes it
safer to feed data columns into <code class="docutils literal notranslate"><span class="pre">aes()</span></code> or into parameters of geoms or
stats. However, doing so remains discouraged (&#64;clauswilke, #2694).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code> now also understands the <code class="docutils literal notranslate"><span class="pre">clip</span></code> argument, just like the other
coords (&#64;clauswilke, #2938).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fortify()</span></code> now displays a more informative error message for
<code class="docutils literal notranslate"><span class="pre">grouped_df()</span></code> objects when dplyr is not installed (&#64;jimhester, #2822).</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">geom_*()</span></code> now display an informative error message when required
aesthetics are missing (&#64;dpseidel, #2637 and #2706).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code> now understands the <code class="docutils literal notranslate"><span class="pre">width</span></code> parameter even when used with
a non-standard stat, such as <code class="docutils literal notranslate"><span class="pre">stat_identity()</span></code> (&#64;clauswilke, #2893).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_hex()</span></code> now understands the <code class="docutils literal notranslate"><span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">linetype</span></code> aesthetics
(&#64;mikmart, #2488).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_hline()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_vline()</span></code>, and <code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code> now work properly
with <code class="docutils literal notranslate"><span class="pre">coord_trans()</span></code> (&#64;clauswilke, #2149, #2812).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_text(...,</span> <span class="pre">parse</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code> now correctly renders the expected number of
items instead of silently dropping items that are empty expressions, e.g.
the empty string “”. If an expression spans multiple lines, we take just
the first line and drop the rest. This same issue is also fixed for
<code class="docutils literal notranslate"><span class="pre">geom_label()</span></code> and the axis labels for <code class="docutils literal notranslate"><span class="pre">geom_sf()</span></code> (&#64;slowkow, #2867).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_sf()</span></code> now respects <code class="docutils literal notranslate"><span class="pre">lineend</span></code>, <code class="docutils literal notranslate"><span class="pre">linejoin</span></code>, and <code class="docutils literal notranslate"><span class="pre">linemitre</span></code> parameters
for lines and polygons (&#64;alistaire47, #2826).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> now exits without creating a new graphics device if previously
none was open (&#64;clauswilke, #2363).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labs()</span></code> now has named arguments <code class="docutils literal notranslate"><span class="pre">title</span></code>, <code class="docutils literal notranslate"><span class="pre">subtitle</span></code>, <code class="docutils literal notranslate"><span class="pre">caption</span></code>, and <code class="docutils literal notranslate"><span class="pre">tag</span></code>.
Also, <code class="docutils literal notranslate"><span class="pre">labs()</span></code> now accepts tidyeval (&#64;yutannihilation, #2669).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position_nudge()</span></code> is now more robust and nudges only in the direction
requested. This enables, for example, the horizontal nudging of boxplots
(&#64;clauswilke, #2733).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sec_axis()</span></code> and <code class="docutils literal notranslate"><span class="pre">dup_axis()</span></code> now return appropriate breaks for the secondary
axis when applied to log transformed scales (&#64;dpseidel, #2729).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sec_axis()</span></code> now works as expected when used in combination with tidy eval
(&#64;dpseidel, #2788).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_*_date()</span></code>, <code class="docutils literal notranslate"><span class="pre">scale_*_time()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_*_datetime()</span></code> can now display
a secondary axis that is a <strong>one-to-one</strong> transformation of the primary axis,
implemented using the <code class="docutils literal notranslate"><span class="pre">sec.axis</span></code> argument to the scale constructor
(&#64;dpseidel, #2244).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_contour()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_density2d()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_bin2d()</span></code>,  <code class="docutils literal notranslate"><span class="pre">stat_binhex()</span></code>
now calculate normalized statistics including <code class="docutils literal notranslate"><span class="pre">nlevel</span></code>, <code class="docutils literal notranslate"><span class="pre">ndensity</span></code>, and
<code class="docutils literal notranslate"><span class="pre">ncount</span></code>. Also, <code class="docutils literal notranslate"><span class="pre">stat_density()</span></code> now includes the calculated statistic
<code class="docutils literal notranslate"><span class="pre">nlevel</span></code>, an alias for <code class="docutils literal notranslate"><span class="pre">scaled</span></code>, to better match the syntax of <code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code>
(&#64;bjreisman, #2679).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-3-0-0">
<h1>ggplot2 3.0.0<a class="headerlink" href="#ggplot2-3-0-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id7">
<h2>Breaking changes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>ggplot2 now supports/uses tidy evaluation (as described below). This is a
major change and breaks a number of packages; we made this breaking change
because it is important to make ggplot2 more programmable, and to be more
consistent with the rest of the tidyverse. The best general (and detailed)
introduction to tidy evaluation can be found in the meta programming
chapters in <a class="reference external" href="https://adv-r.hadley.nz">Advanced R</a>.</p>
<p>The primary developer facing change is that <code class="docutils literal notranslate"><span class="pre">aes()</span></code> now contains
quosures (expression + environment pairs) rather than symbols, and you’ll
need to take a different approach to extracting the information you need.
A common symptom of this change are errors “undefined columns selected” or
“invalid ‘type’ (list) of argument” (#2610). As in the previous version,
constants (like <code class="docutils literal notranslate"><span class="pre">aes(x</span> <span class="pre">=</span> <span class="pre">1)</span></code> or <code class="docutils literal notranslate"><span class="pre">aes(colour</span> <span class="pre">=</span> <span class="pre">&quot;smoothed&quot;)</span></code>) are stored
as is.</p>
<p>In this version of ggplot2, if you need to describe a mapping in a string,
use <code class="docutils literal notranslate"><span class="pre">quo_name()</span></code> (to generate single-line strings; longer expressions may
be abbreviated) or <code class="docutils literal notranslate"><span class="pre">quo_text()</span></code> (to generate non-abbreviated strings that
may span multiple lines). If you do need to extract the value of a variable
instead use <code class="docutils literal notranslate"><span class="pre">rlang::eval_tidy()</span></code>. You may want to condition on
<code class="docutils literal notranslate"><span class="pre">(packageVersion(&quot;ggplot2&quot;)</span> <span class="pre">&lt;=</span> <span class="pre">&quot;2.2.1&quot;)</span></code> so that your code can work with
both released and development versions of ggplot2.</p>
<p>We recognise that this is a big change and if you’re not already familiar
with rlang, there’s a lot to learn. If you are stuck, or need any help,
please reach out on <a class="reference external" href="https://community.rstudio.com">https://community.rstudio.com</a>.</p>
</li>
<li><p>Error: Column <code class="docutils literal notranslate"><span class="pre">y</span></code> must be a 1d atomic vector or a list</p>
<p>Internally, ggplot2 now uses <code class="docutils literal notranslate"><span class="pre">as.data.frame(tibble::as_tibble(x))</span></code> to
convert a list into a data frame. This improves ggplot2’s support for
list-columns (needed for sf support), at a small cost: you can no longer
use matrix-columns. Note that unlike tibble we still allow column vectors
such as returned by <code class="docutils literal notranslate"><span class="pre">base::scale()</span></code> because of their widespread use.</p>
</li>
<li><p>Error: More than one expression parsed</p>
<p>Previously <code class="docutils literal notranslate"><span class="pre">aes_string(x</span> <span class="pre">=</span> <span class="pre">c(&quot;a&quot;,</span> <span class="pre">&quot;b&quot;,</span> <span class="pre">&quot;c&quot;))</span></code> silently returned
<code class="docutils literal notranslate"><span class="pre">aes(x</span> <span class="pre">=</span> <span class="pre">a)</span></code>. Now this is a clear error.</p>
</li>
<li><p>Error: <code class="docutils literal notranslate"><span class="pre">data</span></code> must be uniquely named but has duplicate columns</p>
<p>If layer data contains columns with identical names an error will be
thrown. In earlier versions the first occuring column was chosen silently,
potentially masking that the wrong data was chosen.</p>
</li>
<li><p>Error: Aesthetics must be either length 1 or the same as the data</p>
<p>Layers are stricter about the columns they will combine into a single
data frame. Each aesthetic now must be either the same length as the data
frame or a single value. This makes silent recycling errors much less likely.</p>
</li>
<li><p>Error: <code class="docutils literal notranslate"><span class="pre">coord_*</span></code> doesn’t support free scales</p>
<p>Free scales only work with selected coordinate systems; previously you’d
get an incorrect plot.</p>
</li>
<li><p>Error in f(…) : unused argument (range = c(0, 1))</p>
<p>This is because the <code class="docutils literal notranslate"><span class="pre">oob</span></code> argument to scale has been set to a function
that only takes a single argument; it needs to take two arguments
(<code class="docutils literal notranslate"><span class="pre">x</span></code>, and <code class="docutils literal notranslate"><span class="pre">range</span></code>).</p>
</li>
<li><p>Error: unused argument (output)</p>
<p>The function <code class="docutils literal notranslate"><span class="pre">guide_train()</span></code> now has an optional parameter <code class="docutils literal notranslate"><span class="pre">aesthetic</span></code>
that allows you to override the <code class="docutils literal notranslate"><span class="pre">aesthetic</span></code> setting in the scale.
To make your code work with the both released and development versions of
ggplot2 appropriate, add <code class="docutils literal notranslate"><span class="pre">aesthetic</span> <span class="pre">=</span> <span class="pre">NULL</span></code> to the <code class="docutils literal notranslate"><span class="pre">guide_train()</span></code> method
signature.</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># old</span>
<span class="n">guide_train.legend</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">guide</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span> <span class="p">{</span><span class="kc">...</span><span class="p">}</span>

<span class="c1"># new </span>
<span class="n">guide_train.legend</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">guide</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">aesthetic</span> <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span> <span class="p">{</span><span class="kc">...</span><span class="p">}</span>
</pre></div>
</div>
<p>Then, inside the function, replace <code class="docutils literal notranslate"><span class="pre">scale$aesthetics[1]</span></code>,
<code class="docutils literal notranslate"><span class="pre">aesthetic</span> <span class="pre">%||%</span> <span class="pre">scale$aesthetics[1]</span></code>. (The %||% operator is defined in the
rlang package).</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># old</span>
<span class="nf">setNames</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">scale</span><span class="o">$</span><span class="nf">map</span><span class="p">(</span><span class="n">breaks</span><span class="p">)),</span> <span class="n">scale</span><span class="o">$</span><span class="n">aesthetics</span><span class="p">[</span><span class="m">1</span><span class="p">])</span>

<span class="c1"># new</span>
<span class="nf">setNames</span><span class="p">(</span><span class="nf">list</span><span class="p">(</span><span class="n">scale</span><span class="o">$</span><span class="nf">map</span><span class="p">(</span><span class="n">breaks</span><span class="p">)),</span> <span class="n">aesthetic</span> <span class="o">%||%</span> <span class="n">scale</span><span class="o">$</span><span class="n">aesthetics</span><span class="p">[</span><span class="m">1</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>The long-deprecated <code class="docutils literal notranslate"><span class="pre">subset</span></code> argument to <code class="docutils literal notranslate"><span class="pre">layer()</span></code> has been removed.</p></li>
</ul>
</div>
<div class="section" id="tidy-evaluation">
<h2>Tidy evaluation<a class="headerlink" href="#tidy-evaluation" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">aes()</span></code> now supports quasiquotation so that you can use <code class="docutils literal notranslate"><span class="pre">!!</span></code>, <code class="docutils literal notranslate"><span class="pre">!!!</span></code>,
and <code class="docutils literal notranslate"><span class="pre">:=</span></code>. This replaces <code class="docutils literal notranslate"><span class="pre">aes_()</span></code> and <code class="docutils literal notranslate"><span class="pre">aes_string()</span></code> which are now
soft-deprecated (but will remain around for a long time).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> and <code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> now support <code class="docutils literal notranslate"><span class="pre">vars()</span></code> inputs. Like
<code class="docutils literal notranslate"><span class="pre">dplyr::vars()</span></code>, this helper quotes its inputs and supports
quasiquotation. For instance, you can now supply faceting variables
like this: <code class="docutils literal notranslate"><span class="pre">facet_wrap(vars(am,</span> <span class="pre">cyl))</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">facet_wrap(~am</span> <span class="pre">+</span> <span class="pre">cyl)</span></code>. Note that the formula interface is not going
away and will not be deprecated. <code class="docutils literal notranslate"><span class="pre">vars()</span></code> is simply meant to make it
easier to create functions around <code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> and <code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code>.</p>
<p>The first two arguments of <code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> become <code class="docutils literal notranslate"><span class="pre">rows</span></code> and <code class="docutils literal notranslate"><span class="pre">cols</span></code>
and now support <code class="docutils literal notranslate"><span class="pre">vars()</span></code> inputs. Note however that we took special
care to ensure complete backward compatibility. With this change
<code class="docutils literal notranslate"><span class="pre">facet_grid(vars(cyl),</span> <span class="pre">vars(am,</span> <span class="pre">vs))</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">facet_grid(cyl</span> <span class="pre">~</span> <span class="pre">am</span> <span class="pre">+</span> <span class="pre">vs)</span></code>, and <code class="docutils literal notranslate"><span class="pre">facet_grid(cols</span> <span class="pre">=</span> <span class="pre">vars(am,</span> <span class="pre">vs))</span></code> is
equivalent to <code class="docutils literal notranslate"><span class="pre">facet_grid(.</span> <span class="pre">~</span> <span class="pre">am</span> <span class="pre">+</span> <span class="pre">vs)</span></code>.</p>
<p>One nice aspect of the new interface is that you can now easily
supply names: <code class="docutils literal notranslate"><span class="pre">facet_grid(vars(Cylinder</span> <span class="pre">=</span> <span class="pre">cyl),</span> <span class="pre">labeller</span> <span class="pre">=</span> <span class="pre">label_both)</span></code> will give nice label titles to the facets. Of course,
those names can be unquoted with the usual tidy eval syntax.</p>
</li>
</ul>
<div class="section" id="sf">
<h3>sf<a class="headerlink" href="#sf" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>ggplot2 now has full support for sf with <code class="docutils literal notranslate"><span class="pre">geom_sf()</span></code> and <code class="docutils literal notranslate"><span class="pre">coord_sf()</span></code>:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">nc</span> <span class="o">&lt;-</span> <span class="n">sf</span><span class="o">::</span><span class="nf">st_read</span><span class="p">(</span><span class="nf">system.file</span><span class="p">(</span><span class="s">&quot;shape/nc.shp&quot;</span><span class="p">,</span> <span class="n">package</span> <span class="o">=</span> <span class="s">&quot;sf&quot;</span><span class="p">),</span> <span class="n">quiet</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span>
<span class="nf">ggplot</span><span class="p">(</span><span class="n">nc</span><span class="p">)</span> <span class="o">+</span>
  <span class="nf">geom_sf</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">fill</span> <span class="o">=</span> <span class="n">AREA</span><span class="p">))</span>
</pre></div>
</div>
<p>It supports all simple features, automatically aligns CRS across layers, sets
up the correct aspect ratio, and draws a graticule.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h2>New features<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>ggplot2 now works on R 3.1 onwards, and uses the
<a class="reference external" href="https://github.com/r-lib/vdiffr">vdiffr</a> package for visual testing.</p></li>
<li><p>In most cases, accidentally using <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> instead of <code class="docutils literal notranslate"><span class="pre">+</span></code> will generate an
informative error (#2400).</p></li>
<li><p>New syntax for calculated aesthetics. Instead of using <code class="docutils literal notranslate"><span class="pre">aes(y</span> <span class="pre">=</span> <span class="pre">..count..)</span></code>
you can (and should!) use <code class="docutils literal notranslate"><span class="pre">aes(y</span> <span class="pre">=</span> <span class="pre">stat(count))</span></code>. <code class="docutils literal notranslate"><span class="pre">stat()</span></code> is a real function
with documentation which hopefully will make this part of ggplot2 less
confusing (#2059).</p>
<p><code class="docutils literal notranslate"><span class="pre">stat()</span></code> is particularly nice for more complex calculations because you
only need to specify it once: <code class="docutils literal notranslate"><span class="pre">aes(y</span> <span class="pre">=</span> <span class="pre">stat(count</span> <span class="pre">/</span> <span class="pre">max(count)))</span></code>,
rather than <code class="docutils literal notranslate"><span class="pre">aes(y</span> <span class="pre">=</span> <span class="pre">..count..</span> <span class="pre">/</span> <span class="pre">max(..count..))</span></code></p>
</li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">tag</span></code> label for adding identification tags to plots, typically used for
labelling a subplot with a letter. Add a tag with <code class="docutils literal notranslate"><span class="pre">labs(tag</span> <span class="pre">=</span> <span class="pre">&quot;A&quot;)</span></code>, style it
with the <code class="docutils literal notranslate"><span class="pre">plot.tag</span></code> theme element, and control position with the
<code class="docutils literal notranslate"><span class="pre">plot.tag.position</span></code> theme setting (&#64;thomasp85).</p></li>
</ul>
<div class="section" id="layers-geoms-stats-and-position-adjustments">
<h3>Layers: geoms, stats, and position adjustments<a class="headerlink" href="#layers-geoms-stats-and-position-adjustments" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_segment()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_curve()</span></code> have a new <code class="docutils literal notranslate"><span class="pre">arrow.fill</span></code> parameter which
allows you to specify a separate fill colour for closed arrowheads
(&#64;hrbrmstr and &#64;clauswilke, #2375).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_point()</span></code> and friends can now take shapes as strings instead of integers,
e.g. <code class="docutils literal notranslate"><span class="pre">geom_point(shape</span> <span class="pre">=</span> <span class="pre">&quot;diamond&quot;)</span></code> (&#64;daniel-barnett, #2075).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position_dodge()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">preserve</span></code> argument that allows you to control
whether the <code class="docutils literal notranslate"><span class="pre">total</span></code> width at each <code class="docutils literal notranslate"><span class="pre">x</span></code> value is preserved (the current
default), or ensure that the width of a <code class="docutils literal notranslate"><span class="pre">single</span></code> element is preserved
(what many people want) (#1935).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">position_dodge2()</span></code> provides enhanced dodging for boxplots. Compared to
<code class="docutils literal notranslate"><span class="pre">position_dodge()</span></code>, <code class="docutils literal notranslate"><span class="pre">position_dodge2()</span></code> compares <code class="docutils literal notranslate"><span class="pre">xmin</span></code> and <code class="docutils literal notranslate"><span class="pre">xmax</span></code> values<br />
to determine which elements overlap, and spreads overlapping elements evenly
within the region of overlap. <code class="docutils literal notranslate"><span class="pre">position_dodge2()</span></code> is now the default position
adjustment for <code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code>, because it handles <code class="docutils literal notranslate"><span class="pre">varwidth</span> <span class="pre">=</span> <span class="pre">TRUE</span></code>, and
will be considered for other geoms in the future.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">padding</span></code> parameter adds a small amount of padding between elements
(&#64;karawoo, #2143) and a <code class="docutils literal notranslate"><span class="pre">reverse</span></code> parameter allows you to reverse the order
of placement (&#64;karawoo, #2171).</p>
</li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">stat_qq_line()</span></code> makes it easy to add a simple line to a Q-Q plot, which
makes it easier to judge the fit of the theoretical distribution
(&#64;nicksolomon).</p></li>
</ul>
</div>
<div class="section" id="scales-and-guides">
<h3>Scales and guides<a class="headerlink" href="#scales-and-guides" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Improved support for mapping date/time variables to <code class="docutils literal notranslate"><span class="pre">alpha</span></code>, <code class="docutils literal notranslate"><span class="pre">size</span></code>, <code class="docutils literal notranslate"><span class="pre">colour</span></code>,
and <code class="docutils literal notranslate"><span class="pre">fill</span></code> aesthetics, including <code class="docutils literal notranslate"><span class="pre">date_breaks</span></code> and <code class="docutils literal notranslate"><span class="pre">date_labels</span></code> arguments
(&#64;karawoo, #1526), and new <code class="docutils literal notranslate"><span class="pre">scale_alpha()</span></code> variants (&#64;karawoo, #1526).</p></li>
<li><p>Improved support for ordered factors. Ordered factors throw a warning when
mapped to shape (unordered factors do not), and do not throw warnings when
mapped to size or alpha (unordered factors do). Viridis is used as the
default colour and fill scale for ordered factors (&#64;karawoo, #1526).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">expand</span></code> argument of <code class="docutils literal notranslate"><span class="pre">scale_*_continuous()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_*_discrete()</span></code>
now accepts separate expansion values for the lower and upper range
limits. The expansion limits can be specified using the convenience
function <code class="docutils literal notranslate"><span class="pre">expand_scale()</span></code>.</p>
<p>Separate expansion limits may be useful for bar charts, e.g. if one
wants the bottom of the bars to be flush with the x axis but still
leave some (automatically calculated amount of) space above them:</p>
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">ggplot</span><span class="p">(</span><span class="n">mtcars</span><span class="p">)</span> <span class="o">+</span>
    <span class="nf">geom_bar</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">cyl</span><span class="p">)))</span> <span class="o">+</span>
    <span class="nf">scale_y_continuous</span><span class="p">(</span><span class="n">expand</span> <span class="o">=</span> <span class="nf">expand_scale</span><span class="p">(</span><span class="n">mult</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">.</span><span class="m">1</span><span class="p">)))</span>
</pre></div>
</div>
<p>It can also be useful for line charts, e.g. for counts over time,
where one wants to have a ’hard’ lower limit of y = 0 but leave the
upper limit unspecified (and perhaps differing between panels), with
some extra space above the highest point on the line (with symmetrical
limits, the extra space above the highest point could in some cases
cause the lower limit to be negative).</p>
<p>The old syntax for the <code class="docutils literal notranslate"><span class="pre">expand</span></code> argument will, of course, continue
to work (&#64;huftis, #1669).</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_colour_continuous()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_colour_gradient()</span></code> are now controlled
by global options <code class="docutils literal notranslate"><span class="pre">ggplot2.continuous.colour</span></code> and <code class="docutils literal notranslate"><span class="pre">ggplot2.continuous.fill</span></code>.
These can be set to <code class="docutils literal notranslate"><span class="pre">&quot;gradient&quot;</span></code> (the default) or <code class="docutils literal notranslate"><span class="pre">&quot;viridis&quot;</span></code> (&#64;karawoo).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">scale_colour_viridis_c()</span></code>/<code class="docutils literal notranslate"><span class="pre">scale_fill_viridis_c()</span></code> (continuous) and
<code class="docutils literal notranslate"><span class="pre">scale_colour_viridis_d()</span></code>/<code class="docutils literal notranslate"><span class="pre">scale_fill_viridis_d()</span></code> (discrete) make it
easy to use Viridis colour scales (&#64;karawoo, #1526).</p></li>
<li><p>Guides for <code class="docutils literal notranslate"><span class="pre">geom_text()</span></code> now accept custom labels with
<code class="docutils literal notranslate"><span class="pre">guide_legend(override.aes</span> <span class="pre">=</span> <span class="pre">list(label</span> <span class="pre">=</span> <span class="pre">&quot;foo&quot;))</span></code> (&#64;brianwdavis, #2458).</p></li>
</ul>
</div>
<div class="section" id="margins">
<h3>Margins<a class="headerlink" href="#margins" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Strips gain margins on all sides by default. This means that to fully justify
text to the edge of a strip, you will need to also set the margins to 0
(&#64;karawoo).</p></li>
<li><p>Rotated strip labels now correctly understand <code class="docutils literal notranslate"><span class="pre">hjust</span></code> and <code class="docutils literal notranslate"><span class="pre">vjust</span></code> parameters
at all angles (&#64;karawoo).</p></li>
<li><p>Strip labels now understand justification relative to the direction of the
text, meaning that in y facets, the strip text can be placed at either end of
the strip using <code class="docutils literal notranslate"><span class="pre">hjust</span></code> (&#64;karawoo).</p></li>
<li><p>Legend titles and labels get a little extra space around them, which
prevents legend titles from overlapping the legend at large font sizes
(&#64;karawoo, #1881).</p></li>
</ul>
</div>
</div>
<div class="section" id="extension-points">
<h2>Extension points<a class="headerlink" href="#extension-points" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>New <code class="docutils literal notranslate"><span class="pre">autolayer()</span></code> S3 generic (&#64;mitchelloharawild, #1974). This is similar
to <code class="docutils literal notranslate"><span class="pre">autoplot()</span></code> but produces layers rather than complete plots.</p></li>
<li><p>Custom objects can now be added using <code class="docutils literal notranslate"><span class="pre">+</span></code> if a <code class="docutils literal notranslate"><span class="pre">ggplot_add</span></code> method has been
defined for the class of the object (&#64;thomasp85).</p></li>
<li><p>Theme elements can now be subclassed. Add a <code class="docutils literal notranslate"><span class="pre">merge_element</span></code> method to control
how properties are inherited from the parent element. Add an <code class="docutils literal notranslate"><span class="pre">element_grob</span></code>
method to define how elements are rendered into grobs (&#64;thomasp85, #1981).</p></li>
<li><p>Coords have gained new extension mechanisms.</p>
<p>If you have an existing coord extension, you will need to revise the
specification of the <code class="docutils literal notranslate"><span class="pre">train()</span></code> method. It is now called
<code class="docutils literal notranslate"><span class="pre">setup_panel_params()</span></code> (better reflecting what it actually does) and now
has arguments <code class="docutils literal notranslate"><span class="pre">scale_x</span></code>, and <code class="docutils literal notranslate"><span class="pre">scale_y</span></code> (the x and y scales respectively)
and <code class="docutils literal notranslate"><span class="pre">param</span></code>, a list of plot specific parameters generated by
<code class="docutils literal notranslate"><span class="pre">setup_params()</span></code>.</p>
<p>What was formerly called <code class="docutils literal notranslate"><span class="pre">scale_details</span></code> (in coords), <code class="docutils literal notranslate"><span class="pre">panel_ranges</span></code>
(in layout) and <code class="docutils literal notranslate"><span class="pre">panel_scales</span></code> (in geoms) are now consistently called
<code class="docutils literal notranslate"><span class="pre">panel_params</span></code> (#1311). These are parameters of the coord that vary from
panel to panel.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggplot_build()</span></code> and <code class="docutils literal notranslate"><span class="pre">ggplot_gtable()</span></code> are now generics, so ggplot-subclasses
can define additional behavior during the build stage.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">guide_train()</span></code>, <code class="docutils literal notranslate"><span class="pre">guide_merge()</span></code>, <code class="docutils literal notranslate"><span class="pre">guide_geom()</span></code>, and <code class="docutils literal notranslate"><span class="pre">guide_gengrob()</span></code>
are now exported as they are needed if you want to design your own guide.
They are not currently documented; use at your own risk (#2528).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_type()</span></code> generic is now exported and documented. Use this if you
want to extend ggplot2 to work with a new type of vector.</p></li>
</ul>
</div>
<div class="section" id="minor-bug-fixes-and-improvements">
<h2>Minor bug fixes and improvements<a class="headerlink" href="#minor-bug-fixes-and-improvements" title="Permalink to this headline">¶</a></h2>
<div class="section" id="faceting">
<h3>Faceting<a class="headerlink" href="#faceting" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> gives a more informative error message if you try to use
a variable in both rows and cols (#1928).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> and <code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> both give better error messages if you
attempt to use an unsupported coord with free scales (#2049).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">label_parsed()</span></code> works once again (#2279).</p></li>
<li><p>You can now style the background of horizontal and vertical strips
independently with <code class="docutils literal notranslate"><span class="pre">strip.background.x</span></code> and <code class="docutils literal notranslate"><span class="pre">strip.background.y</span></code>
theme settings (#2249).</p></li>
</ul>
</div>
<div class="section" id="scales">
<h3>Scales<a class="headerlink" href="#scales" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">discrete_scale()</span></code> documentation now inherits shared definitions from
<code class="docutils literal notranslate"><span class="pre">continuous_scale()</span></code> (&#64;alistaire47, #2052).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code> shows all colours of the scale (&#64;has2k1, #2343).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_identity()</span></code> once again produces legends by default (#2112).</p></li>
<li><p>Tick marks for secondary axes with strong transformations are more
accurately placed (&#64;thomasp85, #1992).</p></li>
<li><p>Missing line types now reliably generate missing lines (with standard
warning) (#2206).</p></li>
<li><p>Legends now ignore set aesthetics that are not length one (#1932).</p></li>
<li><p>All colour and fill scales now have an <code class="docutils literal notranslate"><span class="pre">aesthetics</span></code> argument that can
be used to set the aesthetic(s) the scale works with. This makes it
possible to apply a colour scale to both colour and fill aesthetics
at the same time, via <code class="docutils literal notranslate"><span class="pre">aesthetics</span> <span class="pre">=</span> <span class="pre">c(&quot;colour&quot;,</span> <span class="pre">&quot;fill&quot;)</span></code> (&#64;clauswilke).</p></li>
<li><p>Three new generic scales work with any aesthetic or set of aesthetics:
<code class="docutils literal notranslate"><span class="pre">scale_continuous_identity()</span></code>, <code class="docutils literal notranslate"><span class="pre">scale_discrete_identity()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">scale_discrete_manual()</span></code> (&#64;clauswilke).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_*_gradient2()</span></code> now consistently omits points outside limits by
rescaling after the limits are enforced (&#64;foo-bar-baz-qux, #2230).</p></li>
</ul>
</div>
<div class="section" id="layers">
<h3>Layers<a class="headerlink" href="#layers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_label()</span></code> now correctly produces unbordered labels when <code class="docutils literal notranslate"><span class="pre">label.size</span></code>
is 0, even when saving to PDF (&#64;bfgray3, #2407).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer()</span></code> gives considerably better error messages for incorrectly specified
<code class="docutils literal notranslate"><span class="pre">geom</span></code>, <code class="docutils literal notranslate"><span class="pre">stat</span></code>, or <code class="docutils literal notranslate"><span class="pre">position</span></code> (#2401).</p></li>
<li><p>In all layers that use it, <code class="docutils literal notranslate"><span class="pre">linemitre</span></code> now defaults to 10 (instead of 1)
to better match base R.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code> now supplies a default value if no <code class="docutils literal notranslate"><span class="pre">x</span></code> aesthetic is present
(&#64;foo-bar-baz-qux, #2110).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_density()</span></code> drops groups with fewer than two data points and throws a
warning. For groups with two data points, density values are now calculated
with <code class="docutils literal notranslate"><span class="pre">stats::density</span></code> (&#64;karawoo, #2127).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_segment()</span></code> now also takes a <code class="docutils literal notranslate"><span class="pre">linejoin</span></code> parameter. This allows more
control over the appearance of the segments, which is especially useful for
plotting thick arrows (&#64;Ax3man, #774).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code> now reports the formula used when <code class="docutils literal notranslate"><span class="pre">method</span> <span class="pre">=</span> <span class="pre">&quot;auto&quot;</span></code>
(&#64;davharris #1951). <code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code> now orders by the <code class="docutils literal notranslate"><span class="pre">x</span></code> aesthetic, making it
easier to pass pre-computed values without manual ordering (&#64;izahn, #2028). It
also now knows it has <code class="docutils literal notranslate"><span class="pre">ymin</span></code> and <code class="docutils literal notranslate"><span class="pre">ymax</span></code> aesthetics (#1939). The legend
correctly reflects the status of the <code class="docutils literal notranslate"><span class="pre">se</span></code> argument when used with stats
other than the default (&#64;clauswilke, #1546).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_tile()</span></code> now once again interprets <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> correctly
(&#64;malcolmbarrett, #2510).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position_jitter()</span></code> and <code class="docutils literal notranslate"><span class="pre">position_jitterdodge()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">seed</span></code> argument that
allows the specification of a random seed for reproducible jittering
(&#64;krlmlr, #1996 and &#64;slowkow, #2445).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_density()</span></code> has better behaviour if all groups are dropped because they
are too small (#2282).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_summary_bin()</span></code> now understands the <code class="docutils literal notranslate"><span class="pre">breaks</span></code> parameter (&#64;karawoo, #2214).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> now accepts functions for <code class="docutils literal notranslate"><span class="pre">binwidth</span></code>. This allows better binning
when faceting along variables with different ranges (&#64;botanize).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code> now sum correctly when using the <code class="docutils literal notranslate"><span class="pre">weight</span></code>
aesthetic (&#64;jiho, #1921).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> again uses correct scaling for the computed variable <code class="docutils literal notranslate"><span class="pre">ndensity</span></code>
(&#64;timgoodman, #2324).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_bin_2d()</span></code> now properly handle the <code class="docutils literal notranslate"><span class="pre">breaks</span></code> parameter
when the scales are transformed (&#64;has2k1, #2366).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">update_geom_defaults()</span></code> and <code class="docutils literal notranslate"><span class="pre">update_stat_defaults()</span></code> allow American
spelling of aesthetic parameters (&#64;foo-bar-baz-qux, #2299).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">show.legend</span></code> parameter now accepts a named logical vector to hide/show
only some aesthetics in the legend (&#64;tutuchan, #1798).</p></li>
<li><p>Layers now silently ignore unknown aesthetics with value <code class="docutils literal notranslate"><span class="pre">NULL</span></code> (#1909).</p></li>
</ul>
</div>
<div class="section" id="coords">
<h3>Coords<a class="headerlink" href="#coords" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Clipping to the plot panel is now configurable, through a <code class="docutils literal notranslate"><span class="pre">clip</span></code> argument
to coordinate systems, e.g. <code class="docutils literal notranslate"><span class="pre">coord_cartesian(clip</span> <span class="pre">=</span> <span class="pre">&quot;off&quot;)</span></code>
(&#64;clauswilke, #2536).</p></li>
<li><p>Like scales, coordinate systems now give you a message when you’re
replacing an existing coordinate system (#2264).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_polar()</span></code> now draws secondary axis ticks and labels
(&#64;dylan-stark, #2072), and can draw the radius axis on the right
(&#64;thomasp85, #2005).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_trans()</span></code> now generates a warning when a transformation generates
non-finite values (&#64;foo-bar-baz-qux, #2147).</p></li>
</ul>
</div>
<div class="section" id="themes">
<h3>Themes<a class="headerlink" href="#themes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Complete themes now always override all elements of the default theme
(&#64;has2k1, #2058, #2079).</p></li>
<li><p>Themes now set default grid colour in <code class="docutils literal notranslate"><span class="pre">panel.grid</span></code> rather than individually
in <code class="docutils literal notranslate"><span class="pre">panel.grid.major</span></code> and <code class="docutils literal notranslate"><span class="pre">panel.grid.minor</span></code> individually. This makes it
slightly easier to customise the theme (#2352).</p></li>
<li><p>Fixed bug when setting strips to <code class="docutils literal notranslate"><span class="pre">element_blank()</span></code> (&#64;thomasp85).</p></li>
<li><p>Axes positioned on the top and to the right can now customize their ticks and
lines separately (&#64;thomasp85, #1899).</p></li>
<li><p>Built-in themes gain parameters <code class="docutils literal notranslate"><span class="pre">base_line_size</span></code> and <code class="docutils literal notranslate"><span class="pre">base_rect_size</span></code> which
control the default sizes of line and rectangle elements (&#64;karawoo, #2176).</p></li>
<li><p>Default themes use <code class="docutils literal notranslate"><span class="pre">rel()</span></code> to set line widths (&#64;baptiste).</p></li>
<li><p>Themes were tweaked for visual consistency and more graceful behavior when
changing the base font size. All absolute heights or widths were replaced
with heights or widths that are proportional to the base font size. One
relative font size was eliminated (&#64;clauswilke).</p></li>
<li><p>The height of descenders is now calculated solely on font metrics and doesn’t
change with the specific letters in the string. This fixes minor alignment
issues with plot titles, subtitles, and legend titles (#2288, &#64;clauswilke).</p></li>
</ul>
</div>
<div class="section" id="guides">
<h3>Guides<a class="headerlink" href="#guides" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code> is more configurable: tick marks and color bar frame
can now by styled with arguments <code class="docutils literal notranslate"><span class="pre">ticks.colour</span></code>, <code class="docutils literal notranslate"><span class="pre">ticks.linewidth</span></code>,
<code class="docutils literal notranslate"><span class="pre">frame.colour</span></code>, <code class="docutils literal notranslate"><span class="pre">frame.linewidth</span></code>, and <code class="docutils literal notranslate"><span class="pre">frame.linetype</span></code>
(&#64;clauswilke).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code> now uses <code class="docutils literal notranslate"><span class="pre">legend.spacing.x</span></code> and <code class="docutils literal notranslate"><span class="pre">legend.spacing.y</span></code>
correctly, and it can handle multi-line titles. Minor tweaks were made to
<code class="docutils literal notranslate"><span class="pre">guide_legend()</span></code> to make sure the two legend functions behave as similarly as
possible (&#64;clauswilke, #2397 and #2398).</p></li>
<li><p>The theme elements <code class="docutils literal notranslate"><span class="pre">legend.title</span></code> and <code class="docutils literal notranslate"><span class="pre">legend.text</span></code> now respect the settings
of <code class="docutils literal notranslate"><span class="pre">margin</span></code>, <code class="docutils literal notranslate"><span class="pre">hjust</span></code>, and <code class="docutils literal notranslate"><span class="pre">vjust</span></code> (&#64;clauswilke, #2465, #1502).</p></li>
<li><p>Non-angle parameters of <code class="docutils literal notranslate"><span class="pre">label.theme</span></code> or <code class="docutils literal notranslate"><span class="pre">title.theme</span></code> can now be set in
<code class="docutils literal notranslate"><span class="pre">guide_legend()</span></code> and <code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code> (&#64;clauswilke, #2544).</p></li>
</ul>
</div>
<div class="section" id="other">
<h3>Other<a class="headerlink" href="#other" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fortify()</span></code> gains a method for tbls (&#64;karawoo, #2218).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggplot</span></code> gains a method for <code class="docutils literal notranslate"><span class="pre">grouped_df</span></code>s that adds a <code class="docutils literal notranslate"><span class="pre">.group</span></code> variable,
which computes a unique value for each group. Use it with
<code class="docutils literal notranslate"><span class="pre">aes(group</span> <span class="pre">=</span> <span class="pre">.group)</span></code> (#2351).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggproto()</span></code> produces objects with class <code class="docutils literal notranslate"><span class="pre">c(&quot;ggproto&quot;,</span> <span class="pre">&quot;gg&quot;)</span></code>, allowing for
a more informative error message when adding layers, scales, or other ggproto
objects (&#64;jrnold, #2056).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggsave()</span></code>’s DPI argument now supports 3 string options: “retina” (320
DPI), “print” (300 DPI), and “screen” (72 DPI) (&#64;foo-bar-baz-qux, #2156).
<code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> now uses full argument names to avoid partial match warnings
(#2355), and correctly restores the previous graphics device when several
graphics devices are open (#2363).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">print.ggplot()</span></code> now returns the original ggplot object, instead of the
output from <code class="docutils literal notranslate"><span class="pre">ggplot_build()</span></code>. Also, the object returned from
<code class="docutils literal notranslate"><span class="pre">ggplot_build()</span></code> now has the class <code class="docutils literal notranslate"><span class="pre">&quot;ggplot_built&quot;</span></code> (#2034).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map_data()</span></code> now works even when purrr is loaded (tidyverse#66).</p></li>
<li><p>New functions <code class="docutils literal notranslate"><span class="pre">summarise_layout()</span></code>, <code class="docutils literal notranslate"><span class="pre">summarise_coord()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">summarise_layers()</span></code> summarise the layout, coordinate systems, and layers
of a built ggplot object (#2034, &#64;wch). This provides a tested API that
(e.g.) shiny can depend on.</p></li>
<li><p>Updated startup messages reflect new resources (#2410, &#64;mine-cetinkaya-rundel).</p></li>
</ul>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-2-2-1">
<h1>ggplot2 2.2.1<a class="headerlink" href="#ggplot2-2-2-1" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Fix usage of <code class="docutils literal notranslate"><span class="pre">structure(NULL)</span></code> for R-devel compatibility (#1968).</p></li>
</ul>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-2-2-0">
<h1>ggplot2 2.2.0<a class="headerlink" href="#ggplot2-2-2-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="major-new-features">
<h2>Major new features<a class="headerlink" href="#major-new-features" title="Permalink to this headline">¶</a></h2>
<div class="section" id="subtitle-and-caption">
<h3>Subtitle and caption<a class="headerlink" href="#subtitle-and-caption" title="Permalink to this headline">¶</a></h3>
<p>Thanks to &#64;hrbrmstr plots now have subtitles and captions, which can be set with
the <code class="docutils literal notranslate"><span class="pre">subtitle</span></code>  and <code class="docutils literal notranslate"><span class="pre">caption</span></code> arguments to <code class="docutils literal notranslate"><span class="pre">ggtitle()</span></code> and <code class="docutils literal notranslate"><span class="pre">labs()</span></code>. You can
control their appearance with the theme settings <code class="docutils literal notranslate"><span class="pre">plot.caption</span></code> and
<code class="docutils literal notranslate"><span class="pre">plot.subtitle</span></code>. The main plot title is now left-aligned to better work better
with a subtitle. The caption is right-aligned (&#64;hrbrmstr).</p>
</div>
<div class="section" id="stacking">
<h3>Stacking<a class="headerlink" href="#stacking" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">position_stack()</span></code> and <code class="docutils literal notranslate"><span class="pre">position_fill()</span></code> now sort the stacking order to match
grouping order. This allows you to control the order through grouping, and
ensures that the default legend matches the plot (#1552, #1593). If you want the
opposite order (useful if you have horizontal bars and horizontal legend), you
can request reverse stacking by using <code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">position_stack(reverse</span> <span class="pre">=</span> <span class="pre">TRUE)</span></code>
(#1837).</p>
<p><code class="docutils literal notranslate"><span class="pre">position_stack()</span></code> and <code class="docutils literal notranslate"><span class="pre">position_fill()</span></code> now accepts negative values which will
create stacks extending below the x-axis (#1691).</p>
<p><code class="docutils literal notranslate"><span class="pre">position_stack()</span></code> and <code class="docutils literal notranslate"><span class="pre">position_fill()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">vjust</span></code> argument which makes it
easy to (e.g.) display labels in the middle of stacked bars (#1821).</p>
</div>
<div class="section" id="id9">
<h3>Layers<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">geom_col()</span></code> was added to complement <code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code> (&#64;hrbrmstr). It uses
<code class="docutils literal notranslate"><span class="pre">stat=&quot;identity&quot;</span></code> by default, making the <code class="docutils literal notranslate"><span class="pre">y</span></code> aesthetic mandatory. It does not
support any other <code class="docutils literal notranslate"><span class="pre">stat_()</span></code> and does not provide fallback support for the
<code class="docutils literal notranslate"><span class="pre">binwidth</span></code> parameter. Examples and references in other functions were updated to
demonstrate <code class="docutils literal notranslate"><span class="pre">geom_col()</span></code> usage.</p>
<p>When creating a layer, ggplot2 will warn if you use an unknown aesthetic or an
unknown parameter. Compared to the previous version, this is stricter for
aesthetics (previously there was no message), and less strict for parameters
(previously this threw an error) (#1585).</p>
</div>
<div class="section" id="facetting">
<h3>Facetting<a class="headerlink" href="#facetting" title="Permalink to this headline">¶</a></h3>
<p>The facet system, as well as the internal panel class, has been rewritten in
ggproto. Facets are now extendable in the same manner as geoms and stats, as
described in <code class="docutils literal notranslate"><span class="pre">vignette(&quot;extending-ggplot2&quot;)</span></code>.</p>
<p>We have also added the following new fatures.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> and <code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> now allow expressions in their faceting
formulas (&#64;DanRuderman, #1596).</p></li>
<li><p>When <code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> results in an uneven number of panels, axes will now be
drawn underneath the hanging panels (fixes #1607)</p></li>
<li><p>Strips can now be freely positioned in <code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> using the
<code class="docutils literal notranslate"><span class="pre">strip.position</span></code> argument (deprecates <code class="docutils literal notranslate"><span class="pre">switch</span></code>).</p></li>
<li><p>The relative order of panel, strip, and axis can now be controlled with
the theme setting <code class="docutils literal notranslate"><span class="pre">strip.placement</span></code> that takes either <code class="docutils literal notranslate"><span class="pre">inside</span></code> (strip between
panel and axis) or <code class="docutils literal notranslate"><span class="pre">outside</span></code> (strip after axis).</p></li>
<li><p>The theme option <code class="docutils literal notranslate"><span class="pre">panel.margin</span></code> has been deprecated in favour of
<code class="docutils literal notranslate"><span class="pre">panel.spacing</span></code> to more clearly communicate intent.</p></li>
</ul>
</div>
<div class="section" id="id10">
<h3>Extensions<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Unfortunately there was a major oversight in the construction of ggproto which
lead to extensions capturing the super object at package build time, instead of
at package run time (#1826). This problem has been fixed, but requires
re-installation of all extension packages.</p>
</div>
</div>
<div class="section" id="id11">
<h2>Scales<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The position of x and y axes can now be changed using the <code class="docutils literal notranslate"><span class="pre">position</span></code> argument
in <code class="docutils literal notranslate"><span class="pre">scale_x_*</span></code>and <code class="docutils literal notranslate"><span class="pre">scale_y_*</span></code> which can take <code class="docutils literal notranslate"><span class="pre">top</span></code> and <code class="docutils literal notranslate"><span class="pre">bottom</span></code>, and <code class="docutils literal notranslate"><span class="pre">left</span></code>
and <code class="docutils literal notranslate"><span class="pre">right</span></code> respectively. The themes of top and right axes can be modified
using the <code class="docutils literal notranslate"><span class="pre">.top</span></code> and <code class="docutils literal notranslate"><span class="pre">.right</span></code> modifiers to <code class="docutils literal notranslate"><span class="pre">axis.text.*</span></code> and <code class="docutils literal notranslate"><span class="pre">axis.title.*</span></code>.</p></li>
</ul>
<div class="section" id="continuous-scales">
<h3>Continuous scales<a class="headerlink" href="#continuous-scales" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scale_x_continuous()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_y_continuous()</span></code> can now display a secondary
axis that is a <strong>one-to-one</strong> transformation of the primary axis (e.g. degrees
Celcius to degrees Fahrenheit). The secondary axis will be positioned opposite
to the primary axis and can be controlled with the <code class="docutils literal notranslate"><span class="pre">sec.axis</span></code> argument to
the scale constructor.</p></li>
<li><p>Scales worry less about having breaks. If no breaks can be computed, the
plot will work instead of throwing an uninformative error (#791). This
is particularly helpful when you have facets with free scales, and not
all panels contain data.</p></li>
<li><p>Scales now warn when transformation introduces infinite values (#1696).</p></li>
</ul>
</div>
<div class="section" id="date-time">
<h3>Date time<a class="headerlink" href="#date-time" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scale_*_datetime()</span></code> now supports time zones. It will use the timezone
attached to the varaible by default, but can be overridden with the
<code class="docutils literal notranslate"><span class="pre">timezone</span></code> argument.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">scale_x_time()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_y_time()</span></code> generate reasonable default
breaks and labels for hms vectors (#1752).</p></li>
</ul>
</div>
<div class="section" id="discrete-scales">
<h3>Discrete scales<a class="headerlink" href="#discrete-scales" title="Permalink to this headline">¶</a></h3>
<p>The treatment of missing values by discrete scales has been thoroughly
overhauled (#1584). The underlying principle is that we can naturally represent
missing values on discrete variables (by treating just like another level), so
by default we should.</p>
<p>This principle applies to:</p>
<ul class="simple">
<li><p>character vectors</p></li>
<li><p>factors with implicit NA</p></li>
<li><p>factors with explicit NA</p></li>
</ul>
<p>And to all scales (both position and non-position.)</p>
<p>Compared to the previous version of ggplot2, there are three main changes:</p>
<ol class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scale_x_discrete()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_y_discrete()</span></code> always show discrete NA,
regardless of their source</p></li>
<li><p>If present, <code class="docutils literal notranslate"><span class="pre">NA</span></code>s are shown in discete legends.</p></li>
<li><p>All discrete scales gain a <code class="docutils literal notranslate"><span class="pre">na.translate</span></code> argument that allows you to
control whether <code class="docutils literal notranslate"><span class="pre">NA</span></code>s are translated to something that can be visualised,
or should be left as missing. Note that if you don’t translate (i.e.
<code class="docutils literal notranslate"><span class="pre">na.translate</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> the missing values will passed on to the layer,
which will warning that it’s dropping missing values. To suppress the
warnings, you’ll also need to add <code class="docutils literal notranslate"><span class="pre">na.rm</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> to the layer call.</p></li>
</ol>
<p>There were also a number of other smaller changes</p>
<ul class="simple">
<li><p>Correctly use scale expansion factors.</p></li>
<li><p>Don’t preserve space for dropped levels (#1638).</p></li>
<li><p>Only issue one warning when when asking for too many levels (#1674).</p></li>
<li><p>Unicode labels work better on Windows (#1827).</p></li>
<li><p>Warn when used with only continuous data (#1589)</p></li>
</ul>
</div>
</div>
<div class="section" id="id12">
<h2>Themes<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">theme()</span></code> constructor now has named arguments rather than ellipses. This
should make autocomplete substantially more useful. The documentation
(including examples) has been considerably improved.</p></li>
<li><p>Built-in themes are more visually homogeneous, and match <code class="docutils literal notranslate"><span class="pre">theme_grey</span></code> better.
(&#64;jiho, #1679)</p></li>
<li><p>When computing the height of titles, ggplot2 now includes the height of the
descenders (i.e. the bits of <code class="docutils literal notranslate"><span class="pre">g</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> that hang beneath the baseline). This
improves the margins around titles, particularly the y axis label (#1712).
I have also very slightly increased the inner margins of axis titles, and
removed the outer margins.</p></li>
<li><p>Theme element inheritance is now easier to work with as modification now
overrides default <code class="docutils literal notranslate"><span class="pre">element_blank</span></code> elements (#1555, #1557, #1565, #1567)</p></li>
<li><p>Horizontal legends (i.e. legends on the top or bottom) are horizontally
aligned by default (#1842). Use <code class="docutils literal notranslate"><span class="pre">legend.box</span> <span class="pre">=</span> <span class="pre">&quot;vertical&quot;</span></code> to switch back
to the previous behaviour.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">element_line()</span></code> now takes an <code class="docutils literal notranslate"><span class="pre">arrow</span></code> argument to specify arrows at the end of
lines (#1740)</p></li>
</ul>
<p>There were a number of tweaks to the theme elements that control legends:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">legend.justification</span></code> now controls appearance will plotting the legend
outside of the plot area. For example, you can use
<code class="docutils literal notranslate"><span class="pre">theme(legend.justification</span> <span class="pre">=</span> <span class="pre">&quot;top&quot;)</span></code> to make the legend align with the
top of the plot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">panel.margin</span></code> and <code class="docutils literal notranslate"><span class="pre">legend.margin</span></code> have been renamed to <code class="docutils literal notranslate"><span class="pre">panel.spacing</span></code> and
<code class="docutils literal notranslate"><span class="pre">legend.spacing</span></code> respectively, to better communicate intent (they only
affect spacing between legends and panels, not the margins around them)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">legend.margin</span></code> now controls margin around individual legends.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">legend.box.background</span></code>, <code class="docutils literal notranslate"><span class="pre">legend.box.spacing</span></code>, and <code class="docutils literal notranslate"><span class="pre">legend.box.margin</span></code>
control the background, spacing, and margin of the legend box (the region
that contains all legends).</p></li>
</ul>
</div>
<div class="section" id="bug-fixes-and-minor-improvements">
<h2>Bug fixes and minor improvements<a class="headerlink" href="#bug-fixes-and-minor-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>ggplot2 now imports tibble. This ensures that all built-in datasets print
compactly even if you haven’t explicitly loaded tibble or dplyr (#1677).</p></li>
<li><p>Class of aesthetic mapping is preserved when adding <code class="docutils literal notranslate"><span class="pre">aes()</span></code> objects (#1624).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">+.gg</span></code> now works for lists that include data frames.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">annotation_x()</span></code> now works in the absense of global data (#1655)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_*(show.legend</span> <span class="pre">=</span> <span class="pre">FALSE)</span></code> now works for <code class="docutils literal notranslate"><span class="pre">guide_colorbar</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code> gains new <code class="docutils literal notranslate"><span class="pre">outlier.alpha</span></code> (&#64;jonathan-g) and
<code class="docutils literal notranslate"><span class="pre">outlier.fill</span></code> (&#64;schloerke, #1787) parameters to control the alpha/fill of
outlier points independently of the alpha of the boxes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position_jitter()</span></code> (and hence <code class="docutils literal notranslate"><span class="pre">geom_jitter()</span></code>) now correctly computes
the jitter width/jitter when supplied by the user (#1775, &#64;has2k1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_contour()</span></code> more clearly describes what inputs it needs (#1577).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_curve()</span></code> respects the <code class="docutils literal notranslate"><span class="pre">lineend</span></code> paramater (#1852).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> understand the <code class="docutils literal notranslate"><span class="pre">breaks</span></code> parameter once
more. (#1665). The floating point adjustment for histogram bins is now
actually used - it was previously inadvertently ignored (#1651).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_violin()</span></code> no longer transforms quantile lines with the alpha aesthetic
(&#64;mnbram, #1714). It no longer errors when quantiles are requested but data
have zero range (#1687). When <code class="docutils literal notranslate"><span class="pre">trim</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> it once again has a nice
range that allows the density to reach zero (by extending the range 3
bandwidths to either side of the data) (#1700).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_dotplot()</span></code> works better when faceting and binning on the y-axis.
(#1618, &#64;has2k1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_hexbin()</span></code> once again supports <code class="docutils literal notranslate"><span class="pre">..density..</span></code> (&#64;mikebirdgeneau, #1688).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_step()</span></code> gives useful warning if only one data point in layer (#1645).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer()</span></code> gains new <code class="docutils literal notranslate"><span class="pre">check.aes</span></code> and <code class="docutils literal notranslate"><span class="pre">check.param</span></code> arguments. These allow
geom/stat authors to optional suppress checks for known aesthetics/parameters.
Currently this is used only in <code class="docutils literal notranslate"><span class="pre">geom_blank()</span></code> which powers <code class="docutils literal notranslate"><span class="pre">expand_limits()</span></code>
(#1795).</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">stat_*()</span></code> display a better error message when required aesthetics are
missing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_summary_hex()</span></code> now accept length 1 <code class="docutils literal notranslate"><span class="pre">binwidth</span></code> (#1610)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_density()</span></code> gains new argument <code class="docutils literal notranslate"><span class="pre">n</span></code>, which is passed to underlying function
<code class="docutils literal notranslate"><span class="pre">stats::density</span></code> (“number of equally spaced points at which the
density is to be estimated”). (&#64;hbuschme)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_binhex()</span></code> now again returns <code class="docutils literal notranslate"><span class="pre">count</span></code> rather than <code class="docutils literal notranslate"><span class="pre">value</span></code> (#1747)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_ecdf()</span></code> respects <code class="docutils literal notranslate"><span class="pre">pad</span></code> argument (#1646).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_smooth()</span></code> once again informs you about the method it has chosen.
It also correctly calculates the size of the largest group within facets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> scales are now symmetric regarding the list of
aesthetics they accept: <code class="docutils literal notranslate"><span class="pre">xmin_final</span></code>, <code class="docutils literal notranslate"><span class="pre">xmax_final</span></code>, <code class="docutils literal notranslate"><span class="pre">xlower</span></code>,
<code class="docutils literal notranslate"><span class="pre">xmiddle</span></code> and <code class="docutils literal notranslate"><span class="pre">xupper</span></code> are now valid <code class="docutils literal notranslate"><span class="pre">x</span></code> aesthetics.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Scale</span></code> extensions can now override the <code class="docutils literal notranslate"><span class="pre">make_title</span></code> and <code class="docutils literal notranslate"><span class="pre">make_sec_title</span></code>
methods to let the scale modify the axis/legend titles.</p></li>
<li><p>The random stream is now reset after calling <code class="docutils literal notranslate"><span class="pre">.onAttach()</span></code> (#2409).</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-2-1-0">
<h1>ggplot2 2.1.0<a class="headerlink" href="#ggplot2-2-1-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id13">
<h2>New features<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>When mapping an aesthetic to a constant (e.g.
<code class="docutils literal notranslate"><span class="pre">geom_smooth(aes(colour</span> <span class="pre">=</span> <span class="pre">&quot;loess&quot;)))</span></code>), the default guide title is the name
of the aesthetic (i.e. “colour”), not the value (i.e. “loess”) (#1431).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer()</span></code> now accepts a function as the data argument. The function will be
applied to the data passed to the <code class="docutils literal notranslate"><span class="pre">ggplot()</span></code> function and must return a
data.frame (#1527, &#64;thomasp85). This is a more general version of the
deprecated <code class="docutils literal notranslate"><span class="pre">subset</span></code> argument.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theme_update()</span></code> now uses the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator instead of <code class="docutils literal notranslate"><span class="pre">%+replace%</span></code>, so that
unspecified values will no longer be <code class="docutils literal notranslate"><span class="pre">NULL</span></code>ed out. <code class="docutils literal notranslate"><span class="pre">theme_replace()</span></code>
preserves the old behaviour if desired (&#64;oneillkza, #1519).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> has been overhauled to use the same algorithm as ggvis, which
has been considerably improved thanks to the advice of Randy Prium (&#64;rpruim).
This includes:</p>
<ul>
<li><p>Better arguments and a better algorithm for determining the origin.
You can now specify either <code class="docutils literal notranslate"><span class="pre">boundary</span></code> or the <code class="docutils literal notranslate"><span class="pre">center</span></code> of a bin.
<code class="docutils literal notranslate"><span class="pre">origin</span></code> has been deprecated in favour of these arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">drop</span></code> is deprecated in favour of <code class="docutils literal notranslate"><span class="pre">pad</span></code>, which adds extra 0-count bins
at either end (needed for frequency polygons). <code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code> defaults
to <code class="docutils literal notranslate"><span class="pre">pad</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> which considerably improves the default limits for
the histogram, especially when the bins are big (#1477).</p></li>
<li><p>The default algorithm does a (somewhat) better job at picking nice widths
and origins across a wider range of input data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bins</span> <span class="pre">=</span> <span class="pre">n</span></code> now gives a histogram with <code class="docutils literal notranslate"><span class="pre">n</span></code> bins, not <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">+</span> <span class="pre">1</span></code> (#1487).</p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h2>Bug fixes<a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>All <code class="docutils literal notranslate"><span class="pre">\donttest{}</span></code> examples run.</p></li>
<li><p>All <code class="docutils literal notranslate"><span class="pre">geom_()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_()</span></code> functions now have consistent argument order:
data + mapping, then geom/stat/position, then <code class="docutils literal notranslate"><span class="pre">...</span></code>, then specific arguments,
then arguments common to all layers (#1305). This may break code if you were
previously relying on partial name matching, but in the long-term should make
ggplot2 easier to use. In particular, you can now set the <code class="docutils literal notranslate"><span class="pre">n</span></code> parameter
in <code class="docutils literal notranslate"><span class="pre">geom_density2d()</span></code> without it partially matching <code class="docutils literal notranslate"><span class="pre">na.rm</span></code> (#1485).</p></li>
<li><p>For geoms with both <code class="docutils literal notranslate"><span class="pre">colour</span></code> and <code class="docutils literal notranslate"><span class="pre">fill</span></code>, <code class="docutils literal notranslate"><span class="pre">alpha</span></code> once again only affects
fill (Reverts #1371, #1523). This was causing problems for people.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code>/<code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> works with multiple empty panels of data
(#1445).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> correctly swaps <code class="docutils literal notranslate"><span class="pre">nrow</span></code> and <code class="docutils literal notranslate"><span class="pre">ncol</span></code> when faceting vertically
(#1417).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggsave(&quot;x.svg&quot;)</span></code> now uses svglite to produce the svg (#1432).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code> now understands <code class="docutils literal notranslate"><span class="pre">outlier.color</span></code> (#1455).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_path()</span></code> knows that “solid” (not just 1) represents a solid line (#1534).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_ribbon()</span></code> preserves missing values so they correctly generate a
gap in the ribbon (#1549).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_tile()</span></code> once again accepts <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> parameters (#1513).
It uses <code class="docutils literal notranslate"><span class="pre">draw_key_polygon()</span></code> for better a legend, including a coloured
outline (#1484).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">layer()</span></code> now automatically adds a <code class="docutils literal notranslate"><span class="pre">na.rm</span></code> parameter if none is explicitly
supplied.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position_jitterdodge()</span></code> now works on all possible dodge aesthetics,
e.g. <code class="docutils literal notranslate"><span class="pre">color</span></code>, <code class="docutils literal notranslate"><span class="pre">linetype</span></code> etc. instead of only based on <code class="docutils literal notranslate"><span class="pre">fill</span></code> (&#64;bleutner)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">position</span> <span class="pre">=</span> <span class="pre">&quot;nudge&quot;</span></code> now works (although it doesn’t do anything useful)
(#1428).</p></li>
<li><p>The default scale for columns of class “AsIs” is now “identity” (#1518).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_*_discrete()</span></code> has better defaults when used with purely continuous
data (#1542).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_size()</span></code> warns when used with categorical data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_size()</span></code>, <code class="docutils literal notranslate"><span class="pre">scale_colour()</span></code>, and <code class="docutils literal notranslate"><span class="pre">scale_fill()</span></code> gain date and date-time
variants (#1526).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin_hex()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_bin_summary()</span></code> now use the same underlying
algorithm so results are consistent (#1383). <code class="docutils literal notranslate"><span class="pre">stat_bin_hex()</span></code> now accepts
a <code class="docutils literal notranslate"><span class="pre">weight</span></code> aesthetic. To be consistent with related stats, the output variable
from <code class="docutils literal notranslate"><span class="pre">stat_bin_hex()</span></code> is now value instead of count.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_density()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">bw</span></code> parameter which makes it easy to get consistent
smoothing between facets (&#64;jiho)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat-density-2d()</span></code> no longer ignores the <code class="docutils literal notranslate"><span class="pre">h</span></code> parameter, and now accepts
<code class="docutils literal notranslate"><span class="pre">bins</span></code> and <code class="docutils literal notranslate"><span class="pre">binwidth</span></code> parameters to control the number of contours
(#1448, &#64;has2k1).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_ecdf()</span></code> does a better job of adding padding to -Inf/Inf, and gains
an argument <code class="docutils literal notranslate"><span class="pre">pad</span></code> to suppress the padding if not needed (#1467).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_function()</span></code> gains an <code class="docutils literal notranslate"><span class="pre">xlim</span></code> parameter (#1528). It once again works
with discrete x values (#1509).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_summary()</span></code> preserves sorted x order which avoids artefacts when
display results with <code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code> (#1520).</p></li>
<li><p>All elements should now inherit correctly for all themes except <code class="docutils literal notranslate"><span class="pre">theme_void()</span></code>.
(&#64;Katiedaisey, #1555)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theme_void()</span></code> was completely void of text but facets and legends still
need labels. They are now visible (&#64;jiho).</p></li>
<li><p>You can once again set legend key and height width to unit arithmetic
objects (like <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">unit(1,</span> <span class="pre">&quot;cm&quot;)</span></code>) (#1437).</p></li>
<li><p>Eliminate spurious warning if you have a layer with no data and no aesthetics
(#1451).</p></li>
<li><p>Removed a superfluous comma in <code class="docutils literal notranslate"><span class="pre">theme-defaults.r</span></code> code (&#64;jschoeley)</p></li>
<li><p>Fixed a compatibility issue with <code class="docutils literal notranslate"><span class="pre">ggproto</span></code> and R versions prior to 3.1.2.
(#1444)</p></li>
<li><p>Fixed issue where <code class="docutils literal notranslate"><span class="pre">coord_map()</span></code> fails when given an explicit <code class="docutils literal notranslate"><span class="pre">parameters</span></code>
argument (&#64;tdmcarthur, #1729)</p></li>
<li><p>Fixed issue where <code class="docutils literal notranslate"><span class="pre">geom_errorbarh()</span></code> had a required <code class="docutils literal notranslate"><span class="pre">x</span></code> aesthetic (#1933)</p></li>
</ul>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="ggplot2-2-0-0">
<h1>ggplot2 2.0.0<a class="headerlink" href="#ggplot2-2-0-0" title="Permalink to this headline">¶</a></h1>
<div class="section" id="major-changes">
<h2>Major changes<a class="headerlink" href="#major-changes" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p>ggplot no longer throws an error if your plot has no layers. Instead it
automatically adds <code class="docutils literal notranslate"><span class="pre">geom_blank()</span></code> (#1246).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">cut_width()</span></code> is a convenient replacement for the verbose
<code class="docutils literal notranslate"><span class="pre">plyr::round_any()</span></code>, with the additional benefit of offering finer
control.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">geom_count()</span></code> is a convenient alias to <code class="docutils literal notranslate"><span class="pre">stat_sum()</span></code>. Use it when you
have overlapping points on a scatterplot. <code class="docutils literal notranslate"><span class="pre">stat_sum()</span></code> now defaults to
using counts instead of proportions.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">geom_curve()</span></code> adds curved lines, with a similar specification to
<code class="docutils literal notranslate"><span class="pre">geom_segment()</span></code> (&#64;veraanadi, #1088).</p></li>
<li><p>Date and datetime scales now have <code class="docutils literal notranslate"><span class="pre">date_breaks</span></code>, <code class="docutils literal notranslate"><span class="pre">date_minor_breaks</span></code> and
<code class="docutils literal notranslate"><span class="pre">date_labels</span></code> arguments so that you never need to use the long
<code class="docutils literal notranslate"><span class="pre">scales::date_breaks()</span></code> or <code class="docutils literal notranslate"><span class="pre">scales::date_format()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code> now has it’s own stat, distinct from <code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> which was
also used by <code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code>. <code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code> now uses <code class="docutils literal notranslate"><span class="pre">stat_count()</span></code>
which counts values at each distinct value of x (i.e. it does not bin
the data first). This can be useful when you want to show exactly which
values are used in a continuous variable.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_point()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">stroke</span></code> aesthetic which controls the border width of
shapes 21-25 (#1133, &#64;SeySayux). <code class="docutils literal notranslate"><span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">stroke</span></code> are additive so a point
with <code class="docutils literal notranslate"><span class="pre">size</span> <span class="pre">=</span> <span class="pre">5</span></code> and <code class="docutils literal notranslate"><span class="pre">stroke</span> <span class="pre">=</span> <span class="pre">5</span></code> will have a diameter of 10mm. (#1142)</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">position_nudge()</span></code> allows you to slightly offset labels (or other
geoms) from their corresponding points (#1109).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_size()</span></code> now maps values to <em>area</em>, not radius. Use <code class="docutils literal notranslate"><span class="pre">scale_radius()</span></code>
if you want the old behaviour (not recommended, except perhaps for lines).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">stat_summary_bin()</span></code> works like <code class="docutils literal notranslate"><span class="pre">stat_summary()</span></code> but on binned data.
It’s a generalisation of <code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> that can compute any aggregate,
not just counts (#1274). Both default to <code class="docutils literal notranslate"><span class="pre">mean_se()</span></code> if no aggregation
functions are supplied (#1386).</p></li>
<li><p>Layers are now much stricter about their arguments - you will get an error
if you’ve supplied an argument that isn’t an aesthetic or a parameter.
This is likely to cause some short-term pain but in the long-term it will make
it much easier to spot spelling mistakes and other errors (#1293).</p>
<p>This change does break a handful of geoms/stats that used <code class="docutils literal notranslate"><span class="pre">...</span></code> to pass
additional arguments on to the underlying computation. Now
<code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code>/<code class="docutils literal notranslate"><span class="pre">stat_smooth()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_quantile()</span></code>/<code class="docutils literal notranslate"><span class="pre">stat_quantile()</span></code>
use <code class="docutils literal notranslate"><span class="pre">method.args</span></code> instead (#1245, #1289); and <code class="docutils literal notranslate"><span class="pre">stat_summary()</span></code> (#1242),
<code class="docutils literal notranslate"><span class="pre">stat_summary_hex()</span></code>, and <code class="docutils literal notranslate"><span class="pre">stat_summary2d()</span></code> use <code class="docutils literal notranslate"><span class="pre">fun.args</span></code>.</p>
</li>
</ul>
<div class="section" id="extensibility">
<h3>Extensibility<a class="headerlink" href="#extensibility" title="Permalink to this headline">¶</a></h3>
<p>There is now an official mechanism for defining Stats, Geoms, and Positions in
other packages. See <code class="docutils literal notranslate"><span class="pre">vignette(&quot;extending-ggplot2&quot;)</span></code> for details.</p>
<ul class="simple">
<li><p>All Geoms, Stats and Positions are now exported, so you can inherit from them
when making your own objects (#989).</p></li>
<li><p>ggplot2 no longer uses proto or reference classes. Instead, we now use
ggproto, a new OO system designed specifically for ggplot2. Unlike proto
and RC, ggproto supports clean cross-package inheritance. Creating a new OO
system isn’t usually the right way to solve a problem, but I’m pretty sure
it was necessary here. Read more about it in the vignette.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aes_()</span></code> replaces <code class="docutils literal notranslate"><span class="pre">aes_q()</span></code>. It also supports formulas, so the most concise
SE version of <code class="docutils literal notranslate"><span class="pre">aes(carat,</span> <span class="pre">price)</span></code> is now <code class="docutils literal notranslate"><span class="pre">aes_(~carat,</span> <span class="pre">~price)</span></code>. You may
want to use this form in packages, as it will avoid spurious <code class="docutils literal notranslate"><span class="pre">R</span> <span class="pre">CMD</span> <span class="pre">check</span></code>
warnings about undefined global variables.</p></li>
</ul>
</div>
<div class="section" id="text">
<h3>Text<a class="headerlink" href="#text" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">geom_text()</span></code> has been overhauled to make labelling your data a little
easier. It:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">nudge_x</span></code> and <code class="docutils literal notranslate"><span class="pre">nudge_y</span></code> arguments let you offset labels from their
corresponding points (#1120).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_overlap</span> <span class="pre">=</span> <span class="pre">TRUE</span></code> provides a simple way to avoid overplotting
of labels: labels that would otherwise overlap are omitted (#1039).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hjust</span></code> and <code class="docutils literal notranslate"><span class="pre">vjust</span></code> can now be character vectors: “left”, “center”,
“right”, “bottom”, “middle”, “top”. New options include “inward” and
“outward” which align text towards and away from the center of the plot
respectively.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_label()</span></code> works like <code class="docutils literal notranslate"><span class="pre">geom_text()</span></code> but draws a rounded rectangle
underneath each label (#1039). This is useful when you want to label plots
that are dense with data.</p></li>
</ul>
</div>
<div class="section" id="deprecated-features">
<h3>Deprecated features<a class="headerlink" href="#deprecated-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The little used <code class="docutils literal notranslate"><span class="pre">aes_auto()</span></code> has been deprecated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aes_q()</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">aes_()</span></code> to be consistent with SE versions
of NSE functions in other packages.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">order</span></code> aesthetic is officially deprecated. It never really worked, and
was poorly documented.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">stat</span></code> and <code class="docutils literal notranslate"><span class="pre">position</span></code> arguments to <code class="docutils literal notranslate"><span class="pre">qplot()</span></code> have been deprecated.
<code class="docutils literal notranslate"><span class="pre">qplot()</span></code> is designed for quick plots - if you need to specify position
or stat, use <code class="docutils literal notranslate"><span class="pre">ggplot()</span></code> instead.</p></li>
<li><p>The theme setting <code class="docutils literal notranslate"><span class="pre">axis.ticks.margin</span></code> has been deprecated: now use the margin
property of <code class="docutils literal notranslate"><span class="pre">axis.text</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_abline()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_hline()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_vline()</span></code> have been removed:
these were never suitable for use other than with <code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code> etc
and were not documented.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show_guide</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">show.legend</span></code>: this more accurately
reflects what it does (controls appearance of layer in legend), and uses the
same convention as other ggplot2 arguments (i.e. a <code class="docutils literal notranslate"><span class="pre">.</span></code> between names).
(Yes, I know that’s inconsistent with function names with use <code class="docutils literal notranslate"><span class="pre">_</span></code>, but it’s
too late to change now.)</p></li>
</ul>
<p>A number of geoms have been renamed to be internally consistent:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">stat_binhex()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_bin2d()</span></code> have been renamed to <code class="docutils literal notranslate"><span class="pre">stat_bin_hex()</span></code>
and <code class="docutils literal notranslate"><span class="pre">stat_bin_2d()</span></code> (#1274). <code class="docutils literal notranslate"><span class="pre">stat_summary2d()</span></code> has been renamed to
<code class="docutils literal notranslate"><span class="pre">stat_summary_2d()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_density2d()</span></code>/<code class="docutils literal notranslate"><span class="pre">stat_density2d()</span></code> has been renamed
to <code class="docutils literal notranslate"><span class="pre">geom_density_2d()</span></code>/<code class="docutils literal notranslate"><span class="pre">stat_density_2d()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_spoke()</span></code> is now <code class="docutils literal notranslate"><span class="pre">geom_spoke()</span></code> since I realised it’s a
reparameterisation of <code class="docutils literal notranslate"><span class="pre">geom_segment()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bindot()</span></code> has been removed because it’s so tightly coupled to
<code class="docutils literal notranslate"><span class="pre">geom_dotplot()</span></code>. If you happened to use <code class="docutils literal notranslate"><span class="pre">stat_bindot()</span></code>, just change to
<code class="docutils literal notranslate"><span class="pre">geom_dotplot()</span></code> (#1194).</p></li>
</ul>
<p>All defunct functions have been removed.</p>
</div>
<div class="section" id="default-appearance">
<h3>Default appearance<a class="headerlink" href="#default-appearance" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The default <code class="docutils literal notranslate"><span class="pre">theme_grey()</span></code> background colour has been changed from “grey90”
to “grey92”: this makes the background a little less visually prominent.</p></li>
<li><p>Labels and titles have been tweaked for readability:</p>
<ul class="simple">
<li><p>Axes labels are darker.</p></li>
<li><p>Legend and axis titles are given the same visual treatment.</p></li>
<li><p>The default font size dropped from 12 to 11. You might be surprised that
I’ve made the default text size smaller as it was already hard for
many people to read. It turns out there was a bug in RStudio (fixed in
0.99.724), that shrunk the text of all grid based graphics. Once that
was resolved the defaults seemed too big to my eyes.</p></li>
<li><p>More spacing between titles and borders.</p></li>
<li><p>Default margins scale with the theme font size, so the appearance at
larger font sizes should be considerably improved (#1228).</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">alpha</span></code> now affects both fill and colour aesthetics (#1371).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">element_text()</span></code> gains a margins argument which allows you to add additional
padding around text elements. To help see what’s going on use <code class="docutils literal notranslate"><span class="pre">debug</span> <span class="pre">=</span> <span class="pre">TRUE</span></code>
to display the text region and anchors.</p></li>
<li><p>The default font size in <code class="docutils literal notranslate"><span class="pre">geom_text()</span></code> has been decreased from 5mm (14 pts)
to 3.8 mm (11 pts) to match the new default theme sizes.</p></li>
<li><p>A diagonal line is no longer drawn on bar and rectangle legends. Instead, the
border has been tweaked to be more visible, and more closely match the size of
line drawn on the plot.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_pointrange()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_linerange()</span></code> get vertical (not horizontal)
lines in the legend (#1389).</p></li>
<li><p>The default line <code class="docutils literal notranslate"><span class="pre">size</span></code> for <code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code> has been increased from 0.5 to 1
to make it easier to see when overlaid on data.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_bar()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_rect()</span></code> use a slightly paler shade of grey so they
aren’t so visually heavy.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code> now colours outliers the same way as the boxes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_point()</span></code> now uses shape 19 instead of 16. This looks much better on
the default Linux graphics device. (It’s very slightly smaller than the old
point, but it shouldn’t affect any graphics significantly)</p></li>
<li><p>Sizes in ggplot2 are measured in mm. Previously they were converted to pts
(for use in grid) by multiplying by 72 / 25.4. However, grid uses printer’s
points, not Adobe (big pts), so sizes are now correctly multiplied by
72.27 / 25.4. This is unlikely to noticeably affect display, but it’s
technically correct (<a class="reference external" href="https://youtu.be/hou0lU8WMgo">https://youtu.be/hou0lU8WMgo</a>).</p></li>
<li><p>The default legend will now allocate multiple rows (if vertical) or
columns (if horizontal) in order to make a legend that is more likely to
fit on the screen. You can override with the <code class="docutils literal notranslate"><span class="pre">nrow</span></code>/<code class="docutils literal notranslate"><span class="pre">ncol</span></code> arguments
to <code class="docutils literal notranslate"><span class="pre">guide_legend()</span></code></p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">p</span> <span class="o">&lt;-</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">mpg</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">displ</span><span class="p">,</span><span class="n">hwy</span><span class="p">,</span> <span class="n">colour</span> <span class="o">=</span> <span class="n">model</span><span class="p">))</span> <span class="o">+</span> <span class="nf">geom_point</span><span class="p">()</span>
<span class="n">p</span>
<span class="n">p</span> <span class="o">+</span> <span class="nf">theme</span><span class="p">(</span><span class="n">legend.position</span> <span class="o">=</span> <span class="s">&quot;bottom&quot;</span><span class="p">)</span>
<span class="c1"># Previous behaviour</span>
<span class="n">p</span> <span class="o">+</span> <span class="nf">guides</span><span class="p">(</span><span class="n">colour</span> <span class="o">=</span> <span class="nf">guide_legend</span><span class="p">(</span><span class="n">ncol</span> <span class="o">=</span> <span class="m">1</span><span class="p">))</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="new-and-updated-themes">
<h3>New and updated themes<a class="headerlink" href="#new-and-updated-themes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">theme_void()</span></code> is completely empty. It’s useful for plots with non-
standard coordinates or for drawings (&#64;jiho, #976).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">theme_dark()</span></code> has a dark background designed to make colours pop out
(&#64;jiho, #1018)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theme_minimal()</span></code> became slightly more minimal by removing the axis ticks:
labels now line up directly beneath grid lines (&#64;tomschloss, #1084)</p></li>
<li><p>New theme setting <code class="docutils literal notranslate"><span class="pre">panel.ontop</span></code> (logical) make it possible to place
background elements (i.e., gridlines) on top of data. Best used with
transparent <code class="docutils literal notranslate"><span class="pre">panel.background</span></code> (&#64;noamross. #551).</p></li>
</ul>
</div>
<div class="section" id="labelling">
<h3>Labelling<a class="headerlink" href="#labelling" title="Permalink to this headline">¶</a></h3>
<p>The facet labelling system was updated with many new features and a
more flexible interface (&#64;lionel-). It now works consistently across
grid and wrap facets. The most important user visible changes are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">labeller</span></code> option (#25).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> and <code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> gain a <code class="docutils literal notranslate"><span class="pre">switch</span></code> argument to
display the facet titles near the axes. When switched, the labels
become axes subtitles. <code class="docutils literal notranslate"><span class="pre">switch</span></code> can be set to “x”, “y” or “both”
(the latter only for grids) to control which margin is switched.</p></li>
</ul>
<p>The labellers (such as <code class="docutils literal notranslate"><span class="pre">label_value()</span></code> or <code class="docutils literal notranslate"><span class="pre">label_both()</span></code>) also get
some new features:</p>
<ul>
<li><p>They now offer the <code class="docutils literal notranslate"><span class="pre">multi_line</span></code> argument to control whether to
display composite facets (those specified as <code class="docutils literal notranslate"><span class="pre">~var1</span> <span class="pre">+</span> <span class="pre">var2</span></code>) on one
or multiple lines.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">label_bquote()</span></code> you now refer directly to the names of
variables. With this change, you can create math expressions that
depend on more than one variable. This math expression can be
specified either for the rows or the columns and you can also
provide different expressions to each margin.</p>
<p>As a consequence of these changes, referring to <code class="docutils literal notranslate"><span class="pre">x</span></code> in backquoted
expressions is deprecated.</p>
</li>
<li><p>Similarly to <code class="docutils literal notranslate"><span class="pre">label_bquote()</span></code>, <code class="docutils literal notranslate"><span class="pre">labeller()</span></code> now take <code class="docutils literal notranslate"><span class="pre">.rows</span></code> and
<code class="docutils literal notranslate"><span class="pre">.cols</span></code> arguments. In addition, it also takes <code class="docutils literal notranslate"><span class="pre">.default</span></code>.
<code class="docutils literal notranslate"><span class="pre">labeller()</span></code> is useful to customise how particular variables are
labelled. The three additional arguments specify how to label the
variables are not specifically mentioned, respectively for rows,
columns or both. This makes it especially easy to set up a
project-wide labeller dispatcher that can be reused across all your
plots. See the documentation for an example.</p></li>
<li><p>The new labeller <code class="docutils literal notranslate"><span class="pre">label_context()</span></code> adapts to the number of factors
facetted over. With a single factor, it displays only the values,
just as before. But with multiple factors in a composite margin
(e.g. with <code class="docutils literal notranslate"><span class="pre">~cyl</span> <span class="pre">+</span> <span class="pre">am</span></code>), the labels are passed over to
<code class="docutils literal notranslate"><span class="pre">label_both()</span></code>. This way the variables names are displayed with the
values to help identifying them.</p></li>
</ul>
<p>On the programming side, the labeller API has been rewritten in order
to offer more control when faceting over multiple factors (e.g. with
formulae such as <code class="docutils literal notranslate"><span class="pre">~cyl</span> <span class="pre">+</span> <span class="pre">am</span></code>). This also means that if you have
written custom labellers, you will need to update them for this
version of ggplot.</p>
<ul class="simple">
<li><p>Previously, a labeller function would take <code class="docutils literal notranslate"><span class="pre">variable</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code>
arguments and return a character vector. Now, they take a data frame
of character vectors and return a list. The input data frame has one
column per factor facetted over and each column in the returned list
becomes one line in the strip label. See documentation for more
details.</p></li>
<li><p>The labels received by a labeller now contain metadata: their margin
(in the “type” attribute) and whether they come from a wrap or a
grid facet (in the “facet” attribute).</p></li>
<li><p>Note that the new <code class="docutils literal notranslate"><span class="pre">as_labeller()</span></code> function operator provides an easy
way to transform an existing function to a labeller function. The
existing function just needs to take and return a character vector.</p></li>
</ul>
</div>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Improved documentation for <code class="docutils literal notranslate"><span class="pre">aes()</span></code>, <code class="docutils literal notranslate"><span class="pre">layer()</span></code> and much much more.</p></li>
<li><p>I’ve tried to reduce the use of <code class="docutils literal notranslate"><span class="pre">...</span></code> so that you can see all the
documentation in one place rather than having to integrate multiple pages.
In some cases this has involved adding additional arguments to geoms
to make it more clear what you can do:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code> gains explicit <code class="docutils literal notranslate"><span class="pre">method</span></code>, <code class="docutils literal notranslate"><span class="pre">se</span></code> and <code class="docutils literal notranslate"><span class="pre">formula</span></code> arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code> gains <code class="docutils literal notranslate"><span class="pre">binwidth</span></code>, <code class="docutils literal notranslate"><span class="pre">bins</span></code>, <code class="docutils literal notranslate"><span class="pre">origin</span></code> and <code class="docutils literal notranslate"><span class="pre">right</span></code>
arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_jitter()</span></code> gains <code class="docutils literal notranslate"><span class="pre">width</span></code> and <code class="docutils literal notranslate"><span class="pre">height</span></code> arguments to make it easier
to control the amount of jittering without using the lengthy
<code class="docutils literal notranslate"><span class="pre">position_jitter()</span></code> function (#1116)</p></li>
</ul>
</li>
<li><p>Use of <code class="docutils literal notranslate"><span class="pre">qplot()</span></code> in examples has been minimised (#1123, &#64;hrbrmstr). This is
inline with the 2nd edition of the ggplot2 box, which minimises the use of
<code class="docutils literal notranslate"><span class="pre">qplot()</span></code> in favour of <code class="docutils literal notranslate"><span class="pre">ggplot()</span></code>.</p></li>
<li><p>Tighly linked geoms and stats (e.g. <code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_boxplot()</span></code>)
are now documented in the same file so you can see all the arguments in one
place. Variations of the same idea (e.g. <code class="docutils literal notranslate"><span class="pre">geom_path()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_line()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">geom_step()</span></code>) are also documented together.</p></li>
<li><p>It’s now obvious that you can set the <code class="docutils literal notranslate"><span class="pre">binwidth</span></code> parameter for
<code class="docutils literal notranslate"><span class="pre">stat_bin_hex()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_summary_hex()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_bin_2d()</span></code>, and
<code class="docutils literal notranslate"><span class="pre">stat_summary_2d()</span></code>.</p></li>
<li><p>The internals of positions have been cleaned up considerably. You’re unlikely
to notice any external changes, although the documentation should be a little
less confusing since positions now don’t list parameters they never use.</p></li>
</ul>
</div>
<div class="section" id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>All datasets have class <code class="docutils literal notranslate"><span class="pre">tbl_df</span></code> so if you also use dplyr, you get a better
print method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">economics</span></code> has been brought up to date to 2015-04-01.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">economics_long</span></code> is the economics data in long form.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">txhousing</span></code> dataset containing information about the Texas housing
market. Useful for examples that need multiple time series, and for
demonstrating model+vis methods.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">luv_colours</span></code> dataset which contains the locations of all
built-in <code class="docutils literal notranslate"><span class="pre">colors()</span></code> in Luv space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">movies</span></code> has been moved into its own package, ggplot2movies, because it was
large and not terribly useful. If you’ve used the movies dataset, you’ll now
need to explicitly load the package with <code class="docutils literal notranslate"><span class="pre">library(ggplot2movies)</span></code>.</p></li>
</ul>
</div>
<div class="section" id="id14">
<h2>Bug fixes and minor improvements<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>All partially matched arguments and <code class="docutils literal notranslate"><span class="pre">$</span></code> have been been replaced with
full matches (&#64;jimhester, #1134).</p></li>
<li><p>ggplot2 now exports <code class="docutils literal notranslate"><span class="pre">alpha()</span></code> from the scales package (#1107), and <code class="docutils literal notranslate"><span class="pre">arrow()</span></code>
and <code class="docutils literal notranslate"><span class="pre">unit()</span></code> from grid (#1225). This means you don’t need attach scales/grid
or do <code class="docutils literal notranslate"><span class="pre">scales::</span></code>/<code class="docutils literal notranslate"><span class="pre">grid::</span></code> for these commonly used functions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">aes_string()</span></code> now only parses character inputs. This fixes bugs when
using it with numbers and non default <code class="docutils literal notranslate"><span class="pre">OutDec</span></code> settings (#1045).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">annotation_custom()</span></code> automatically adds a unique id to each grob name,
making it easier to plot multiple grobs with the same name (e.g. grobs of
ggplot2 graphics) in the same plot (#1256).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">borders()</span></code> now accepts xlim and ylim arguments for specifying the geographical
region of interest (&#64;markpayneatwork, #1392).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_cartesian()</span></code> applies the same expansion factor to limits as for scales.
You can suppress with <code class="docutils literal notranslate"><span class="pre">expand</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> (#1207).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coord_trans()</span></code> now works when breaks are suppressed (#1422).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cut_number()</span></code> gives error message if the number of requested bins can
be created because there are two few unique values (#1046).</p></li>
<li><p>Character labels in <code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> are no longer (incorrectly) coerced into
factors. This caused problems with custom label functions (#1070).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> and <code class="docutils literal notranslate"><span class="pre">facet_grid()</span></code> now allow you to use non-standard
variable names by surrounding them with backticks (#1067).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> more carefully checks its <code class="docutils literal notranslate"><span class="pre">nrow</span></code> and <code class="docutils literal notranslate"><span class="pre">ncol</span></code> arguments
to ensure that they’re specified correctly (&#64;richierocks, #962)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">facet_wrap()</span></code> gains a <code class="docutils literal notranslate"><span class="pre">dir</span></code> argument to control the direction the
panels are wrapped in. The default is “h” for horizontal. Use “v” for
vertical layout (#1260).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_hline()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_vline()</span></code> have been rewritten to
have simpler behaviour and be more consistent:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_abline()</span></code>, <code class="docutils literal notranslate"><span class="pre">stat_hline()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_vline()</span></code> have been removed:
these were never suitable for use other than with <code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code> etc
and were not documented.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_abline()</span></code>, <code class="docutils literal notranslate"><span class="pre">geom_vline()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_hline()</span></code> are bound to
<code class="docutils literal notranslate"><span class="pre">stat_identity()</span></code> and <code class="docutils literal notranslate"><span class="pre">position_identity()</span></code></p></li>
<li><p>Intercept parameters can no longer be set to a function.</p></li>
<li><p>They are all documented in one file, since they are so closely related.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_bin2d()</span></code> will now let you specify one dimension’s breaks exactly,
without touching the other dimension’s default breaks at all (#1126).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_crossbar()</span></code> sets grouping correctly so you can display multiple
crossbars on one plot. It also makes the default <code class="docutils literal notranslate"><span class="pre">fatten</span></code> argument a little
bigger to make the middle line more obvious (#1125).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_histogram()</span></code> and <code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code> now only inform you about the
default values once per layer, rather than once per panel (#1220).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_pointrange()</span></code> gains <code class="docutils literal notranslate"><span class="pre">fatten</span></code> argument so you can control the
size of the point relative to the size of the line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_segment()</span></code> annotations were not transforming with scales
(&#64;BrianDiggs, #859).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_smooth()</span></code> is no longer so chatty. If you want to know what the deafult
smoothing method is, look it up in the documentation! (#1247)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geom_violin()</span></code> now has the ability to draw quantile lines (&#64;DanRuderman).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggplot()</span></code> now captures the parent frame to use for evaluation,
rather than always defaulting to the global environment. This should
make ggplot more suitable to use in more situations (e.g. with knitr)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ggsave()</span></code> has been simplified a little to make it easier to maintain.
It no longer checks that you’re printing a ggplot2 object (so now also
works with any grid grob) (#970), and always requires a filename.
Parameter <code class="docutils literal notranslate"><span class="pre">device</span></code> now supports character argument to specify which supported
device to use (‘pdf’, ‘png’, ‘jpeg’, etc.), for when it cannot be correctly
inferred from the file extension (for example when a temporary filename is
supplied server side in shiny apps) (&#64;sebkopf, #939). It no longer opens
a graphics device if one isn’t already open - this is annoying when you’re
running from a script (#1326).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code> creates correct legend if only one color (&#64;krlmlr, #943).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code> no longer fails when the legend is empty - previously
this often masked misspecifications elsewhere in the plot (#967).</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">layer_data()</span></code> function extracts the data used for plotting for a given
layer. It’s mostly useful for testing.</p></li>
<li><p>User supplied <code class="docutils literal notranslate"><span class="pre">minor_breaks</span></code> can now be supplied on the same scale as
the data, and will be automatically transformed with by scale (#1385).</p></li>
<li><p>You can now suppress the appearance of an axis/legend title (and the space
that would allocated for it) with <code class="docutils literal notranslate"><span class="pre">NULL</span></code> in the <code class="docutils literal notranslate"><span class="pre">scale_</span></code> function. To
use the default lable, use <code class="docutils literal notranslate"><span class="pre">waiver()</span></code> (#1145).</p></li>
<li><p>Position adjustments no longer warn about potentially varying ranges
because the problem rarely occurs in practice and there are currently a
lot of false positives since I don’t understand exactly what FP criteria
I should be testing.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_fill_grey()</span></code> now uses red for missing values. This matches
<code class="docutils literal notranslate"><span class="pre">scale_colour_grey()</span></code> and makes it obvious where missing values lie.
Override with <code class="docutils literal notranslate"><span class="pre">na.value</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_*_gradient2()</span></code> defaults to using Lab colour space.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_*_gradientn()</span></code> now allows <code class="docutils literal notranslate"><span class="pre">colours</span></code> or <code class="docutils literal notranslate"><span class="pre">colors</span></code> (#1290)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_y_continuous()</span></code> now also transforms the <code class="docutils literal notranslate"><span class="pre">lower</span></code>, <code class="docutils literal notranslate"><span class="pre">middle</span></code> and <code class="docutils literal notranslate"><span class="pre">upper</span></code>
aesthetics used by <code class="docutils literal notranslate"><span class="pre">geom_boxplot()</span></code>: this only affects
<code class="docutils literal notranslate"><span class="pre">geom_boxplot(stat</span> <span class="pre">=</span> <span class="pre">&quot;identity&quot;)</span></code> (#1020).</p></li>
<li><p>Legends no longer inherit aesthetics if <code class="docutils literal notranslate"><span class="pre">inherit.aes</span></code> is FALSE (#1267).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lims()</span></code> makes it easy to set the limits of any axis (#1138).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">labels</span> <span class="pre">=</span> <span class="pre">NULL</span></code> now works with <code class="docutils literal notranslate"><span class="pre">guide_legend()</span></code> and <code class="docutils literal notranslate"><span class="pre">guide_colorbar()</span></code>.
(#1175, #1183).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">override.aes</span></code> now works with American aesthetic spelling, e.g. color</p></li>
<li><p>Scales no longer round data points to improve performance of colour
palettes. Instead the scales package now uses a much faster colour
interpolation algorithm (#1022).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_*_brewer()</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_*_distiller()</span></code> add new <code class="docutils literal notranslate"><span class="pre">direction</span></code> argument of
<code class="docutils literal notranslate"><span class="pre">scales::brewer_pal</span></code>, making it easier to change the order of colours
(&#64;jiho, #1139).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scale_x_date()</span></code> now clips dates outside the limits in the same way as
<code class="docutils literal notranslate"><span class="pre">scale_x_continuous()</span></code> (#1090).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_bin()</span></code> gains <code class="docutils literal notranslate"><span class="pre">bins</span></code> arguments, which denotes the number of bins. Now
you can set <code class="docutils literal notranslate"><span class="pre">bins=100</span></code> instead of <code class="docutils literal notranslate"><span class="pre">binwidth=0.5</span></code>. Note that <code class="docutils literal notranslate"><span class="pre">breaks</span></code> or
<code class="docutils literal notranslate"><span class="pre">binwidth</span></code> will override it (&#64;tmshn, #1158, #102).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_boxplot()</span></code> warns if a continuous variable is used for the <code class="docutils literal notranslate"><span class="pre">x</span></code> aesthetic
without also supplying a <code class="docutils literal notranslate"><span class="pre">group</span></code> aesthetic (#992, &#64;krlmlr).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_summary_2d()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_bin_2d()</span></code> now share exactly the same code for
determining breaks from <code class="docutils literal notranslate"><span class="pre">bins</span></code>, <code class="docutils literal notranslate"><span class="pre">binwidth</span></code>, and <code class="docutils literal notranslate"><span class="pre">origin</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_summary_2d()</span></code> and <code class="docutils literal notranslate"><span class="pre">stat_bin_2d()</span></code> now output in tile/raster compatible
form instead of rect compatible form.</p></li>
<li><p>Automatically computed breaks do not lead to an error for transformations like
“probit” where the inverse can map to infinity (#871, &#64;krlmlr)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stat_function()</span></code> now always evaluates the function on the original scale.
Previously it computed the function on transformed scales, giving incorrect
values (&#64;BrianDiggs, #1011).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">strip_dots</span></code> works with anonymous functions within calculated aesthetics
(e.g. <code class="docutils literal notranslate"><span class="pre">aes(sapply(..density..,</span> <span class="pre">function(x)</span> <span class="pre">mean(x))))</span></code> (#1154, &#64;NikNakk)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">theme()</span></code> gains <code class="docutils literal notranslate"><span class="pre">validate</span> <span class="pre">=</span> <span class="pre">FALSE</span></code> parameter to turn off validation, and
hence store arbitrary additional data in the themes. (&#64;tdhock, #1121)</p></li>
<li><p>Improved the calculation of segments needed to draw the curve representing
a line when plotted in polar coordinates. In some cases, the last segment
of a multi-segment line was not drawn (&#64;BrianDiggs, #952)</p></li>
</ul>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./temporal/renv/library/R-4.1/aarch64-apple-darwin20/ggplot2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Quan Nguyen<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../../../../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>